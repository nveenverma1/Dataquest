(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1059:function(e,t,a){e.exports=a.p+"assets/flag-victory17cb8764eeb259c7c95ec092e118ae19.svg"},1442:function(e,t,a){e.exports={header:"BadgeToast__header",shield:"BadgeToast__shield",root:"BadgeToast__root",enter:"BadgeToast__enter",enterActive:"BadgeToast__enterActive",exit:"BadgeToast__exit",exitActive:"BadgeToast__exitActive",badge:"BadgeToast__badge",next_suggestion:"BadgeToast__next_suggestion",ack_button:"BadgeToast__ack_button",left:"BadgeToast__left",right:"BadgeToast__right"}},1476:function(e,t,a){"use strict";a.r(t),a.d(t,"selectors",function(){return v}),a.d(t,"actions",function(){return w}),a.d(t,"BadgeToast",function(){return k});var n=a(0),o=a.n(n),s=a(1),r=a.n(s),i=a(6),l=a(3),c=a(153),u=a(4),d=a(1442),_=a.n(d),g=a(154),p=a(9),f=a(140),h=a(5),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v={last_earned:f.selectors.last_earned,next_suggestion:f.selectors.next_suggestion,is_logged_in:h.b.is_logged_in},w=f.actions,T=Object(l.createStructuredSelector)(v),k=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,s=Array(o),r=0;r<o;r++)s[r]=arguments[r];return a=n=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={next_suggestion:"",showable:!1},n.stop_click=function(e){e.stopPropagation()},y(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.a.PureComponent),m(t,[{key:"componentDidMount",value:function(){this.conditionally_load(this.props,{})}},{key:"componentDidUpdate",value:function(e){var t=this;this.conditionally_load(this.props,e),this.props.last_earned.title&&!this.state.showable&&null==this._timer&&(this._timer=window.setTimeout(function(){t.setState({showable:!0}),t._timer=null},3e3))}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this._timer)}},{key:"conditionally_load",value:function(e,t){!t.is_logged_in&&e.is_logged_in&&e.load_badges()}},{key:"render_next_suggestion",value:function(){return null==this.props.next_suggestion?null:o.a.createElement("div",{className:"BadgeToast__next_suggestion"},"Earn your  ",o.a.createElement(u.a,{onClick:this.props.ack_just_earned,to:"/reward-badges"},"next badge")," by ",this.state.next_description)}},{key:"render_badge",value:function(e){return this.state.showable?o.a.createElement(c.CSSTransition,b({},e,{classNames:_.a,timeout:1e3,key:"badge"}),o.a.createElement("div",{className:"BadgeToast__shield",onClick:this.props.ack_just_earned},o.a.createElement("div",{className:"BadgeToast__root",onClick:this.stop_click},o.a.createElement("div",{className:"BadgeToast__header"},"You just earned a badge!"),o.a.createElement("div",{className:"BadgeToast__badge"},o.a.createElement("img",{className:"BadgeToast__left",src:a(1059)}),o.a.createElement(g.a,b({},this.props.last_earned,{show_back_after_delay:!0})),o.a.createElement("img",{className:"BadgeToast__right",src:a(1059)})),this.render_next_suggestion(),o.a.createElement(p.a,{className:"BadgeToast__ack_button",text:"Awesome!",color:"white",hollow:!0,onClick:this.props.ack_just_earned})))):null}},{key:"render",value:function(){return o.a.createElement(c.TransitionGroup,null,this.render_badge())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.next_suggestion,n=t.showable&&Boolean(e.last_earned.title);if(null==a)return{next_description:"",showable:n};var o=a.state.count,s=a.levels[0];return{next_description:a.description.replace("$N",s-o+" more"),showable:n}}}]),t}();k.propTypes={is_logged_in:r.a.bool.isRequired,load_badges:r.a.func.isRequired,last_earned:r.a.shape({title:r.a.string}).isRequired,next_suggestion:r.a.shape({title:r.a.string.isRequired,description:r.a.string.isRequired,levels:r.a.arrayOf(r.a.number).isRequired,date_earned:r.a.string,state:r.a.shape({count:r.a.number.isRequired}).isRequired}),ack_just_earned:r.a.func.isRequired},k.defaultProps={last_earned:{}},k.displayName="BadgeToast",t.default=Object(i.b)(T,w)(k)}}]);
//# sourceMappingURL=BadgeToast.c522093c398c68f4cf1e.js.map