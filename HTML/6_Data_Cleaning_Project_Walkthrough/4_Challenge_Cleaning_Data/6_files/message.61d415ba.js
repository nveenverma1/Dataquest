(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{1017:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mergeProps=t.mapDispatchToProps=t.mapStateToProps=void 0;var r,n=o(38),i=(r=o(1101))&&r.__esModule?r:{default:r},a=o(45);var s=o(53),l=o(167).getConversation,c=o(447),u=function(e){var t=c(e)[0];return{isFetching:t.isFetching,isFetched:!(0,a.isPartiallyFetched)(t),conversation:t}};t.mapStateToProps=u;var d=function(t){return{onFetch:function(e){t(l(s,e))}}};t.mapDispatchToProps=d;var p=function(e,t,o){return Object.assign({},e,t,o,{onFetch:function(){t.onFetch(e.conversation.id)}})};t.mergeProps=p;var f=(0,n.connect)(u,d,p)(i.default);t.default=f},1018:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mapStateToProps=void 0;var r=o(38),n=a(o(1056)),i=o(1055),c=o(122),u=a(o(836));function a(e){return e&&e.__esModule?e:{default:e}}var d=o(24),s=o(53),l=o(168).openConversation,p=o(1202),f=p.openMessage,h=p.closeMessage,m=o(167),v=m.markConversationAsRead,y=m.getConversation,b=m.createReaction,g=o(731).dismissPointerMessage,w=function(e){var t=e.user.isPresent,o=e.app,r=o.name,n=o.userConversationAttachmentsEnabled,i=o.userConversationGifsEnabled,a=(0,u.default)(e),s=a[0],l=d.isMobileBrowser();return{appName:r,conversation:s,part:a[0].parts[0],userIsPresent:t,isMobile:l,showUploadButton:n,showGifButton:i,shouldShowUpfrontEmailComposer:(0,c.shouldShowUpfrontEmailSelector)(e),isUpfrontEmailComposerShowing:e.app.upfrontEmailCollection.upfrontEmailCollectorShowing}};t.mapStateToProps=w;var C=(0,r.connect)(w,function(o){return{onOpen:function(e,t){o(f(e,t))},onClose:function(e){o(h()),o(g(e))},onConversationRead:function(e){o(v(s,e))},onComposerOrFormInputClick:function(e){o(h()),o(g(e)),o(l(e)),o(y(s,e))},onReactionSelect:function(e,t){o(b(s,e,t,!1))}}},i.mergeProps)(n.default);t.default=C},1019:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mapDispatchToProps=t.mapStateToProps=void 0;var r,n=o(38),l=o(758),i=o(686),a=(r=o(1203))&&r.__esModule?r:{default:r};var s=function(e){var t=(0,l.activeTourSelector)(e),o=(0,l.activeTourStepSelector)(e),r=(0,l.activeTourStepIndex)(e),n=(0,l.activeTourStepCount)(e),i=(0,l.activeTourAuthor)(e),a=(0,l.isPreviewingTourSelector)(e),s=e.app.name;return{activeTourId:t.id,activeStep:o,activeStepIndex:r,stepCount:n,appName:s,author:i,isPreviewingTour:a}};t.mapStateToProps=s;var c=function(e){return{onContinue:function(){e((0,i.progressTour)())},onStop:function(){e((0,i.stopTour)())}}};t.mapDispatchToProps=c;var u=(0,n.connect)(s,c)(a.default);t.default=u},1055:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mergeProps=t.mapDispatchToProps=t.mapStateToProps=void 0;var r,n=o(38),i=(r=o(1056))&&r.__esModule?r:{default:r},d=o(122),p=o(45);var a=o(53),f=o(24),s=o(437),l=s.openMessage,c=s.closeMessage,u=s.recordMessageSent,h=o(168).openConversation,m=o(167),v=m.markConversationAsRead,y=m.getConversation,b=m.createReaction,g=o(447),w=function(e){var t=e.user.isPresent,o=e.app,r=o.name,n=o.userConversationAttachmentsEnabled,i=o.userConversationGifsEnabled,a=e.message.partId,s=g(e)[0],l=f.isMobileBrowser(),c=void 0!==a?s.parts.find(function(e){return e.id===a}):(0,p.messageOrAdminReply)(s),u=c.messageType;return u=u||"adminReply",{appName:r,conversation:s,part:c=Object.assign({},c,{messageType:u}),userIsPresent:t,isMobile:l,showUploadButton:n,showGifButton:i,shouldShowUpfrontEmailComposer:(0,d.shouldShowUpfrontEmailSelector)(e),isUpfrontEmailComposerShowing:e.app.upfrontEmailCollection.upfrontEmailCollectorShowing}};t.mapStateToProps=w;var C=function(o){return{onOpen:function(e,t){o(l(e,t)),o(u(e,t))},onClose:function(){o(c())},onConversationRead:function(e){o(v(a,e))},onComposerOrFormInputClick:function(e){o(c()),o(h(e)),o(y(a,e))},onReactionSelect:function(e,t){o(b(a,e,t,!1))}}};t.mapDispatchToProps=C;var O=function(o,r,e){return Object.assign({},o,r,e,{onOpen:function(){var e=o.conversation,t=o.part;r.onOpen(e.id,t.id)},onConversationRead:function(){r.onConversationRead(o.conversation.id)},onComposerOrFormInputClick:function(){r.onComposerOrFormInputClick(o.conversation.id)},onReactionSelect:function(e){r.onReactionSelect(o.conversation.id,e)},onClose:function(){var e=o.conversation;r.onClose(e.id)}})};t.mergeProps=O;var _=(0,n.connect)(w,C,O)(i.default);t.default=_},1056:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(o(7)),f=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};r.get||r.set?Object.defineProperty(t,o,r):t[o]=e[o]}return t.default=e,t}}(o(2)),h=n(o(1102)),m=n(o(1137)),v=n(o(1140)),y=n(o(1068)),b=n(o(1149)),g=n(o(1154));function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var a=function(r){var e,t;function o(){for(var a,e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return s(i(i(a=r.call.apply(r,[this].concat(t))||this)),"addMessageMetric",function(e){var t=a.props,o=t.conversation,r=t.part,n=r.id,i=r.messageType;a.context.addMetric(e,"message","in_app","from_full",{conversation_id:o.id,message_id:n,message_type:i})}),s(i(i(a)),"handleDismissClick",function(){a.addMessageMetric("closed"),a.props.onClose()}),a}t=r,(e=o).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=o.prototype;return n.componentDidMount=function(){var e=this.props,t=e.conversation,o=e.userIsPresent,r=e.onOpen,n=e.onConversationRead;r(),!t.read&&o&&n(),this.addMessageMetric("received")},n.componentDidUpdate=function(){var e=this.props,t=e.userIsPresent,o=e.conversation;t&&!o.read&&this.props.onConversationRead()},n.render=function(){var e=this.props,t=e.appWindow,o=e.conversation,r=e.part,n=e.appName,i=e.isMobile,a=e.onComposerOrFormInputClick,s=e.onReactionSelect,l=e.showUploadButton,c=e.showGifButton,u=e.shouldShowUpfrontEmailComposer,d=r.messageType,p=r.reactionsReply;switch(d){case"adminReply":case"link":case"messengerCard":case"notificationChannels":case"attributeCollector":case"conversationRating":case"chat":return i?f.default.createElement(h.default,{appName:n,part:r,onClose:this.handleDismissClick,composerState:o.composerState,onComposerOrFormInputClick:a}):f.default.createElement(g.default,{conversation:o,part:r,onClose:this.handleDismissClick,showReplyToButton:u,onComposerClick:a});case"video":return f.default.createElement(b.default,{conversation:o,standalone:!0,part:r,onClose:this.handleDismissClick,onComposerOrFormInputClick:a});case"note":return f.default.createElement(m.default,{conversationId:o.id,appName:n,message:r,reactionsReply:p,showUploadButton:l,showGifButton:c,onClose:this.handleDismissClick,onComposerClick:a,onReactionSelect:s,showReplyToButton:u});case"post":return f.default.createElement(y.default,{conversationId:o.id,appName:n,message:r,reactionsReply:p,onClose:this.handleDismissClick,onComposerClick:a,onReactionSelect:s,showReplyToButton:u});case"pointer":return f.default.createElement(v.default,{appWindow:t,appName:n,message:r,conversationId:o.id,reactionsReply:p,onComposerClick:a,onReactionSelect:s,onClose:this.handleDismissClick})}},o}(f.Component);(t.default=a).propTypes={appWindow:r.default.object,conversation:r.default.shape({read:r.default.bool.isRequired}).isRequired,part:r.default.shape({messageType:r.default.string}).isRequired,appName:r.default.string.isRequired,isMobile:r.default.bool.isRequired,userIsPresent:r.default.bool.isRequired,onConversationRead:r.default.func.isRequired,onOpen:r.default.func.isRequired,onClose:r.default.func.isRequired,onComposerOrFormInputClick:r.default.func.isRequired,onReactionSelect:r.default.func.isRequired,showUploadButton:r.default.bool,showGifButton:r.default.bool,shouldShowUpfrontEmailComposer:r.default.bool},a.contextTypes={addMetric:r.default.func}},1067:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(o(181)),i=n(o(399)),a=r(o(2)),s=n(o(1143)),c=n(o(15)),u=n(o(1144)),d=n(o(422)),p=o(69),f=r(o(1145)),h=r(o(1146)),m=o(1147);function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};r.get||r.set?Object.defineProperty(t,o,r):t[o]=e[o]}return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function v(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),r.forEach(function(e){b(t,e,o[e])})}return t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var g=function(n){var e,t;function o(){for(var r,e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return b(y(y(r=n.call.apply(n,[this].concat(t))||this)),"arrow",void 0),b(y(y(r)),"node",void 0),b(y(y(r)),"arrowContainer",void 0),b(y(y(r)),"positioner",void 0),b(y(y(r)),"intersectionOverserver",void 0),b(y(y(r)),"state",{styles:null,arrowStyles:null,hide:!1,nodeInViewPort:!1,positionerOffsetForMask:{left:0,top:0},placement:null}),b(y(y(r)),"updateElementPosition",function(e){var t=e.styles,o=e.arrowStyles;return r.setState({styles:t,arrowStyles:o,hide:!r.targetIsVisible()}),e.attributes&&r.applyAttributes(e.attributes),e}),b(y(y(r)),"handleOverlayClick",function(){r.props.onOverlayClick&&r.props.onOverlayClick()}),b(y(y(r)),"handlePlacementChange",function(){r.props.onPlacementChange&&r.state.placement&&r.props.onPlacementChange(r.state.placement)}),r}t=n,(e=o).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=o.prototype;return r.componentDidMount=function(){this.initializeIntersectionObserver(),this.initializePositioner()},r.shouldComponentUpdate=function(e,t){return!(0,i.default)(this.props,e)||!(0,i.default)(this.state,t)},r.componentDidUpdate=function(e,t){e.targetSelector!==this.props.targetSelector?(this.reinitializeIntersectionObserver(),this.reinitializePointer()):this.positioner?this.positioner.scheduleUpdate():this.initializePositioner(),t.placement!==this.state.placement&&this.handlePlacementChange()},r.componentWillUnmount=function(){var e=this.props.appWindow;this.destroyIntersectionObserver(),this.destroyPositioner(),(0,f.RemoveIntersectionWindowContext)(e),(0,h.removeScrollIntoViewPolyfill)(e)},r.getTargetNode=function(){var e=this.props,t=e.targetSelector,o=e.appWindow;try{return o.document.querySelector(t)}catch(e){return null}},r.storeMaskOffsetsBasedOnFlipPosition=function(e){if(this.props.scrollable){var t=e["x-placement"];switch(t){case"bottom":this.setState({placement:t,positionerOffsetForMask:{left:0,top:3}});break;case"top":this.setState({placement:t,positionerOffsetForMask:{left:0,top:-3}});break;case"left":this.setState({placement:t,positionerOffsetForMask:{left:-5,top:0}});break;case"right":this.setState({placement:t,positionerOffsetForMask:{left:3,top:0}});break;default:return}}},r.applyAttributes=function(o){var e=this;[this.arrowContainer,this.node].forEach(function(t){t&&"function"==typeof t.querySelectorAll&&Object.keys(o).forEach(function(e){t&&t.setAttribute&&t.setAttribute(e,o[e])}),e.storeMaskOffsetsBasedOnFlipPosition(o)})},r.targetIsVisible=function(){if(!this.state.nodeInViewPort)return!1;var e=this.getTargetNode();return(0,p.nodeIsVisible)(e)},r.scrollIntoView=function(){var t=this,e=this.props.appWindow;(0,h.default)(e);var o=this.getTargetNode();setTimeout(function(){var e=t.state.nodeInViewPort;o&&!e&&o.intercomScrollIntoView({behavior:"smooth",block:"end"})},200)},r.initializePositioner=function(){var e=this.props.scrollable,t=this.getTargetNode();t&&this.node&&(e&&this.scrollIntoView(),this.positioner=new s.default(t,this.node,{positionFixed:!1,placement:"auto",modifiers:{applyStyle:{enabled:!1},preventOverflow:{boundariesElement:"viewport"},arrow:{enabled:!0,element:this.arrow,fn:m.arrowFnModifier},updateElementPosition:{enabled:!0,fn:this.updateElementPosition,order:900}}}))},r.initializeIntersectionObserver=function(){var a=this,e=this.props.appWindow,s=this.getTargetNode();s&&(e.IntercomIntersectionObserver||(0,f.default)(e),this.intersectionOverserver=new e.IntercomIntersectionObserver(function(e){if(0!==e.length){var t=(0,l.default)(e,["time"],["desc"])[0],o=t.isIntersecting,r=t.intersectionRatio,n=o&&.5<=r,i=n&&(0,p.nodeIsVisible)(s);a.setState({hide:!i,nodeInViewPort:n})}},{threshold:.5}),this.intersectionOverserver.observe(s))},r.destroyPositioner=function(){this.positioner&&this.positioner.destroy()},r.destroyIntersectionObserver=function(){this.intersectionOverserver&&this.intersectionOverserver.disconnect()},r.reinitializePointer=function(){this.destroyPositioner(),this.initializePositioner()},r.reinitializeIntersectionObserver=function(){this.destroyIntersectionObserver(),this.initializeIntersectionObserver()},r.getMaskClassNames=function(){var e=this.getTargetNode();return(0,c.default)({"intercom-positioner-mask":!0,"intercom-positioner-mask-step":this.props.scrollable&&e,"intercom-positioner-mask-post":this.props.scrollable&&!e})},r.mergedStyles=function(){var e=this.props.scrollable,t=this.state,o=t.styles,r=t.positionerOffsetForMask;if(!o)return{};if(!e)return o;var n=r.left,i=r.top;return v({},o,{left:o.left+n,top:o.top+i})},r.getStyles=function(){var e=this.props.childDimensions||{},t=e.height,o=e.width;if(this.getTargetNode()){var r=!this.state.hide&&t&&o?1:0;return this.onSelectorMatch(),v({},this.mergedStyles(),{opacity:r})}if(this.props.renderFallback)return this.onMissingSelector(),{position:"fixed",top:"calc(50% - "+(t||0)/2+"px)",left:"calc(50% - "+(o||0)/2+"px)"}},r.getArrowStyles=function(){var e=this.state,t=e.arrowStyles,o=e.hide,r=this.props.childDimensions||{},n=r.height,i=r.width,a=!o&&n&&i?1:0;if(!t)return{opacity:a};var s=t.top;return""!==s&&(s+=5),{top:s,left:t.left,opacity:a}},r.getMaskStyles=function(){var e=this.getTargetNode();if(!e||!this.props.scrollable||this.state.hide)return{};var t=e.getBoundingClientRect(),o=t.top,r=t.left,n=t.width,i=t.height,a=this.props.appWindow;return{padding:3,top:o-3+a.pageYOffset,left:r-3+a.pageXOffset,width:n,height:i}},r.renderArrow=function(){var t=this;return a.default.createElement("div",{className:"intercom-positioner-arrow-wrapper",style:v({},this.getArrowStyles()),ref:function(e){return t.arrow=e}},a.default.createElement(d.default,{frameName:"intercom-positioner-arrow-frame",className:"intercom-positioner-arrow-frame"},function(){return a.default.createElement("div",{className:"intercom-positioner-arrow",style:{display:t.props.hideArrow?"none":"block"},ref:function(e){return t.arrowContainer=e}})}))},r.onMissingSelector=function(){this.props.onMissingSelector&&this.props.onMissingSelector()},r.onSelectorMatch=function(){this.props.onSelectorMatch&&this.props.onSelectorMatch()},r.render=function(){var t=this;return this.getTargetNode()||this.props.renderFallback?a.default.createElement(u.default,{appWindow:this.props.appWindow},a.default.createElement("span",null,a.default.createElement("div",{ref:function(e){return t.node=e},className:"intercom-positioner-wrapper",style:this.getStyles()},a.default.createElement("div",{className:"intercom-positioner-animation-wrapper"},this.getTargetNode()?this.renderArrow():null,this.targetIsVisible()||this.props.renderFallback?this.props.children:null)),a.default.createElement("div",{className:this.getMaskClassNames(),style:this.getMaskStyles()}),a.default.createElement("div",{onClick:t.handleOverlayClick,className:(0,c.default)({"intercom-positioner-overlay":this.props.scrollable}),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleOverlayClick(e)},role:"button",tabIndex:"0"}))):null},o}(a.Component);b(t.default=g,"defaultProps",{hideArrow:!1,renderFallback:!1})},1069:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};r.get||r.set?Object.defineProperty(t,o,r):t[o]=e[o]}return t.default=e,t}}(o(2)),a=(r=o(1070))&&r.__esModule?r:{default:r};function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var n=function(n){var e,t;function o(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return l(s(s(t=n.call.apply(n,[this].concat(o))||this)),"state",{height:0}),l(s(s(t)),"handleShow",function(e){t.setState({height:e}),t.props.onShow&&t.props.onShow(e)}),l(s(s(t)),"handleHide",function(){t.setState({height:0}),t.props.onHide&&t.props.onHide()}),t}t=n,(e=o).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=o.prototype;return r.getStyle=function(){var e=this.state.height;return{height:e,opacity:0===e?0:1,transition:0===e?"none":void 0}},r.render=function(){var e=this.props.conversation;return i.default.createElement("div",{className:"intercom-borderless-conversation-quick-replies",style:this.getStyle()},i.default.createElement(a.default,{conversation:e,isVisible:!0,isBorderless:!0,onShow:this.handleShow,onHide:this.handleHide}))},o}(i.PureComponent);t.default=n},1073:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedBorderlessConversation=t.default=t.PARTS_BODY_PADDING=void 0;var r=y(o(7)),d=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};r.get||r.set?Object.defineProperty(t,o,r):t[o]=e[o]}return t.default=e,t}}(o(2)),p=y(o(1074)),i=y(o(1069)),l=y(o(1185)),a=y(o(1198)),s=y(o(697)),c=y(o(15)),u=o(31),f=o(45),n=y(o(1083)),h=y(o(1045)),m=y(o(683)),v=o(684);function y(e){return e&&e.__esModule?e:{default:e}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}t.PARTS_BODY_PADDING=20;var w=function(n){var e,t;function o(){for(var r,e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return g(b(b(r=n.call.apply(n,[this].concat(t))||this)),"state",{isEmojiPickerOpen:!1,isGifPickerOpen:!1,isHeaderVisible:!1,headerHeight:50,partsHeight:0,quickRepliesHeight:0,composerHeight:0,replyToButtonHeight:0}),g(b(b(r)),"handlePartsHeightChange",function(e){r.setState({partsHeight:e},r.handleHeightChange)}),g(b(b(r)),"handleQuickRepliesShow",function(e){r.setState({quickRepliesHeight:e},r.handleHeightChange)}),g(b(b(r)),"handleQuickRepliesHide",function(){r.setState({quickRepliesHeight:0},r.handleHeightChange)}),g(b(b(r)),"handleComposerShow",function(e){r.setState({composerHeight:e},r.handleHeightChange)}),g(b(b(r)),"handleComposerHide",function(){r.setState({composerHeight:0},r.handleHeightChange)}),g(b(b(r)),"handleReplyToButtonShow",function(e){r.setState({replyToButtonHeight:e},r.handleHeightChange)}),g(b(b(r)),"handleClick",function(){var e=r.state,t=e.isEmojiPickerOpen,o=e.isGifPickerOpen;t?r.setState({isEmojiPickerOpen:!1}):o&&r.setState({isGifPickerOpen:!1})}),g(b(b(r)),"handleDismissClick",function(e){e.stopPropagation(),r.addCloseMetric(),r.props.onClose();var t=(0,v.launcherFirstFocusableElement)();t&&t.focus()}),g(b(b(r)),"handleEmojiPickerToggle",function(){var e=!r.state.isEmojiPickerOpen;r.setState({isEmojiPickerOpen:e}),r.props.onPopoverToggle(e)}),g(b(b(r)),"handleGifPickerToggle",function(){var e=!r.state.isGifPickerOpen;r.setState({isGifPickerOpen:e}),r.props.onPopoverToggle(e)}),g(b(b(r)),"handleMouseEnter",function(){r.setState({isHeaderVisible:!0})}),g(b(b(r)),"handleMouseLeave",function(){r.setState({isHeaderVisible:!1})}),g(b(b(r)),"handleViewMoreClick",function(){r.addViewMoreMetric(),r.props.onViewMore()}),g(b(b(r)),"handleHeightChange",function(){r.props.onHeightChange(r.getHeight())}),r}t=n,(e=o).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=o.prototype;return r.componentDidMount=function(){this.props.onOpen(),this.focusTrap=new m.default({document:this.props.frameWindow.document})},r.componentDidUpdate=function(e){var t=this.props.conversation;"all"===t.fetchState&&(0,f.getAdminPartCount)(t)>(0,f.getAdminPartCount)(e.conversation)&&this.addReplyMetric(t)},r.componentWillUnmount=function(){this.focusTrap&&this.focusTrap.restore()},r.getHeight=function(){var e=this.state;return e.headerHeight+e.partsHeight+e.composerHeight+e.quickRepliesHeight+e.replyToButtonHeight+20},r.getStyle=function(){return{height:this.getHeight()}},r.getHeaderClassName=function(){return(0,c.default)({"intercom-borderless-header":!0,"intercom-borderless-header-visible":this.state.isHeaderVisible})},r.getClassName=function(){return(0,c.default)({"intercom-borderless":!0,"intercom-borderless-left-aligned":"left"===this.props.alignment,"intercom-borderless-has-composer":this.hasComposer()})},r.hasComposer=function(){var e=this.props.conversation,t=e.parts,o=e.composerState;return"attribute_collector"===t[0].replyType||o.visible},r.shouldRenderHeader=function(){var e=this.state,t=e.isEmojiPickerOpen,o=e.isGifPickerOpen;return!(t||o)},r.addViewMoreMetric=function(){this.context.addMetric("clicked","viewmore_button","borderless","",{conversation_id:this.props.conversation.id})},r.addReplyMetric=function(){var e=this.props.conversation,t=(0,f.getLastAdminPart)(e);this.context.addMetric("received","reply","borderless","",{conversation_id:e.id,part_id:t.id,part_type:"adminReply",reply_type:t.replyType})},r.addCloseMetric=function(){this.context.addMetric("closed","borderless","borderless","from_close_button",{conversation_id:this.props.conversation.id})},r.renderHeader=function(){var t=this;return d.default.createElement("div",{className:this.getHeaderClassName()},d.default.createElement("div",{className:"intercom-borderless-button-wrapper"},this.props.hasHistory?this.renderViewMoreButton():null,d.default.createElement("div",{className:"intercom-borderless-dismiss-button",onClick:t.handleDismissClick,"aria-label":(0,u.translate)("dismiss"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleDismissClick(e)},role:"button",tabIndex:"0"},d.default.createElement("span",null))))},r.renderViewMoreButton=function(){var t=this;return d.default.createElement("div",{className:"intercom-borderless-view-more-button",onClick:t.handleViewMoreClick,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleViewMoreClick(e)},role:"button",tabIndex:"0"},d.default.createElement("span",null,(0,u.translate)("view_more")))},r.renderParts=function(){var e=this.props,t=e.appName,o=e.userRole,r=e.conversation,n=e.onArticleCardClick,i=e.onReactionSelect,a=e.onRetry,s=e.frameWindow,l=this.state,c=l.isEmojiPickerOpen,u=l.isGifPickerOpen;return d.default.createElement(p.default,{isBorderless:!0,isFaded:c||u,maxHeight:0,appName:t,userRole:o,conversation:r,frameWindow:s,onArticleCardClick:n,onHeightChange:this.handlePartsHeightChange,onReactionSelect:i,onRetry:a})},r.renderQuickReplies=function(){return d.default.createElement(i.default,{conversation:this.props.conversation,onShow:this.handleQuickRepliesShow,onHide:this.handleQuickRepliesHide})},r.renderFooter=function(){var e=this.state,t=e.isEmojiPickerOpen,o=e.isGifPickerOpen,r=this.props,n=r.showReplyToButton,i=r.onComposerClick,a=r.conversation,s=r.frameWindow;return n&&(0,f.isVisible)(this.props.conversation)?d.default.createElement(h.default,{onShow:this.handleReplyToButtonShow,onClick:i}):d.default.createElement(l.default,{conversation:a,showEmojiPicker:t,showGifPicker:o,onShow:this.handleComposerShow,onHide:this.handleComposerHide,onEmojiPickerToggle:this.handleEmojiPickerToggle,onGifPickerToggle:this.handleGifPickerToggle,frameWindow:s})},r.render=function(){var t=this,e=this.props,o=e.conversation,r=e.frameNode,n=this.state.composerHeight;return d.default.createElement("div",{className:this.getClassName(),style:this.getStyle(),onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,tabIndex:"-1",role:"region",ref:function(e){return t.borderlessNode=e}},this.shouldRenderHeader()?this.renderHeader():null,d.default.createElement("div",{className:"intercom-borderless-body"},d.default.createElement(a.default,{conversation:o,composerHeight:n,borderlessNode:this.borderlessNode,frameNode:r},function(){return d.default.createElement("div",{className:"intercom-borderless-conversation-body-inner"},t.renderParts(),t.renderQuickReplies())}),this.renderFooter()),d.default.createElement(s.default,{appWindow:this.props.frameWindow}))},o}(d.Component);(t.default=w).propTypes={conversation:r.default.shape({id:r.default.string.isRequired,fetchState:r.default.oneOf(["summary","partial","all"]),parts:r.default.arrayOf(r.default.shape({id:r.default.string,replyType:r.default.oneOf(["text","attribute_collector"])})).isRequired,composerState:r.default.shape({visible:r.default.bool.isRequired}).isRequired}),appName:r.default.string.isRequired,userRole:r.default.string.isRequired,hasHistory:r.default.bool,alignment:r.default.string,onOpen:r.default.func.isRequired,onHeightChange:r.default.func.isRequired,onPopoverToggle:r.default.func.isRequired,onArticleCardClick:r.default.func.isRequired,onReactionSelect:r.default.func.isRequired,onRetry:r.default.func.isRequired,onViewMore:r.default.func.isRequired,onClose:r.default.func.isRequired,onComposerClick:r.default.func.isRequired,frameWindow:r.default.any.isRequired,showReplyToButton:r.default.bool,part:r.default.object,frameNode:r.default.object.isRequired},w.contextTypes={addMetric:r.default.func};var C=(0,n.default)(w);t.IndexedBorderlessConversation=C},1084:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.activeStepIndex,o=e.stepCount,r=e.onContinue;return n.default.createElement("div",{className:"intercom-tour-step-footer"},n.default.createElement("div",{className:"intercom-tour-step-progress"},t+1," of ",o),n.default.createElement("div",{className:"intercom-tour-step-button"},n.default.createElement("button",{onClick:r,tabIndex:"0"},t+1===o?"Done":"Next")))};var r,n=(r=o(2))&&r.__esModule?r:{default:r}},1101:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(o(7)),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};r.get||r.set?Object.defineProperty(t,o,r):t[o]=e[o]}return t.default=e,t}}(o(2)),a=o(127),s=n(o(1055));function n(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t,o;function r(){return e.apply(this,arguments)||this}o=e,(t=r).prototype=Object.create(o.prototype),(t.prototype.constructor=t).__proto__=o;var n=r.prototype;return n.componentDidMount=function(){var e=this.props,t=e.isFetching,o=e.isFetched,r=e.onFetch;t||o||r()},n.render=function(){var e=this.props;return i.default.createElement(a.TransitionGroup,null,e.isFetched?i.default.createElement(a.CSSTransition,{classNames:"intercom-message",timeout:{enter:200,exit:200}},i.default.createElement(s.default,e)):null)},r}(i.Component);(t.default=l).propTypes={isFetching:r.default.bool.isRequired,isFetched:r.default.bool.isRequired,onFetch:r.default.func.isRequired}},1102:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(o(7)),n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};r.get||r.set?Object.defineProperty(t,o,r):t[o]=e[o]}return t.default=e,t}}(o(2)),i=s(o(1057)),a=s(o(15)),l=s(o(1043)),c=o(31),u=s(o(401)),d=s(o(1029)),p=s(o(1031));function s(e){return e&&e.__esModule?e:{default:e}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var h=o(24).isMobileBrowser,m=function(s){var e,t;function o(){for(var t,e,o,r,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i))||this,e=f(f(t)),r=function(e){e.stopPropagation(),t.props.onClose()},(o="handleDismissClick")in e?Object.defineProperty(e,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[o]=r,t}t=s,(e=o).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=o.prototype;return r.getDismissButtonClassName=function(){return(0,a.default)({"intercom-chat-dismiss-button-mobile":h(),"intercom-chat-dismiss-button":!h()})},r.renderComposer=function(){var e=this.props.part.author.firstName;return n.default.createElement("div",{className:"intercom-chat-composer"},n.default.createElement("span",{className:"intercom-composer-placeholder"},(0,c.translate)("reply_to_name",{name:e})),n.default.createElement("div",{className:"intercom-composer-buttons"},n.default.createElement("span",{className:"intercom-composer-emoji-button"},n.default.createElement(p.default,null)),n.default.createElement("span",{className:"intercom-composer-upload-button"},n.default.createElement(d.default,null))))},r.renderAttributeCollectorCard=function(){return n.default.createElement(l.default,{part:this.props.part,hasAvatar:!1,isBorderless:h(),isMobile:h(),isReplyType:!0,frameWindow:void 0,key:(0,u.default)(JSON.stringify(this.props.part))})},r.renderDismissButton=function(){var t=this;return n.default.createElement("div",{className:this.getDismissButtonClassName(),onClick:t.handleDismissClick,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleDismissClick(e)},role:"button",tabIndex:"0"},n.default.createElement("span",null,(0,c.translate)("clear")))},r.renderReplyType=function(){switch(this.props.part.replyType){case"attribute_collector":return this.renderAttributeCollectorCard();default:return this.renderComposer()}},r.renderChatCardGroup=function(){return n.default.createElement(i.default,{appName:this.props.appName,part:this.props.part,isBorderless:h(),isMobile:h()})},r.render=function(){var e=this.props,t=e.composerState,o=e.onComposerOrFormInputClick;return n.default.createElement("div",{className:"intercom-chat",onClick:o,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&o(e)},role:"button",tabIndex:"0"},this.renderChatCardGroup(),this.renderDismissButton(),t.visible&&this.renderReplyType())},o}(n.Component);(t.default=m).propTypes={part:r.default.shape({author:r.default.object.isRequired,body:r.default.array.isRequired}).isRequired,appName:r.default.string.isRequired,composerState:r.default.shape({visible:r.default.bool.isRequired}),onClose:r.default.func.isRequired,onComposerOrFormInputClick:r.default.func.isRequired}},1137:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var f=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};r.get||r.set?Object.defineProperty(t,o,r):t[o]=e[o]}return t.default=e,t}}(o(2)),h=r(o(422)),m=r(o(1138)),v=r(o(434)),y=r(o(697));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var n=function(n){var e,t;function o(){for(var o,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a(i(i(o=n.call.apply(n,[this].concat(t))||this)),"state",{height:0}),a(i(i(o)),"handleHeightChange",function(e){var t=e.height;o.setState({height:t})}),o}return t=n,(e=o).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,o.prototype.render=function(){var t=this,e=this.props,o=e.conversationId,r=e.appName,n=e.message,i=e.reactionsReply,a=e.showUploadButton,s=e.showGifButton,l=e.onComposerClick,c=e.onReactionSelect,u=e.showReplyToButton,d=e.onClose,p=this.state.height;return f.default.createElement(h.default,{style:{height:p},className:"intercom-note-frame",frameName:"intercom-note-frame"},function(e){return f.default.createElement("span",null,f.default.createElement(v.default,{id:"note-frame",key:"note-frame",onChange:t.handleHeightChange},f.default.createElement(m.default,{frameWindow:e,conversationId:o,appName:r,message:n,reactionsReply:i,showUploadButton:a,showGifButton:s,onClose:d,onComposerClick:l,onReactionSelect:c,showReplyToButton:u})),f.default.createElement(y.default,{appWindow:e}))})},o}(f.Component);t.default=n},1138:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(o(7)),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};r.get||r.set?Object.defineProperty(t,o,r):t[o]=e[o]}return t.default=e,t}}(o(2)),i=n(o(15)),d=n(o(1030)),p=n(o(1025)),f=n(o(817)),a=n(o(1034)),s=o(69),h=o(31),l=n(o(1029)),c=n(o(1031)),m=n(o(1065)),v=n(o(1045));function n(e){return e&&e.__esModule?e:{default:e}}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var w=function(n){var e,t;function o(){for(var r,e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return g(b(b(r=n.call.apply(n,[this].concat(t))||this)),"state",{isFooterVisible:!0,isScrolled:!1}),g(b(b(r)),"handleScroll",function(e){var t=r.state.isFooterVisible,o=(0,s.getScrollBottom)(e.target);r.setState({isFooterVisible:t||o<=r.getFooterHeight(),isScrolled:0<e.target.scrollTop})}),g(b(b(r)),"handleScrollable",function(e){var t=e.scrollHeight-e.clientHeight,o=r.state.isFooterVisible||void 0===r.props.reactionsReply||t<=r.getReactionsVisibilityThreshold();r.setState({isFooterVisible:o})}),g(b(b(r)),"getBodyClassName",function(){return(0,i.default)({"intercom-note-body":!0,"intercom-note-reply-to-body":r.props.showReplyToButton})}),g(b(b(r)),"addClickedComposerMetric",function(){var e=r.props,t=e.message.id,o=e.conversationId;r.context.addMetric("clicked","composer","in_app","from_full",{message_type:"note",message_id:t,conversation_id:o})}),g(b(b(r)),"handleComposerClick",function(){r.addClickedComposerMetric(),r.props.onComposerClick()}),r}t=n,(e=o).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=o.prototype;return r.getReactionsVisibilityThreshold=function(){return this.getFooterHeight()+20},r.getFooterHeight=function(){return this.footer?this.footer.clientHeight:0},r.getClassNames=function(){return(0,i.default)({"intercom-note":!0,"intercom-note-scrolled":this.state.isScrolled})},r.getFooterClassNames=function(){return(0,i.default)({"intercom-note-footer":!0,"intercom-note-footer-visible":this.state.isFooterVisible,"intercom-note-footer-text-center":this.props.showReplyToButton})},r.renderFooter=function(){var t=this,e=this.props,o=e.showUploadButton,r=e.showGifButton;return e.showReplyToButton?u.default.createElement(v.default,{onClick:this.handleComposerClick}):u.default.createElement("div",{className:"intercom-note-composer",onClick:t.handleComposerClick,"aria-label":(0,h.translate)("open_conversation_and_reply"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleComposerClick(e)},role:"button",tabIndex:"0"},u.default.createElement("span",{className:"intercom-composer-placeholder"},(0,h.translate)("reply_to_conversation")),u.default.createElement("div",{className:"intercom-composer-buttons"},r?u.default.createElement("span",{className:"intercom-composer-gif-button"},u.default.createElement(m.default,null)):null,u.default.createElement("span",{className:"intercom-composer-emoji-button"},u.default.createElement(c.default,null)),o?u.default.createElement("span",{className:"intercom-composer-upload-button"},u.default.createElement(l.default,null)):null))},r.renderReactionPicker=function(){var e=this.props,t=e.reactionsReply,o=e.onReactionSelect;return u.default.createElement(a.default,y({},t,{onReactionSelect:o}))},r.render=function(){var t=this,e=this.props,o=e.appName,r=e.message,n=e.reactionsReply,i=e.onClose,a=e.frameWindow,s=r.author,l=r.lastActiveAt,c=r.body;return u.default.createElement("div",{className:this.getClassNames()},u.default.createElement(f.default,{appName:o,isReplyStyle:!1,author:s,lastActiveAt:l},u.default.createElement("span",{className:"intercom-note-close intercom-anchor",onClick:i,"aria-label":(0,h.translate)("close"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&i(e)},role:"button",tabIndex:"0"}," "),u.default.createElement("div",{className:this.getBodyClassName()},u.default.createElement(d.default,{onScroll:this.handleScroll,onScrollable:this.handleScrollable},u.default.createElement(p.default,{blocks:c,zoomable:!0,frameWindow:a}))),u.default.createElement("div",{ref:function(e){return t.footer=e},className:this.getFooterClassNames()},n?this.renderReactionPicker():this.renderFooter())))},o}(u.Component);(t.default=w).propTypes={appName:r.default.string.isRequired,message:r.default.shape({author:r.default.object.isRequired,body:r.default.array.isRequired,lastActiveAt:r.default.instanceOf(Date)}).isRequired,conversationId:r.default.string,reactionsReply:r.default.shape({reactionIndex:r.default.number,reactionSet:r.default.array.isRequired}),onClose:r.default.func,onComposerClick:r.default.func,onReactionSelect:r.default.func,frameWindow:r.default.object,showUploadButton:r.default.bool,showGifButton:r.default.bool,showReplyToButton:r.default.bool},w.defaultProps={showUploadButton:!0,showGifButton:!0},w.contextTypes={addMetric:r.default.func.isRequired}},1140:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};r.get||r.set?Object.defineProperty(t,o,r):t[o]=e[o]}return t.default=e,t}}(o(2)),d=r(o(422)),p=r(o(1141)),f=r(o(434)),h=r(o(1067));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var n=function(n){var e,t;function o(){for(var r,e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return a(i(i(r=n.call.apply(n,[this].concat(t))||this)),"state",{width:0,height:0}),a(i(i(r)),"handleDimensionFrameSize",function(e){var t=e.height,o=e.width;r.setState({width:o,height:t})}),r}t=n,(e=o).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=o.prototype;return r.frameStyles=function(){var e=this.state;return{width:e.width,height:e.height}},r.render=function(){var e=this,t=this.props,o=t.appName,r=t.appWindow,n=t.message,i=t.conversationId,a=t.onClose,s=t.reactionsReply,l=t.onComposerClick,c=t.onReactionSelect;return u.default.createElement(h.default,{appWindow:r,targetSelector:n.pointerSelector,childDimensions:this.frameStyles()},u.default.createElement(d.default,{style:this.frameStyles(),frameName:"intercom-pointer-frame",className:"intercom-pointer-frame"},function(){return u.default.createElement(f.default,{id:"pointer-frame",key:"pointer-frame",onChange:e.handleDimensionFrameSize},u.default.createElement(p.default,{appName:o,message:n,conversationId:i,reactionsReply:s,frameWindow:r,onComposerClick:l,onReactionSelect:c,onClose:a}))}))},o}(u.PureComponent);t.default=n},1141:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(o(7)),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};r.get||r.set?Object.defineProperty(t,o,r):t[o]=e[o]}return t.default=e,t}}(o(2)),i=n(o(15)),d=n(o(1030)),p=n(o(1025)),f=n(o(817)),a=n(o(1034)),s=o(69),h=o(31),l=n(o(1142));function n(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var y=function(n){var e,t;function o(){for(var r,e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return v(m(m(r=n.call.apply(n,[this].concat(t))||this)),"node",void 0),v(m(m(r)),"state",{isFooterVisible:!0,isScrolled:!1}),v(m(m(r)),"footer",void 0),v(m(m(r)),"handleScroll",function(e){var t=r.state.isFooterVisible,o=(0,s.getScrollBottom)(e.target);r.setState({isFooterVisible:t||o<=r.getFooterHeight(),isScrolled:0<e.target.scrollTop})}),v(m(m(r)),"handleScrollable",function(e){var t=e.scrollHeight-e.clientHeight,o=r.state.isFooterVisible||void 0===r.props.reactionsReply||t<=r.getReactionsVisibilityThreshold();r.setState({isFooterVisible:o})}),v(m(m(r)),"getBodyClassName",function(){return(0,i.default)({"intercom-pointer-body":!0,"intercom-replies-disabled":r.isReplyDisabled()})}),v(m(m(r)),"isReplyDisabled",function(){return"disabled"===r.props.message.replyType}),v(m(m(r)),"addClickedComposerMetric",function(){var e=r.props,t=e.message.id,o=e.conversationId;r.context.addMetric("clicked","composer","in_app","from_full",{message_type:"pointer",message_id:t,conversation_id:o})}),v(m(m(r)),"handleComposerClick",function(){r.addClickedComposerMetric(),r.props.onComposerClick()}),r}t=n,(e=o).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=o.prototype;return r.getReactionsVisibilityThreshold=function(){return this.getFooterHeight()+20},r.getFooterHeight=function(){return this.footer?this.footer.clientHeight:0},r.getClassNames=function(){return(0,i.default)({"intercom-pointer":!0,"intercom-pointer-scrolled":this.state.isScrolled})},r.getFooterClassNames=function(){return(0,i.default)({"intercom-pointer-footer":!0,"intercom-pointer-footer-visible":this.state.isFooterVisible})},r.renderFooter=function(e){var t=this;return this.isReplyDisabled()?null:u.default.createElement("div",{ref:function(e){return t.footer=e},className:this.getFooterClassNames()},e?this.renderReactionPicker():this.renderChatComposer())},r.renderChatComposer=function(){var t=this;return u.default.createElement("div",{className:"intercom-pointer-composer",onClick:t.handleComposerClick,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleComposerClick(e)},role:"button",tabIndex:"0"},u.default.createElement("span",null,u.default.createElement(l.default,null)),u.default.createElement("span",{className:"intercom-composer-placeholder"},(0,h.translate)("start_a_conversation")))},r.renderReactionPicker=function(){var e=this.props,t=e.reactionsReply,o=e.onReactionSelect;return u.default.createElement(a.default,c({},t,{onReactionSelect:o}))},r.render=function(){var t=this,e=this.props,o=e.appName,r=e.message,n=e.reactionsReply,i=e.onClose,a=e.frameWindow,s=r.author,l=r.lastActiveAt,c=r.body;return u.default.createElement("div",{ref:function(e){return t.node=e},className:this.getClassNames()},u.default.createElement(f.default,{appName:o,isReplyStyle:!1,author:s,lastActiveAt:l},u.default.createElement("span",{className:"intercom-pointer-close",onClick:i,"aria-label":(0,h.translate)("close"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&i(e)},role:"button",tabIndex:"0"}," "),u.default.createElement("div",{className:this.getBodyClassName()},u.default.createElement(d.default,{onScroll:this.handleScroll,onScrollable:this.handleScrollable},u.default.createElement(p.default,{blocks:c,zoomable:!0,frameWindow:a}))),this.renderFooter(n)))},o}(u.Component);(t.default=y).contextTypes={addMetric:r.default.func.isRequired}},1142:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return n.default.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",className:"intercom-chat-bubble-icon"},n.default.createElement("path",{d:"M7.357 1.071c.34-.035.679-.071.982-.071 3 0 6.304 2.054 6.625 5.59.018.214.036.428.036.642 0 3.054-2.518 6.179-6.357 6.697A6.958 6.958 0 0 1 7.75 14c-.357 0-.357 0-.75-.071-.91 1.178-1.982 1.482-3.16 1.696a3.184 3.184 0 0 1-.536.054c-.304 0-.733-.143-.536-.34.928-.785 1.036-1.303 1.036-2.214 0-.09 0-.179-.018-.268-1.625-1.107-2.536-2.571-2.75-4.446A7.753 7.753 0 0 1 1 7.768C1 4.714 3.518 1.589 7.357 1.07z"}))};var r,n=(r=o(2))&&r.__esModule?r:{default:r}},1144:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=o(2),i=(r=o(70))&&r.__esModule?r:{default:r};function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var l=function(n){var e,t;function o(e){var t;s(a(a(t=n.call(this,e)||this)),"document",t.props.appWindow.document),s(a(a(t)),"container",void 0);var o=e.appWindow,r=o.document.body;return r?(t.container=o.document.createElement("div"),t.container.id="intercom-positioner-tree",t.container.classList.add("intercom-namespace"),t.container.style.cssText="position: initial; !important; z-index: 2147483647 !important;",r.insertBefore(t.container,r.firstChild),t):a(t)}t=n,(e=o).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=o.prototype;return r.componentWillUnmount=function(){var e=this.props.appWindow.document.body,t=this.container;e&&t&&e.removeChild(t)},r.render=function(){return i.default.createPortal(this.props.children,this.container)},o}(n.Component);t.default=l},1145:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveIntersectionWindowContext=t.default=void 0;t.default=function(m){if(!m.IntercomIntersectionObserver){var v=m.document;if("IntersectionObserver"in m&&"IntersectionObserverEntry"in m&&"intersectionRatio"in m.IntersectionObserverEntry.prototype&&"isIntersecting"in m.IntersectionObserverEntry.prototype)return m.IntercomIntersectionObserver=m.IntersectionObserver,m.IntercomIntersectionObserverEntry=m.IntersectionObserverEntry,!0;var t=[];e.prototype.THROTTLE_TIMEOUT=100,e.prototype.POLL_INTERVAL=null,e.prototype.USE_MUTATION_OBSERVER=!0,e.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},e.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},e.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},e.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},e.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,o){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==o[t-1]})},e.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},e.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(o(m,"resize",this._checkForIntersections,!0),o(v,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in m&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(v,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},e.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,r(m,"resize",this._checkForIntersections,!0),r(v,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},e.prototype._checkForIntersections=function(){var s=this._rootIsInDom(),l=s?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(e){var t=e.element,o=y(t),r=this._rootContainsTarget(t),n=e.entry,i=s&&r&&this._computeTargetAndRootIntersection(t,l),a=e.entry=new c({time:m.performance&&performance.now&&performance.now(),target:t,boundingClientRect:o,rootBounds:l,intersectionRect:i});n?s&&r?this._hasCrossedThreshold(n,a)&&this._queuedEntries.push(a):n&&n.isIntersecting&&this._queuedEntries.push(a):this._queuedEntries.push(a)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},e.prototype._computeTargetAndRootIntersection=function(e,t){if("none"!=m.getComputedStyle(e).display){for(var o,r,n,i,a,s,l,c,u=y(e),d=b(e),p=!1;!p;){var f=null,h=1==d.nodeType?m.getComputedStyle(d):{};if("none"==h.display)return;if(d==this.root||d==v?(p=!0,f=t):d!=v.body&&d!=v.documentElement&&"visible"!=h.overflow&&(f=y(d)),f&&(o=f,r=u,n=Math.max(o.top,r.top),i=Math.min(o.bottom,r.bottom),a=Math.max(o.left,r.left),s=Math.min(o.right,r.right),c=i-n,!(u=0<=(l=s-a)&&0<=c&&{top:n,bottom:i,left:a,right:s,width:l,height:c})))break;d=b(d)}return u}},e.prototype._getRootRect=function(){var e;if(this.root)e=y(this.root);else{var t=v.documentElement,o=v.body;e={top:0,left:0,right:t.clientWidth||o.clientWidth,width:t.clientWidth||o.clientWidth,bottom:t.clientHeight||o.clientHeight,height:t.clientHeight||o.clientHeight}}return this._expandRectByRootMargin(e)},e.prototype._expandRectByRootMargin=function(o){var e=this._rootMarginValues.map(function(e,t){return"px"==e.unit?e.value:e.value*(t%2?o.width:o.height)/100}),t={top:o.top-e[0],right:o.right+e[1],bottom:o.bottom+e[2],left:o.left-e[3]};return t.width=t.right-t.left,t.height=t.bottom-t.top,t},e.prototype._hasCrossedThreshold=function(e,t){var o=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(o!==r)for(var n=0;n<this.thresholds.length;n++){var i=this.thresholds[n];if(i==o||i==r||i<o!=i<r)return!0}},e.prototype._rootIsInDom=function(){return!this.root||n(v,this.root)},e.prototype._rootContainsTarget=function(e){return n(this.root||v,e)},e.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},e.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},m.IntercomIntersectionObserver=e,m.IntercomIntersectionObserverEntry=m.IntersectionObserverEntry}function c(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,o=t.width*t.height,r=this.intersectionRect,n=r.width*r.height;this.intersectionRatio=o?n/o:this.isIntersecting?1:0}function e(e,t){var o,r,n,i=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(i.root&&1!=i.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(o=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,n=null,function(){n||(n=setTimeout(function(){o(),n=null},r))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(i.rootMargin),this.thresholds=this._initThresholds(i.threshold),this.root=i.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function o(e,t,o,r){"function"==typeof e.addEventListener?e.addEventListener(t,o,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,o)}function r(e,t,o,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,o,r||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,o)}function y(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function n(e,t){for(var o=t;o;){if(o==e)return!0;o=b(o)}return!1}function b(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}};t.RemoveIntersectionWindowContext=function(e){e.IntercomIntersectionObserver&&(delete e.IntercomIntersectionObserver,delete e.IntercomIntersectionObserverEntry)}},1146:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeScrollIntoViewPolyfill=t.default=void 0;t.default=function(e){var l=e,c=e.document,t=l.HTMLElement||l.Element,a=800,u={scroll:l.scroll||l.scrollTo,scrollBy:l.scrollBy||l.intercomScrollBy,elementScroll:p,intercomScrollIntoView:t.prototype.intercomScrollIntoView},d=l.performance&&l.performance.now?l.performance.now.bind(l.performance):Date.now;var o,r=(o=l.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(o)?1:0);function p(e,t){this.scrollLeft=e,this.scrollTop=t}function n(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function i(e,t){return"Y"===t?e.clientHeight+r<e.scrollHeight:"X"===t?e.clientWidth+r<e.scrollWidth:void 0}function s(e,t){var o=l.getComputedStyle(e,null)["overflow"+t];return"auto"===o||"scroll"===o}function f(e){var t,o,r,n,i=(d()-e.startTime)/a;n=i=1<i?1:i,t=.5*(1-Math.cos(Math.PI*n)),o=e.startX+(e.x-e.startX)*t,r=e.startY+(e.y-e.startY)*t,e.method.call(e.scrollable,o,r),o===e.x&&r===e.y||l.requestAnimationFrame(f.bind(l,e))}function h(e,t,o){var r,n,i,a,s=d();a=e===c.body?(n=(r=l).scrollX||l.pageXOffset,i=l.scrollY||l.pageYOffset,u.scroll):(n=(r=e).scrollLeft,i=e.scrollTop,p),f({scrollable:r,method:a,startTime:s,startX:n,startY:i,x:t,y:o})}l.intercomScrollBy=function(){void 0!==arguments[0]&&(n(arguments[0])?u.scrollBy.call(l,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):h.call(l,c.body,~~arguments[0].left+(l.scrollX||l.pageXOffset),~~arguments[0].top+(l.scrollY||l.pageYOffset)))},t.prototype.intercomScrollIntoView=function(){if(!0!==n(arguments[0])){var e=function(e){for(var t,o,r;0==((e=e.parentNode)===c.body)&&!1===(o=i(t=e,"Y")&&s(t,"Y"),r=i(t,"X")&&s(t,"X"),o||r););return e}(this),t=e.getBoundingClientRect(),o=this.getBoundingClientRect();e!==c.body?(h.call(this,e,e.scrollLeft+o.left-t.left,e.scrollTop+o.top-t.top),"fixed"!==l.getComputedStyle(e).position&&l.intercomScrollBy({left:t.left,top:t.top,behavior:"smooth"})):l.intercomScrollBy({left:o.left,top:o.top,behavior:"smooth"})}else u.intercomScrollIntoView.call(this,void 0===arguments[0]||arguments[0])}};t.removeScrollIntoViewPolyfill=function(e){var t=e;(t.HTMLElement||t.Element).prototype.intercomScrollIntoView=null,t.intercomScrollBy&&delete t.intercomScrollBy}},1147:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrowFnModifier=void 0;var w=o(1148);t.arrowFnModifier=function(e,t){var o,r=t.element,n=e.placement.split("-")[0],i=e.offsets,a=i.popper,s=i.reference,l=-1!==["left","right"].indexOf(n),c=l?"height":"width",u=l?"Top":"Left",d=u.toLowerCase(),p=l?"left":"top",f=l?"bottom":"right",h=(0,w.getOuterSizes)(r)[c];s[f]-h<a[d]&&(e.offsets.popper[d]-=a[d]-(s[f]-h)),s[d]+h>a[f]&&(e.offsets.popper[d]+=s[d]+h-a[f]),e.offsets.popper=(0,w.getClientRect)(e.offsets.popper);var m=s[d]+s[c]/2-h/2,v=(0,w.getStyleComputedProperty)(e.instance.popper),y=parseFloat(v["margin"+u]),b=parseFloat(v["border"+u+"Width"]),g=m-e.offsets.popper[d]-y-b;return g=Math.max(Math.min(a[c]-h-18,g),0),e.arrowElement=r,e.offsets.arrow=((o={})[d]=Math.round(g),o[p]="",o),e}},1149:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};r.get||r.set?Object.defineProperty(t,o,r):t[o]=e[o]}return t.default=e,t}}(o(2)),s=o(127),l=r(o(1059)),i=r(o(1069)),c=r(o(15)),u=o(31),d=r(o(1029)),p=r(o(1031));function r(e){return e&&e.__esModule?e:{default:e}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var n=function(n){var e,t;function o(){for(var e,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return h(f(f(e=n.call.apply(n,[this].concat(o))||this)),"video",void 0),h(f(f(e)),"state",{isExpanded:!1,isVideoLoaded:!1}),h(f(f(e)),"handleOverlayClick",function(){e.state.isVideoLoaded&&e.setState({isExpanded:!0})}),h(f(f(e)),"handleVideoLoaded",function(){e.setState({isVideoLoaded:!0})}),e}t=n,(e=o).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=o.prototype;return r.getClassNames=function(){return(0,c.default)({"intercom-story-container":!0,"intercom-story-container-standalone":this.props.standalone,"intercom-story-container-expanded":this.state.isExpanded,"intercom-story-container-loaded":this.state.isVideoLoaded})},r.renderDismissButton=function(){var t=this;return this.props.standalone?a.default.createElement("div",{className:"intercom-story-dismiss-button",onClick:t.props.onClose,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.props.onClose(e)},role:"button",tabIndex:"0"},a.default.createElement("span",null)):null},r.renderOverlay=function(){var t=this;return this.state.isExpanded?null:a.default.createElement("div",{className:"intercom-story-overlay",onClick:t.handleOverlayClick,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleOverlayClick(e)},role:"button",tabIndex:"0"})},r.renderComposer=function(){var e=this.props,t=e.part,o=e.onComposerOrFormInputClick,r=t.author.firstName;return a.default.createElement(s.CSSTransition,{classNames:"intercom-video-composer",timeout:{enter:400,exit:400}},a.default.createElement("div",{className:"intercom-composer-story-wrapper"},a.default.createElement("div",{className:"intercom-chat-composer",onClick:o,"aria-label":(0,u.translate)("open_conversation_and_reply"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&o(e)},role:"button",tabIndex:"0"},a.default.createElement("span",{className:"intercom-composer-placeholder"},(0,u.translate)("reply_to_name",{name:r})),a.default.createElement("div",{className:"intercom-composer-buttons"},a.default.createElement("span",{className:"intercom-composer-emoji-button"},a.default.createElement(p.default,null)),a.default.createElement("span",{className:"intercom-composer-upload-button"},a.default.createElement(d.default,null))))))},r.renderQuickReplies=function(){var e=this.props.conversation;return e?a.default.createElement(i.default,{conversation:e,isVisible:!0}):null},r.renderResponseArea=function(){return this.state.isExpanded&&this.props.showResponseArea?(e=this.props.part)&&e.replyOptions&&0<e.replyOptions.length?this.renderQuickReplies():this.renderComposer():null;var e},r.render=function(){var e=this.props,t=e.part.body,o=e.autoPlay,r=t[0],n=r.url,i=r.captions;return a.default.createElement("div",{className:this.getClassNames()},this.renderDismissButton(),a.default.createElement("div",{className:"intercom-story"},this.renderOverlay(),a.default.createElement(l.default,{srcUrl:n,autoPlay:o,onVideoLoaded:this.handleVideoLoaded,captions:i})),a.default.createElement(s.TransitionGroup,null,this.renderResponseArea()))},o}(a.Component);h(t.default=n,"defaultProps",{standalone:!1,onClose:function(){},showResponseArea:!0,autoPlay:!1})},1154:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(o(7)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};r.get||r.set?Object.defineProperty(t,o,r):t[o]=e[o]}return t.default=e,t}}(o(2)),c=n(o(422)),u=n(o(1155)),i=n(o(15));function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var d=function(n){var e,t;function o(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return s(a(a(t=n.call.apply(n,[this].concat(o))||this)),"state",{height:0,isPopoverOpen:!1}),s(a(a(t)),"handleHeightChange",function(e){t.setState({height:e})}),s(a(a(t)),"handlePopoverToggle",function(e){t.setState({isPopoverOpen:e})}),t}t=n,(e=o).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=o.prototype;return r.getStyle=function(){return{height:this.state.height}},r.getClassName=function(){return(0,i.default)({"intercom-borderless-frame":!0,"intercom-borderless-frame-extended":this.state.isPopoverOpen})},r.render=function(){var o=this,e=this.props,r=e.conversation,n=e.part,i=e.onClose,a=e.onComposerClick,s=e.showReplyToButton;return l.default.createElement(c.default,{style:this.getStyle(),className:this.getClassName(),frameName:"intercom-borderless-frame"},function(e,t){return l.default.createElement(u.default,{conversation:r,part:n,frameWindow:e,onClose:i,onHeightChange:o.handleHeightChange,onPopoverToggle:o.handlePopoverToggle,onComposerClick:a,showReplyToButton:s,frameNode:t})})},o}(l.Component);(t.default=d).propTypes={conversation:r.default.object.isRequired,part:r.default.object.isRequired,onClose:r.default.func.isRequired,onComposerClick:r.default.func,showReplyToButton:r.default.bool}},1155:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mergeProps=t.mapDispatchToProps=t.mapStateToProps=void 0;var r=o(38),n=o(1073),u=o(702),i=o(53),a=o(168).openBorderlessConversationInMessenger,s=o(1046).openArticle,l=o(1201).openBorderlessConversation,c=o(167),d=c.createPart,p=c.createReaction,f=function(e,t){var o=e.app.name,r=e.user.role,n=t.part,i=t.conversation,a=(0,u.customizationSelector)(e).alignment,s=i.parts.filter(function(e){return e.createdAt>=n.createdAt}),l=s[0].messageType;l=l||"adminReply",s[0]=Object.assign({},s[0],{messageType:l});var c=s.length<i.parts.length;return{appName:o,userRole:r,conversation:Object.assign({},i,{parts:s}),hasHistory:c,alignment:a}};t.mapStateToProps=f;var h=function(o){return{onOpen:function(e){o(l(e))},onRetry:function(e,t){o(d(i,e,t,!0))},onReactionSelect:function(e,t){o(p(i,e,t,!1))},onArticleCardClick:function(e,t){o(s(i,e,t))},onViewMore:function(e,t){o(a(e,"viewmore_borderless",t))}}};t.mapDispatchToProps=h;var m=function(e,t,o){var r=e.conversation,n=r.id,i=r.lastParticipatingAdmin,a={onOpen:function(){t.onOpen(n)},onReactionSelect:function(e){t.onReactionSelect(n,e)},onRetry:function(e){t.onRetry(n,e)},onViewMore:function(){t.onViewMore(n,i)},conversation:r};return Object.assign({},e,t,o,a)};t.mergeProps=m;var v=(0,r.connect)(f,h,m)(n.IndexedBorderlessConversation);t.default=v},1185:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};r.get||r.set?Object.defineProperty(t,o,r):t[o]=e[o]}return t.default=e,t}}(o(2)),a=(r=o(1077))&&r.__esModule?r:{default:r},s=o(45);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var n=function(n){var e,t;function o(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return u(c(c(t=n.call.apply(n,[this].concat(o))||this)),"ref",void 0),u(c(c(t)),"setRef",function(e){t.ref=e}),t}t=n,(e=o).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=o.prototype;return r.componentDidMount=function(){(0,s.isVisible)(this.props.conversation)&&this.handleShow()},r.componentDidUpdate=function(e){!(0,s.isVisible)(e.conversation)&&(0,s.isVisible)(this.props.conversation)?this.handleShow():(0,s.isVisible)(e.conversation)&&!(0,s.isVisible)(this.props.conversation)&&this.handleHide()},r.handleShow=function(){this.props.onShow(this.getHeight())},r.handleHide=function(){this.props.onHide()},r.getHeight=function(){return this.ref?this.ref.clientHeight:0},r.render=function(){return(0,s.isVisible)(this.props.conversation)?i.default.createElement("div",{ref:this.setRef,className:"intercom-borderless-conversation-composer"},i.default.createElement(a.default,l({isBorderless:!0},this.props))):null},o}(i.PureComponent);t.default=n},1198:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};r.get||r.set?Object.defineProperty(t,o,r):t[o]=e[o]}return t.default=e,t}}(o(2)),a=(r=o(15))&&r.__esModule?r:{default:r},c=o(69),l=o(1073),u=o(1076),s=o(1199);function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var n=function(n){var e,t;function o(){for(var e,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return p(d(d(e=n.call.apply(n,[this].concat(o))||this)),"isPartBeingAddedTimeout",void 0),p(d(d(e)),"borderlessBodyNode",void 0),p(d(d(e)),"visibleScrollbarsInOs",0!==(0,s.getScrollbarWidth)()),p(d(d(e)),"state",{isPartBeingAdded:!1,bottomScrollOffset:0,frameOffsetTop:e.props.frameNode.offsetTop,adminWasTyping:!1}),p(d(d(e)),"recalculateOffsets",function(){e.setState({frameOffsetTop:e.props.frameNode.offsetTop},function(){return(0,c.scrollToBottom)(e.borderlessBodyNode)})}),p(d(d(e)),"handleScroll",function(){e.state.isPartBeingAdded||e.setState({bottomScrollOffset:(0,c.bottomScrollOffset)(e.borderlessBodyNode)})}),e}t=n,(e=o).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=o.prototype;return r.componentDidMount=function(){(0,c.addEventListener)(window.parent,"resize",this.recalculateOffsets)},r.componentDidUpdate=function(e){var t=this,o=this.state.frameOffsetTop,r=this.props,n=r.conversation,i=r.frameNode,a=e.conversation,s=n.parts.length!==a.parts.length,l=(0,u.shouldShowAdminIsTyping)(n);(s||l&&!this.state.adminWasTyping)&&((0,c.scrollToBottom)(this.borderlessBodyNode),this.setState({isPartBeingAdded:!0,bottomScrollOffset:0}),clearTimeout(this.isPartBeingAddedTimeout),this.isPartBeingAddedTimeout=setTimeout(function(){t.setState({isPartBeingAdded:!1}),(0,c.scrollToBottom)(t.borderlessBodyNode)},300)),i.offsetTop!==o&&this.setState({frameOffsetTop:i.offsetTop},function(){t.setState({bottomScrollOffset:(0,c.bottomScrollOffset)(t.borderlessBodyNode)})}),l!==this.state.adminWasTyping&&this.setState({adminWasTyping:l})},r.componentWillUnmount=function(){clearTimeout(this.isPartBeingAddedTimeout),(0,c.removeEventListener)(window.parent,"resize",this.recalculateOffsets)},r.getStyle=function(){var e=this.props,t=e.borderlessNode,o=e.composerHeight,r=t&&t.clientHeight,n=this.state.frameOffsetTop;if(r&&!n){var i=r/100,a=100-10/i,s="linear-gradient(to bottom, rgb(0, 0, 0), rgb(0, 0, 0) "+(100-76/i)+"%, rgba(0, 0, 0, "+Math.max(1-this.state.bottomScrollOffset/100*5,0)+") "+a+"%)";return{maxHeight:r-o-l.PARTS_BODY_PADDING+"px",WebkitMaskImage:s,MaskImage:s}}},r.getClassName=function(){return(0,a.default)({"intercom-borderless-conversation-body":!0,"intercom-borderless-conversation-body-enable-scroll":0===this.state.frameOffsetTop,"intercom-borderless-conversation-body-visible-scrollbars":this.visibleScrollbarsInOs})},r.render=function(){var t=this;return i.default.createElement("div",{className:this.getClassName(),style:this.getStyle(),ref:function(e){return t.borderlessBodyNode=e},onScroll:this.handleScroll},this.props.children())},o}(i.Component);t.default=n},1199:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getScrollbarWidth=function(){var e=window.parent.document,t=e.createElement("div");t.style.visibility="hidden",t.style.width="100px",t.style.msOverflowStyle="scrollbar",e.body.appendChild(t);var o=t.offsetWidth;t.style.overflow="scroll";var r=e.createElement("div");r.style.width="100%",t.appendChild(r);var n=r.offsetWidth;return t.parentNode.removeChild(t),o-n}},1201:function(e,t,o){"use strict";e.exports={openBorderlessConversation:function(e){return{type:"OPEN_BORDERLESS_CONVERSATION",conversationId:e}}}},1202:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.closeMessage=t.openMessage=void 0;t.openMessage=function(e,t){return{type:"OPEN_POINTER_MESSAGE",conversationId:e,partId:t}};t.closeMessage=function(){return{type:"CLOSE_POINTER_MESSAGE"}}},1203:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(o(7)),p=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};r.get||r.set?Object.defineProperty(t,o,r):t[o]=e[o]}return t.default=e,t}}(o(2)),f=n(o(422)),h=n(o(1204)),m=n(o(434)),v=n(o(1067)),y=n(o(15)),b=o(682);function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var i=function(r){var e,t;function o(){for(var i,e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return s(a(a(i=r.call.apply(r,[this].concat(t))||this)),"state",{width:0,height:0,placement:null}),s(a(a(i)),"handleDimensionFrameSize",function(e){var t=e.height,o=e.width;i.setState({width:o,height:t})}),s(a(a(i)),"trackingKey",function(e){return i.props.isPreviewingTour?e+"_preview":e}),s(a(a(i)),"handleOnTourContinue",function(){var e=i.props,t=e.onContinue,o=e.activeStepIndex,r=e.stepCount;i.setState({width:0,height:0}),t();var n=o+1===r?"done":"next";i.context.addMetric("clicked",n,i.trackingKey("tour"),null,i.trackingMetadata())}),s(a(a(i)),"handleOnTourStop",function(){var e=i.props.onStop;i.context.addMetric("clicked","stop",i.trackingKey("tour"),null,i.trackingMetadata()),e()}),s(a(a(i)),"handleMissingCssSelector",function(){i.props.activeStep.selector&&i.context.addMetric("css_selector_match_failed",i.trackingKey("tour_step"),"positioner",null,i.trackingMetadata())}),s(a(a(i)),"handleSelectorMatch",function(){i.context.addMetric("css_selector_match_success",i.trackingKey("tour_step"),"positioner",null,i.trackingMetadata())}),s(a(a(i)),"handleTourStepLoad",function(){i.context.addMetric("viewed",i.trackingKey("tour_step"),"tour",null,i.trackingMetadata())}),s(a(a(i)),"handleOverlayClick",function(){i.context.addMetric("clicked",i.trackingKey("outside_tour_step"),"tour",null,i.trackingMetadata())}),s(a(a(i)),"handlePlacementChange",function(e){i.setState({placement:e})}),i}t=r,(e=o).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=o.prototype;return n.getFrameDimensions=function(){var e=this.state;return{width:e.width,height:e.height}},n.trackingMetadata=function(){var e=this.props,t=e.activeTourId,o=e.activeStep,r=e.activeStepIndex,n=e.stepCount;return{tour_id:t,tour_step_id:o.id,active_step_index:r,step_count:n}},n.render=function(){var e=this,t=this.props,o=t.appWindow,r=t.appName,n=t.author,i=t.activeStep,a=t.stepCount,s=t.activeStepIndex,l=this.state.placement,c=!!i.selector,u=(0,b.isSingleVideoFileBlock)(i.blocks),d=(0,y.default)("intercom-tour-frame",{"intercom-tour-frame-video":u});return p.default.createElement(v.default,{appWindow:o,scrollable:!0,targetSelector:i.selector,childDimensions:this.getFrameDimensions(),renderFallback:!0,key:"tour-step-"+i.id,onMissingSelector:this.handleMissingCssSelector,onSelectorMatch:this.handleSelectorMatch,onOverlayClick:this.handleOverlayClick,onPlacementChange:this.handlePlacementChange,hideArrow:u&&"top"!==l},p.default.createElement(f.default,{style:this.getFrameDimensions(),frameName:"intercom-tour-frame",className:d},function(){return p.default.createElement(m.default,{id:"tour-frame",key:"tour-frame",onChange:e.handleDimensionFrameSize},p.default.createElement(h.default,{appWindow:o,appName:r,author:n,step:i,activeStepIndex:s,stepCount:a,hasSelector:c,onLoad:e.handleTourStepLoad,onContinue:e.handleOnTourContinue,onStop:e.handleOnTourStop,placement:l}))}))},o}(p.PureComponent);(t.default=i).contextTypes={addMetric:r.default.func}},1204:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};r.get||r.set?Object.defineProperty(t,o,r):t[o]=e[o]}return t.default=e,t}}(o(2)),i=r(o(15)),c=r(o(1025)),u=r(o(1030)),d=o(31),p=r(o(817)),f=r(o(819)),h=r(o(1084)),a=o(682),s=r(o(1205));function r(e){return e&&e.__esModule?e:{default:e}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var n=function(n){var e,t;function o(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return v(m(m(t=n.call.apply(n,[this].concat(o))||this)),"node",void 0),v(m(m(t)),"state",{isScrolled:!1}),v(m(m(t)),"handleScroll",function(e){t.setState({isScrolled:0<e.target.scrollTop})}),t}t=n,(e=o).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=o.prototype;return r.getClassNames=function(){return(0,i.default)({"intercom-tour-step":!0,"intercom-tour-step-pointer":this.props.hasSelector,"intercom-tour-step-post":!this.props.hasSelector,"intercom-pointer-scrolled":this.state.isScrolled})},r.calculateWidth=function(){var e=this.props.appWindow.innerWidth;return Math.min(880,e)-80},r.getStyles=function(){if(!this.props.hasSelector)return{width:this.calculateWidth()+"px"}},r.componentDidMount=function(){this.props.onLoad&&this.props.onLoad()},r.renderVideoTourStep=function(){var e=this.props,t=e.onContinue,o=e.activeStepIndex,r=e.stepCount,n=e.placement,i=e.step.blocks;return n?l.default.createElement(s.default,{block:i[0],placement:n,activeStepIndex:o,stepCount:r,onContinue:t}):null},r.renderTourStep=function(){var e=this.props,t=e.onContinue,o=e.onStop,r=e.activeStepIndex,n=e.stepCount,i=e.author,a=e.appName,s=e.step.blocks;return l.default.createElement(p.default,{appName:a,isReplyStyle:!1,author:i},l.default.createElement("div",{className:"intercom-tour-step-header"},l.default.createElement("span",{className:"intercom-tour-close",onClick:o,"aria-label":(0,d.translate)("close"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&o(e)},role:"button",tabIndex:"0"},l.default.createElement(f.default,null))),l.default.createElement("div",{className:"intercom-tour-step-content"},l.default.createElement(u.default,{onScroll:this.handleScroll},l.default.createElement(c.default,{blocks:s}))),l.default.createElement(h.default,{activeStepIndex:r,stepCount:n,onContinue:t}))},r.render=function(){var t=this,e=this.props.step.blocks;return l.default.createElement("div",{ref:function(e){return t.node=e},className:this.getClassNames(),style:this.getStyles()},(0,a.isSingleVideoFileBlock)(e)?this.renderVideoTourStep():this.renderTourStep())},o}(l.PureComponent);t.default=n},1205:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=o(38),i=(r=o(1206))&&r.__esModule?r:{default:r},a=o(686),s=o(758);var l=(0,o(32).createSelector)(s.videoAudioMutedSelector,s.userHasInteractedWithVideoSelector,function(e,t){return{muted:e,userHasInteractedWithVideo:t}}),c=(0,n.connect)(l,{changeVideoMuted:a.changeVideoMuted})(i.default);t.default=c},1206:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.block,o=t.url,r=t.captions,n=e.placement,i=e.activeStepIndex,a=e.stepCount,s=e.onContinue,l=e.muted,c=e.changeVideoMuted,u=e.userHasInteractedWithVideo,d=(0,b.useState)(!0),p=d[0],f=d[1],h=(0,b.useState)(),m=h[0],v=h[1],y=(0,C.default)("intercom-tour-step-video","intercom-tour-step-video-placement-"+n,{"intercom-tour-step-video-complete":!p});return b.default.createElement("div",{className:y},b.default.createElement("div",{className:"intercom-tour-step-video-mask"},b.default.createElement("div",{className:"intercom-tour-step-video-inner"},b.default.createElement(w.default,{srcUrl:o,captions:l?r:void 0,showControls:!1,onComplete:function(){f(!1),i+1<a&&s()},onReplay:function(){return f(!0)},muted:l,startTime:m,loop:!u}),b.default.createElement("div",{className:"intercom-tour-step-video-overlay"},p&&b.default.createElement(O,{muted:l,onClick:function(){l&&v(0);c(!l)}}),b.default.createElement(g.default,{activeStepIndex:i,stepCount:a,onContinue:s})))))};var b=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};r.get||r.set?Object.defineProperty(t,o,r):t[o]=e[o]}return t.default=e,t}}(o(2)),g=r(o(1084)),w=r(o(1058)),C=r(o(15));function r(e){return e&&e.__esModule?e:{default:e}}function O(e){var t=e.muted,o=e.onClick,r="intercom-video-control-audio-"+(t?"muted":"unmuted");return b.default.createElement("div",{className:r,onClick:o,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&o(e)},role:"button",tabIndex:"0"})}}}]);