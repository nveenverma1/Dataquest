(window.webpackJsonp=window.webpackJsonp||[]).push([[10,14],{1112:function(e,t,n){e.exports={header:"BadgeToast__header",shield:"BadgeToast__shield",root:"BadgeToast__root",enter:"BadgeToast__enter",enterActive:"BadgeToast__enterActive",exit:"BadgeToast__exit",exitActive:"BadgeToast__exitActive",badge:"BadgeToast__badge",next_suggestion:"BadgeToast__next_suggestion",ack_button:"BadgeToast__ack_button",left:"BadgeToast__left",right:"BadgeToast__right"}},1496:function(e,t,n){"use strict";n.r(t),n.d(t,"selectors",function(){return y}),n.d(t,"actions",function(){return w}),n.d(t,"BadgeToast",function(){return j});var a=n(0),r=n.n(a),s=n(1),o=n.n(s),i=n(15),d=n(5),c=n(486),_=n(13),u=n(1112),l=n.n(u),p=n(487),g=n(19),f=n(407),b=n(16),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y={last_earned:f.selectors.last_earned,next_suggestion:f.selectors.next_suggestion,is_logged_in:b.b.is_logged_in},w=f.actions,k=Object(d.createStructuredSelector)(y),j=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return n=a=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={next_suggestion:"",showable:!1},a.stop_click=function(e){e.stopPropagation()},h(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.PureComponent),v(t,[{key:"componentDidMount",value:function(){this.conditionally_load(this.props,{})}},{key:"componentDidUpdate",value:function(e){var t=this;this.conditionally_load(this.props,e),this.props.last_earned.title&&!this.state.showable&&null==this._timer&&(this._timer=window.setTimeout(function(){t.setState({showable:!0}),t._timer=null},3e3))}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this._timer)}},{key:"conditionally_load",value:function(e,t){!t.is_logged_in&&e.is_logged_in&&e.load_badges()}},{key:"render_next_suggestion",value:function(){return null==this.props.next_suggestion?null:r.a.createElement("div",{className:"BadgeToast__next_suggestion"},"Earn your  ",r.a.createElement(_.a,{onClick:this.props.ack_just_earned,to:"/reward-badges"},"next badge")," by ",this.state.next_description)}},{key:"render_badge",value:function(e){return this.state.showable?r.a.createElement(c.CSSTransition,m({},e,{classNames:l.a,timeout:1e3,key:"badge"}),r.a.createElement("div",{className:"BadgeToast__shield",onClick:this.props.ack_just_earned},r.a.createElement("div",{className:"BadgeToast__root",onClick:this.stop_click},r.a.createElement("div",{className:"BadgeToast__header"},"You just earned a badge!"),r.a.createElement("div",{className:"BadgeToast__badge"},r.a.createElement("img",{className:"BadgeToast__left",src:n(684)}),r.a.createElement(p.a,m({},this.props.last_earned,{show_back_after_delay:!0})),r.a.createElement("img",{className:"BadgeToast__right",src:n(684)})),this.render_next_suggestion(),r.a.createElement(g.a,{className:"BadgeToast__ack_button",text:"Awesome!",color:"white",hollow:!0,onClick:this.props.ack_just_earned})))):null}},{key:"render",value:function(){return r.a.createElement(c.TransitionGroup,null,this.render_badge())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.next_suggestion,a=t.showable&&Boolean(e.last_earned.title);if(null==n)return{next_description:"",showable:a};var r=n.state.count,s=n.levels[0];return{next_description:n.description.replace("$N",s-r+" more"),showable:a}}}]),t}();j.propTypes={is_logged_in:o.a.bool.isRequired,load_badges:o.a.func.isRequired,last_earned:o.a.shape({title:o.a.string}).isRequired,next_suggestion:o.a.shape({title:o.a.string.isRequired,description:o.a.string.isRequired,levels:o.a.arrayOf(o.a.number).isRequired,date_earned:o.a.string,state:o.a.shape({count:o.a.number.isRequired}).isRequired}),ack_just_earned:o.a.func.isRequired},j.defaultProps={last_earned:{}},j.displayName="BadgeToast",t.default=Object(i.b)(k,w)(j)},402:function(e,t,n){var a={"./ar":341,"./ar.js":341,"./be":340,"./be.js":340,"./bg":339,"./bg.js":339,"./ca":338,"./ca.js":338,"./da":337,"./da.js":337,"./de":336,"./de.js":336,"./el":335,"./el.js":335,"./en":334,"./en.js":334,"./en_short":333,"./en_short.js":333,"./es":332,"./es.js":332,"./eu":331,"./eu.js":331,"./fa":330,"./fa.js":330,"./fi":329,"./fi.js":329,"./fr":328,"./fr.js":328,"./he":327,"./he.js":327,"./hu":326,"./hu.js":326,"./in_BG":325,"./in_BG.js":325,"./in_HI":324,"./in_HI.js":324,"./in_ID":323,"./in_ID.js":323,"./it":322,"./it.js":322,"./ja":321,"./ja.js":321,"./ko":320,"./ko.js":320,"./locales":319,"./locales.js":319,"./ml":318,"./ml.js":318,"./my":317,"./my.js":317,"./nb_NO":316,"./nb_NO.js":316,"./nl":315,"./nl.js":315,"./nn_NO":314,"./nn_NO.js":314,"./pl":313,"./pl.js":313,"./pt_BR":312,"./pt_BR.js":312,"./ro":311,"./ro.js":311,"./ru":310,"./ru.js":310,"./sv":309,"./sv.js":309,"./ta":308,"./ta.js":308,"./th":307,"./th.js":307,"./tr":306,"./tr.js":306,"./uk":305,"./uk.js":305,"./vi":304,"./vi.js":304,"./zh_CN":303,"./zh_CN.js":303,"./zh_TW":302,"./zh_TW.js":302};function r(e){var t=s(e);return n(t)}function s(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(a)},r.resolve=s,e.exports=r,r.id=402},405:function(e){e.exports={next_suggestion:["complete_mission_steps","complete_missions","view_hints","upvote_qa","progress_days","progress_weeks"],badges:{complete_mission_steps:{title:"Screen Master",description:"completing $N code screens.",levels:[1,50,200]},complete_missions:{title:"Mission Master",description:"completing $N missions.",levels:[1,10,100]},view_hints:{title:"Hint Finder",description:"viewing $N hints.",levels:[1,10,100]},progress_days:{title:"Daily Streak",description:"earning progress $N days in a row.",levels:[2,5,30]},progress_weeks:{title:"Weekly Streak",description:"earning progress $N weeks in a row",levels:[2,5,30]},problem_solver:{title:"Determined Coder",description:"completing $N code screens after three attempts.",levels:[1,10,50]},no_peaking:{title:"Independent Learner",description:"completing $N code screens without first looking at the answer.",levels:[1,10,100]},answer_qa:{title:"Community Educator",description:"answering $N Q&A questions.",levels:[1,3,20]},upvote_qa:{title:"Community Contributor",description:"upvoting $N Q&A answers.",levels:[1,5,30]},mission_referece:{title:"Troubleshooter",description:"searching with mission reference $N times.",levels:[1,3,20]},profile:{title:"Creative Customizer",description:"completing profile page.",levels:[1]}}}},407:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"save_badge",function(){return S}),n.d(a,"load_badges",function(){return C});var r=n(8),s=n.n(r),o=n(5),i=n(6),d=n(2),c=n.n(d),_=n(405),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={badges_by_id:c.a.mapValues(_.badges,function(e){return u({},e,{date_earned:null,state:{count:0}})}),next_order:_.next_suggestion,last_earned_id:""},g="reward_badges",f=Object(i.make_simple_selectors)(p,g),b=Object(o.createSelector)(f.last_earned_id,f.badges_by_id,function(e,t){return c.a.defaultTo(t[e],{})}),m=Object(o.createSelector)(f.badges_by_id,function(e){return c.a.map(e,function(e,t){return u({},e,{key:t})})}),v=Object(o.createSelector)(f.next_order,f.badges_by_id,function(e,t){return e.reduce(function(e,n){return e||(c.a.get(t,[n,"date_earned"])?null:t[n])},null)}),h=u({},f,{last_earned:b,next_suggestion:v,badges:m}),y={reset:function(){return s()(p)},ack_just_earned:function(e){return e.merge({last_earned_id:""})}};function w(e){var t=e.levels,n=e.new_count,a=e.old_count;return n!==a&&void 0!==c.a.find(t,function(e){return e===n})}var k={set_badges:function(e,t){var n=t.payload;return c.a.forEach(n,function(t){e=e.merge({badges_by_id:u({},e.badges_by_id,l({},t.badge_id,u({},e.badges_by_id[t.badge_id],{state:JSON.parse(t.state),date_earned:c.a.defaultTo(t.date_earned,"")})))})}),e},update_badge:function(e,t){var n=t.payload,a=e.badges_by_id[n.badge_id],r=w({levels:a.levels,new_count:n.state.count,old_count:a.state.count});return e.merge({badges_by_id:l({},n.badge_id,{earned:c.a.defaultTo(n.earned,a.earned),state:n.state,date_earned:c.a.defaultTo(n.date_earned,a.date_earned)}),last_earned_id:r?n.badge_id:e.last_earned_id},{deep:!0})}},j=Object(i.make_reducer_n_actions)({public_handlers:y,private_handlers:k,action_types_prefix:"reward_badges/",initial_state:p,Immutable:s.a}),B=j.reducer,O=j.private_actions,N=j.actions,E=j.ACTION_TYPES,T=B,x=n(4),S=function(e){return function(t,n){var a='mutation {\n    store_badge(\n      badge_id: "'+e.badge_id+'"\n      '+(e.date_earned?'date_earned: "'+e.date_earned+'"':"")+'\n      state: "'+Object(x.d)(JSON.stringify(e.state))+'"\n    ) {\n      badge {badge_id}\n    }\n  }';return t(O.update_badge(e)),Object(x.c)(a)}},C=function(){return function(e,t){return Object(x.c)("{\n  rewards {\n    badges {\n      badge_id\n      state\n      date_earned\n    }\n  }\n}").then(function(t){e(O.set_badges(t.data.rewards.badges))})}},q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},P=function(e){return function(t){return Math.floor(new Date(t).valueOf()/e)}},D=P(864e5),R=P(6048e5),A=function(e,t){return w({levels:t.levels,new_count:e.state.count,old_count:t.state.count})&&(e.date_earned=(new Date).toISOString()),G.save_badge(e)},$=function(e){return function(t){var n=t.dispatch,a=t.getState,r=h.badges_by_id(a())[e];n(A({badge_id:e,state:{count:r.state.count+1}},r))}},I=function(e,t){return function(n){var a=n.dispatch,r=n.getState,s=(n.payload,h.badges_by_id(r())[e]),o=s.state,i=Date.now();if(0===o.count)o={count:1,last_update:i};else{var d=t(i)-t(o.last_update);if(o.current_streak>0)o=function(e,t){var n=Date.now();if(e<1)return t;if(1===e){var a=t.current_streak+1;t=a>=t.count?{count:a,last_update:n}:q({},t,{current_streak:a,last_update:n})}else t={count:t.count,current_streak:1,last_update:n};return t}(d,o);else{if(d<1)return;o=1===d?{count:o.count+1,last_update:i}:{count:o.count,current_streak:1,last_update:i}}}a(A({badge_id:e,state:o},s))}},M={"progress/complete_mission_step":[I("progress_days",D),I("progress_weeks",R),function(e){var t=e.dispatch,n=e.getState;e.payload.all_completed&&$("complete_missions")({dispatch:t,getState:n})},function(e){var t=e.dispatch,n=e.getState;"text"!==e.payload.type&&$("complete_mission_steps")({dispatch:t,getState:n})},function(e){var t=e.dispatch,n=e.getState,a=e.payload;if("text"!==a.type){var r=h.badges_by_id(n()).no_peaking.state;null!=r.saw_on_screen_id&&r.saw_on_screen_id===a.screen_id||$("no_peaking")({dispatch:t,getState:n})}}],"steps_info/set_show_answer":function(e){var t=e.dispatch,n=e.getState;if(!1!==e.payload){var a=h.badges_by_id(n()).no_peaking,r=a.state;r=q({},r,{saw_on_screen_id:function(e){return e().steps_info.steps_info[e().steps_info.current].id}(n)}),t(A({badge_id:"no_peaking",state:r},a))}},"steps_info/checking_results":function(e){var t=e.dispatch,n=e.getState,a=e.payload,r=h.badges_by_id(n()).problem_solver,s=r.state;!1===a.output.check&&(s=a.screen!==s.screen_id?q({},s,{wrong_count:1,screen_id:a.screen}):q({},s,{wrong_count:s.wrong_count+1})),!0===a.output.check&&(s=s.wrong_count<3?{count:s.count}:a.screen!==s.screen_id?{count:s.count}:{count:s.count+1}),t(A({badge_id:"problem_solver",state:s},r))},"steps_info/set_show_help":function(e){!1!==e.payload&&$("view_hints")(e)},"q_a_info/answered_question":$("answer_qa"),"q_a_info/set_vote":function(e){!1!==e.payload&&$("upvote_qa")(e)},"mission_reference_info/set_results":$("mission_referece"),"profile_info/update_profile":$("profile")},z=n(44),F=function(e){return function(){return{type:"AB_REMOVED_ACTION",org_type:e}}},U=function(e){return function(){return function(t){return t(F(e)())}}};function W(e,t){c.a.forEach(e,function(n,a){var r=t+a;e[a]=c.a.isFunction(e[a])?U(r):F(r)})}var H=n(82),J=n(10);n.d(t,"actions",function(){return G}),n.d(t,"selectors",function(){return h}),n.d(t,"BASE_SELECTOR_PATH",function(){return g}),n.d(t,"ACTION_TYPES",function(){return E}),n.d(t,"private_actions",function(){return O}),n.d(t,"middleware_handlers",function(){return M});var G=Object.assign({},N,a);(function(e){var t=e.store,n=e.ab_id,a=e.removal_weight,r=e.actions,s=e.private_actions,o=e.action_types_prefix;(0,t.dispatch)(z.a.get_variant({experiment_id:n,variants:{removed:a,"not removed":100-a},only_after_login:!0})).then(function(e){"removed"===e&&(W(r,o),W(s,o))})})({store:Object(H.a)(),ab_id:"reward_badges",removal_weight:80,actions:G,private_actions:O,action_types_prefix:"reward_badges/"});t.default=Object(J.a)({reward_badges:T})},485:function(e,t,n){e.exports={number:"Badge__number",root:"Badge__root",not_earned:"Badge__not_earned",back_border:"Badge__back_border",border:"Badge__border",badge:"Badge__badge",stars:"Badge__stars",number_back:"Badge__number_back",time:"Badge__time",background:"Badge__background",card:"Badge__card",back:"Badge__back",front:"Badge__front",enterActive:"Badge__enterActive",enterDone:"Badge__enterDone",exitActive:"Badge__exitActive",exitDone:"Badge__exitDone"}},487:function(e,t,n){"use strict";var a=n(14),r=n.n(a),s=n(0),o=n.n(s),i=n(1),d=n.n(i),c=n(486),_=n(485),u=n.n(_),l=n(356),p=n.n(l),g=n(17),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),b={classNames:{root:"Badge__root",not_earned:"Badge__not_earned",border:"Badge__border",back_border:"Badge__back_border",badge:"Badge__badge",stars:"Badge__stars",number_back:"Badge__number_back",number:"Badge__number",time:"Badge__time",background:"Badge__background",card:"Badge__card",front:"Badge__front",back:"Badge__back",enter:"Badge__enter",exit:"Badge__exit"}};function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return n=a=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={show_description:!a.props.date_earned},a.toggle_description=function(){window.clearTimeout(a._timer),a.setState({show_description:!a.state.show_description})},m(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.a.PureComponent),f(t,[{key:"componentDidMount",value:function(){var e=this;this.props.show_back_after_delay&&(this._timer=window.setTimeout(function(){return e.setState({show_description:!0})},3e3))}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this._timer)}},{key:"render_time",value:function(){return this.props.date_earned?o.a.createElement("p",{className:"Badge__time"},"Earned: ",o.a.createElement(p.a,{datetime:this.props.date_earned})):null}},{key:"render_number",value:function(e){return 0===e?null:o.a.createElement("div",{className:"Badge__number_back"},o.a.createElement("div",{className:"Badge__number"},o.a.createElement("div",null,e)))}},{key:"render_level",value:function(){var e=t.level_earned(this.props),n="100%";switch(e){case 0:n="0";break;case 1:n="30%";break;case 2:n="50%"}return o.a.createElement("div",{className:"Badge__badge"},this.render_number(e),o.a.createElement("div",{className:"Badge__stars",style:{width:n}}))}},{key:"render_badge",value:function(){return o.a.createElement("div",{className:"Badge__border"},this.render_level(),o.a.createElement("h2",null,this.props.title))}},{key:"render",value:function(){var e=this.props.date_earned?"root":"root not_earned";return o.a.createElement(g.a,{onClick:this.toggle_description,centered:!0,light:!0,className:(this.props.className?this.props.className+" ":"")+r()(e,b)},o.a.createElement(c.CSSTransition,{in:this.state.show_description,classNames:u.a,timeout:500,appear:!0},o.a.createElement("div",{className:"Badge__card"},o.a.createElement("div",{className:"Badge__front"},this.render_badge()),o.a.createElement("div",{className:"Badge__back"},o.a.createElement("div",{className:"Badge__back_border"},o.a.createElement("div",{className:"Badge__background"},this.render_badge()),o.a.createElement("p",null,this.state.description))))),this.render_time())}}],[{key:"getDerivedStateFromProps",value:function(e,n){var a=t.level_earned(e),r=e.state.count,s=e.levels[a],o=void 0;if(0===a)o="Earn this badge by "+e.description.replace("$N",s)+"\n — Currently at "+r+".";else{var i=e.levels[a-1];o="Earned by "+e.description.replace("$N",i)+"\n\n",null!=s&&(o+="Earn the next level at "+s+". "),o+="— Currently at "+r+"."}return o===n.description?null:{description:o}}},{key:"level_earned",value:function(e){var t=e.levels,n=e.state.count;return t.reduce(function(e,t,a){return n>=t?a+1:e},0)}}]),t}();v.propTypes={title:d.a.string.isRequired,description:d.a.string.isRequired,levels:d.a.arrayOf(d.a.number).isRequired,date_earned:d.a.string,state:d.a.shape({count:d.a.number.isRequired}).isRequired,className:d.a.string,show_back_after_delay:d.a.bool},v.defaultProps={},v.displayName="Badge",t.a=v},684:function(e,t,n){e.exports=n.p+"assets/flag-victory17cb8764eeb259c7c95ec092e118ae19.svg"}}]);
//# sourceMappingURL=BadgeToast.458303648c722248776b.js.map