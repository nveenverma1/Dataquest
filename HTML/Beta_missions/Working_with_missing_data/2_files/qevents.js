!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n=window.webpackJsonp;window.webpackJsonp=function(t,i,r){for(var s,a,l=0,d=[];l<t.length;l++)a=t[l],o[a]&&d.push(o[a][0]),o[a]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s]);for(n&&n(t,i,r);d.length;)d.shift()()};var i={},o={entry:0};t.e=function(e){function n(){a.onerror=a.onload=null,clearTimeout(l);var t=o[e];0!==t&&(t&&t[1](new Error("Loading chunk "+e+" failed.")),o[e]=undefined)}var i=o[e];if(0===i)return new Promise(function(e){e()});if(i)return i[2];var r=new Promise(function(t,n){i=o[e]=[t,n]});i[2]=r;var s=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.charset="utf-8",a.async=!0,a.timeout=12e4,t.nc&&a.setAttribute("nonce",t.nc),a.src=t.p+"chunk.qevents.js.out.min";var l=setTimeout(n,12e4);return a.onerror=a.onload=n,s.appendChild(a),r},t.m=e,t.c=i,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t.oe=function(e){throw console.error(e),e},t(t.s="./shared/qevents/main.js")}({"./actions.js":function(e,t,n){function i(){d>=c&&(o(),d=0)}function o(){var e=(new Date).getTime(),t=[];for(var n in l){var i=l[n];e-i.startTime>u&&(t.push(i),delete l[n])}}function r(e){e.mustReport&&(delete e.mustReport,a.log("action_data",{data:e}))}var s=n("./shared/util.js"),a=n("./shared/log_sender.js"),l={},d=0,c=100,u=6e5;t.startAction=function(e){if(null===e||void 0===e)throw new Error("This method expects an object describing the action.");return e.startTime=(new Date).getTime(),e.id=(1e3*e.startTime+Math.floor(1e3*Math.random())).toString(36),l[e.id]=e,d++,i(),e},t.startOrUpdateAction=function(e,n){return e&&l[e]?t.updateAction(e,n):t.startAction(n)},t.getAction=function(e){return l[e]},t.updateAction=function(e,t){if(t===undefined)throw new Error("This method expects an object describing the update.");var n=l[e];return n===undefined?null:s.extend(n,t)},t.finishAction=function(e,t){var n=l[e];return n===undefined?null:(t&&s.extend(n,t),n.endTime=(new Date).getTime(),delete l[e],r(n),n)}},"./gating.js":function(e,t){e.exports=window.Q.gating},"./interface/settings.js":function(e,t,n){var i=n("./settings.js");t.action=i.action,t.batchedServerCallUrl=i.batchedServerCallUrl,t.componentInspector=i.componentInspector,t.controller=i.controller,t.debug=i.debug,t.enableFrameBusting=i.enableFrameBusting,t.interface_strings=i.interface_strings,t.isLoggedIn=i.isLoggedIn,t.logComponentTime=i.logComponentTime,t.serverCallUrl=i.serverCallUrl,t.windowId=i.windowId},"./mobile_app2/action_view.js":function(e,t,n){var i=n("./shared/client.js"),o=n("./unified_view/mobile_overlays.js"),r=n("./mobile_app2/page_cloner.js"),s=n("./mobile_app2/messages.js"),a=n("./shared/errors.js"),l=n("./shared/window_manager.js");t.showFromParentComponent=function(e,n,r,l,d,c,u){if(i.isMobileWeb()){var h=o.getActionViewOverlay(),p=h.$getContent().get(0);o.moveElementToDiv(e,p),o.executeOnLoadForPrefetchedContent(n),h.setHeight(r),h.setOnClose(function(){o.moveElementBack(e),c&&c()}),h.setTitle(d),h.show()}else{var f=n.children();1!=f.length&&a.logJsError("page cloner found "+f.length+" children, expected 1");var m=f[0],_=t.dataFromComponent(e,m,r,l,d,u);s.send("showActionView",_,c)}},t.dataFromComponent=function(e,t,n,o,s,a){var l;l=i.isAndroidApp()?r.renderBody(e,t,a):r.renderPage(e,t,a);var d={url:o,html:l,title:s};return n&&(d.height=n),d},t.showFromUrl=function(e,t){i.isMobileWeb()?l.navigateTo(e):t?s.send("showActionView",{url:e},function(){l.navigateTo(t)}):s.send("showActionView",{url:e})}},"./mobile_app2/android_click_hack.js":function(e,t,n){var i=n("./shared/client.js"),o=n("./settings.js"),r=null;t.rateLimitWrap=function(e){return!i.isAndroidApp()||o.osVersion>4.3?e:(e.__rateLimitWrap||(e.__rateLimitWrap=function(t){t=t.originalEvent?t.originalEvent:t,null===r&&(r=t,setTimeout(function(){r=null},300)),r===t?e.apply(this,arguments):t.preventDefault()}),e.__rateLimitWrap)}},"./mobile_app2/app/view/common.js":function(e,t,n){var i=n("./mobile_app2/util.js"),o=n("./shared/jquery.js"),r=n("./mobile_app2/client.js"),s=n("./shared/client.js"),a=n("./shared/onload.js"),l=n("./shared/core/component.js").Component,d=n("./settings.js").interface_strings,c=n("./mobile_app2/messages.js");t.FollowButton=l.extend({onLoad:function(){var e=this,t=e.getButton();o(t).on("click",function(t){e.handleClick(t),t.preventDefault()})},getButton:function(){return this.$id("@follow_unfollow").get(0)},handleClick:function(){var e=this;e.url_to_dirty&&s.isNativeApp()&&c.send("removeURLFromCache",{url:e.url_to_dirty}),e.following?e.unfollow():e.follow()},get_server_call_kwargs:function(){return{}},follow_server_call:function(){var e=this;e.serverCall(e.follow_server_call_method_name).kwargs(e.get_server_call_kwargs()).send()},unfollow_server_call:function(){var e=this;e.serverCall(e.unfollow_server_call_method_name).kwargs(e.get_server_call_kwargs()).send()},getCount:function(e){if(i.isTruncatedNumber(this.initial_follow_count))return this.initial_follow_count;var t=parseInt(this.initial_follow_count);return e?t+1:t},isActionItem:function(e){return!!o(e).hasClass("action_item")},follow:function(){var e=this,t=e.getButton();e.follow_server_call(),o(t).addClass("unfollow_button"),e.following=!0;var n=e.getCount(!0);t.innerHTML=e.unfollow_text+'<span class="count">'+n+"</span>",e.isActionItem(t.parentNode.parentNode)&&o(t.parentNode.parentNode).addClass("active"),setTimeout(function(){t.setAttribute("action_click",e.unfollow_action)},0)},unfollow:function(){var e=this,t=e.getButton();e.unfollow_server_call(),o(t).removeClass("unfollow_button"),e.following=!1;var n=e.getCount();t.innerHTML=e.follow_text+'<span class="count">'+n+"</span>",e.isActionItem(t.parentNode.parentNode)&&o(t.parentNode.parentNode).removeClass("active"),setTimeout(function(){t.setAttribute("action_click",e.follow_action)},0)}}),t.ModalWithSearchInput=l.extend({loadModalOptions:function(){var e=this;e.$searchingView=e.$id("@searching_view"),e.$idleView=e.$id("@idle_view"),e.$placeHolder=e.$id("@placeholder_view"),this.setPageActionForModal(),this.skipSetTitle||this.setTitle(),r.registerMessageHandler("searchQueryChanged",function(t){t.query.length>0?(e.$placeHolder.addClass("hidden"),e.$idleView.addClass("hidden"),e.$searchingView.removeClass("hidden"),e.searchTitleText&&!e.skipSetTitle&&c.send("setPageAction",{title:e.searchTitleText})):(e.$placeHolder.addClass("hidden"),e.$idleView.removeClass("hidden"),e.$searchingView.addClass("hidden"),e.titleText&&!e.skipSetTitle&&c.send("setPageAction",{title:e.titleText}))})},setTitle:function(){var e=this;e.titleText?c.send("setPageAction",{title:e.titleText}):e.searchTitleText&&c.send("setPageAction",{title:e.searchTitleText})},setPageActionForModal:function(){c.send("setPageAction",{leftCloseButton:{callback:function(){r.reloadDirtyPages()}}})},showSearchBar:function(){var e=this;e.searchFocus===undefined&&(e.searchFocus=!0),c.send("showSearchInput",{searchPlaceholderText:e.searchPlaceholderText,searchFocus:e.searchFocus})},onLoad:function(e){this.loadModalOptions(),this.showSearchBar()}}),t.serverCallError=function(e){u({title:d.connection_error,message:d.connection_error_message,cancelButtonTitle:d.ok,otherButtonTitles:[],callback:function(e){c.send("reload")}})};var u=t.showAlert=function(e){"cancelButtonTitle"in e||(e.cancelButtonTitle=d.ok),"otherButtonTitles"in e||(e.otherButtonTitles=[]);var t;"callback"in e?(t=e.callback,delete e.callback):t=function(){},"string"==typeof e.otherButtonTitles&&(e.otherButtonTitles=[e.otherButtonTitles]),a.execAfterLoad(function(){c.send("showAlert",e,t)})};t.showConfirm=function(e){var t;"callback"in e?(t=e.callback,delete e.callback):t=function(){},c.send("showAlert",{title:e.title,message:e.message},function(e){e.buttonIndex>0&&t()})}},"./mobile_app2/app/view/mweb.js":function(e,t,n){var i=n("./mobile_app2/client.js"),o=n("./shared/core/component.js").Component,r=n("./mobile_app2/view/page_wrapper.js"),s=n("./mobile_app2/view/mobile/add_question.js"),a=n("./mobile_app2/app/view/common.js"),l=n("./mobile_app2/messages.js"),d=n("./settings.js").interface_strings,c=n("./shared/cookies.js"),u=n("./shared/events/index.js"),h=n("./shared/log_sender.js");t.GoToFeedGrowl=o.extend({onLoad:function(){var e=this;window.setTimeout(function(){e.$id("@growl").removeClass("hidden"),e.$id("@growl").addClass("fade_in"),window.setTimeout(function(){e.$id("@growl").removeClass("fade_in"),e.$id("@growl").addClass("fade_out"),window.setTimeout(function(){e.$id("@growl").addClass("hidden").removeClass("fade_out")},1250)},1e3*e.visible_sec)},1e3*e.delay_sec),e.$id("@growl").addClass("hidden")}});var p=t.LookupBarButton=o.extend({onLoad:function(){var e=this;e.$id("@lookup_bar").on("click",function(){e.triggerLookupBar()})},triggerLookupBar:function(){r.showPageWrapper("lookup_bar_page_wrapper"),s.mobileWebLookupBarHeader&&(s.mobileWebLookupBarHeader.addHash(),s.mobileWebLookupBarHeader.focus()),h.log("search_monitoring",{type:"bar_open"})}});t.LookupBarFakeInput=p.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.$id("@lookup_bar_short_placeholder").on("click",function(){e.triggerLookupBar()})}}),t.LookupBarAddQuestionButton=p.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.$id("@add_question").on("click",function(){e.triggerLookupBar()})}});var f=t.ViewInAppLink=o.extend({onLoad:function(){var e=this;e.$id("@view_in_app").on("click",function(t){e.onClick(t)})},onClick:function(e){var t=this,n=function(){t.triggerRedirects(t.app_store_link,t.app_url)};t.setLastUrlCookie(),t.serverCall("on_link_clicked").kwargs({url_id:t.url_id,app_url:t.app_url,referrer:t.referrer_link,provider:t.url_provider}).success(function(){t.triggerRedirectImmediately||n()}).error(function(){t.triggerRedirectImmediately||n()}).send(),t.triggerRedirectImmediately&&n()},pageIsProbablyVisible:function(){return document.webkitHidden!==undefined?!document.webkitHidden:document.hidden===undefined||!document.hidden},triggerRedirects:function(e,t){var n=this,i=+new Date;n.redirectToAppURL(t),n.app_store_fallback&&n.is_ios_device&&!n.iosUniversalLinks&&setTimeout(function(){var t=+new Date-i,o=t>n.returnToBrowserTimeout;n.pageIsProbablyVisible()&&!o&&(window.location=e)},n.appStoreTimeout)},redirectToAppURL:function(e){window.location=e},setLastUrlCookie:function(){if(this.should_set_cookie_on_click){c.setCookie("mwebLastUrl",window.location.href);var e=Date.parse(new Date);c.setCookie("mwebLastUrlTimestampMs",e)}}});t.OpenInAppBanner=f.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.$id("@dismiss").on("click",function(){e.$id("@banner").addClass("hide"),e.serverCall("on_dismiss").send()}),e.handleEvent(u.Types.HIDE_OPEN_IN_APP_BANNER,function(t){e.$id("@banner").addClass("hide")}),e.handleEvent(u.Types.SHOW_OPEN_IN_APP_BANNER,function(t){e.$id("@banner").removeClass("hide")})}}),t.DownloadAppLink=f.extend({onClick:function(e){var t=this;t.serverCall("set_redirect_data").kwargs({redirect_url:t.redirectUrl}).send(),t._super.apply(t,arguments),e.stopPropagation()}}),t.LoggedOutHeader=o.extend({onLoad:function(){var e=this;e.$id("@signup_button").on("click",function(){e.serverCall("show_signup_wall_if_not_logged_in").liveMutate().send()}),e.$id("@login_button").on("click",function(){e.serverCall("show_signup_wall_if_not_logged_in").liveMutate().send()})}}),t.LoggedInNonMemberHeader=o.extend({onLoad:function(){var e=this;e.$id("@menu").on("click",function(){i.showActionSheet({buttonTitles:e.actionSheetTitles,destructiveButtonIndex:e.actionSheetTitles.length-1,callback:function(t){if(!(t>=e.actionSheetTitles.length))return t==e.actionSheetTitles.length-1?void e.onSelectLogout():void(window.location=e.destinationData[t].url)}})})},onSelectLogout:function(){var e=this;a.showAlert({title:e.dialog_title,message:e.dialog_message,callback:function(t){0===t.buttonIndex&&e.logout()},cancelButtonTitle:e.dialog_title,otherButtonTitles:[d.cancel]})},logout:function(){this.serverCall("logout").success(function(){l.send("disableAutoSignIn"),l.send("loginStateChanged",{isLoggedIn:!1})}).send()}}),t.ApiCallsComponent=o.extend({onLoad:function(){var e=this;i.registerMessageHandler("makeApiCall",function(t){var n=t.methodName,i=t.data,o=t.callback;e.serverCall("make_api_call").kwargs({method_name:n,data:i}).success(function(e){o({value:e,success:!0})}).error(function(e){o({})}).send()})}})},"./mobile_app2/app/view/share.js":function(e,t,n){var i=n("./mobile_app2/client.js"),o=n("./shared/client.js"),r=n("./shared/facebook.js"),s=n("./mobile_app2/messages.js"),a=n("./shared/core/rpc.js"),l=n("./shared/core/component.js").Component,d=n("./shared/toast.js"),c=n("./shared/client_log.js"),u=n("./shared/events/index.js");t.ShareLink=l.extend({onLoad:function(){var e=this;this.$id("@share_link").on("click",function(t){t.preventDefault();var n=o.isIOSApp()?function(){}:function(t,n){0===n?s.send("openURL",t.quora_message_data):1===n?(s.send("shareCopyURL",t.copy_data),e.serverCall("share_log_copy_link").kwargs({data:t}).send()):2===n?s.send("openURL",t.share_to_blog_data):3===n&&s.send("openURL",t.share_to_tribe_data)};i.showNativeShareSheet(e.share_data,n)})}}),t.ShareMain=l.extend({onLoad:function(){r.load()}});var h=function(e,t,n){a.rpc("/api/share_log_other_POST").kwargs({share_type:e,target:t,target_app:n}).send()},p=t.shareAction=function(e,t){if(e.messageName)if("openURL"===e.messageName){var n={url:e.externalURL},r=function(){n.target="external",s.send(e.messageName,n,t)};o.isIOSApp()&&i.buildNumber>=760?s.send("canOpenURL",n,function(t){t&&t.result?r():s.send("showAlert",{title:e.data.error_title,message:e.data.error_message})}):r(),e.targetApp&&h(e.data.share_type,e.data.target,e.targetApp)}else"shareTwitter"==e.messageName?i.shareToTarget(e.data,"twitter",t):("shareCopyURL"==e.messageName&&d.show(e.successMessage),s.send(e.messageName,e.data,t));e.qfeedLogSecondaryAction&&c.logEvent(e.qfeedLogSecondaryAction,null,{oid:e.data.oid})};t.ShareCell=l.extend({onLoad:function(){var e=this;e.$id("@cell").on("click",function(t){p({messageName:e.messageName,data:e.data,qfeedLogSecondaryAction:e.qfeedLogSecondaryAction},function(){s.send("dismiss")}),e.onClick(),t.preventDefault()})},onClick:function(){}}),t.FacebookCell=t.ShareCell.extend({}),t.TwitterCell=t.ShareCell.extend({onClick:function(){this.serverCall("log_share").kwargs({share_type:this.data.share_type,target:this.data.target}).send()}}),t.WhatsAppCell=t.ShareCell.extend({onClick:function(){h(this.data.share_type,this.data.target,"com.whatsapp")}}),t.LineCell=t.ShareCell.extend({onClick:function(){h(this.data.share_type,this.data.target,"com.linecorp")}}),t.TextMessageCell=t.ShareCell.extend({}),t.CopyURLCell=t.ShareCell.extend({onClick:function(){this.$id("@cell").get(0).getElementsByClassName("tc_text")[0].innerHTML=this.successMessage,o.isIOSApp()||window.setTimeout(function(){s.send("dismissModal")},500)}}),t.ShareSendModalLink=l.extend({onLoad:function(){var e=this;e.$id("@share_link").on("click",function(t){t.preventDefault(),s.send("showActionView",{url:e.url,title:e.title,height:280})}),e.handleEvent(u.Types.SHARE_SEND_ITEM_SHARED,function(t){t.payload.share_type==e.share_type&&t.payload.oid==e.oid&&e.serverCall("show_share_send_pmsg").kwargs({share_type:t.payload.share_type,target:t.payload.target,to_uid:t.payload.to_uid}).send()})}}),t.FacebookNetworkShare=l.extend({onLoad:function(){var e=this;e.$id("@share").on("click",function(t){t.preventDefault(),e.shareIt()}),e.actionButton=e.child("share_facebook"),e.actionButton&&"function"==typeof e.actionButton.onPressed&&e.actionButton.onPressed(function(){e.shareIt()})},shareIt:function(){var e=this;i.shareToTarget(e.data,"facebook"),e.serverCall("record_facebook_share").kwargs({target:e.data.target,share_url:e.data.url}).send()}}),t.TwitterNetworkShare=l.extend({onLoad:function(){var e=this;e.$id("@share").on("click",function(t){t.preventDefault(),e.shareIt()}),e.actionButton=e.child("share_twitter"),e.actionButton&&"function"==typeof e.actionButton.onPressed&&e.actionButton.onPressed(function(){e.shareIt()})},shareIt:function(){var e=this;i.shareToTarget(e.data,"twitter"),e.serverCall("record_tweet").kwargs({target:e.data.target,share_url:e.data.url}).send()}})},"./mobile_app2/click_handlers.js":function(e,t,n){var i=n("./mobile_app2/client.js"),o=n("./shared/links.js"),r=n("./shared/client.js"),s=n("./mobile_app2/android_click_hack.js"),a=t.safeClickHandler=function(e,t,n){var i=s.rateLimitWrap(t);e&&e.addEventListener("click",i,n&&n.capture)};t.longPressHandler=function(e,t){var n,i=500,o=function(e){n=setTimeout(function(){n=null,t()},i)},r=function(e){null!==n?clearTimeout(n):e.preventDefault()},s=function(e){null!==n&&clearTimeout(n)};e&&(e.addEventListener("touchstart",o),e.addEventListener("touchend",r),window.addEventListener("scroll",s))},t.registerDocumentClickHandlers=function(){a(document,function(e){var t=i.touchableTarget(e.target);if(!t||t===document)return!0;t.getAttribute("mobile_app_dirty")&&i.markPageAsDirty();var n=t.getAttribute("href");if(n){var s=t.rel.includes("noreferrer")||t.rel.includes("noopener");r.isMobileWeb()&&s?o.linkClicked(n):(e.preventDefault(),"#"!=n&&i.openURLFromElement(t))}},{handlesClick:!1})}},"./mobile_app2/client.js":function(module,exports,__webpack_require__){function saveMessage(e,t){_message.push({messageName:e,data:t})}function getMessageInfo(){var e=_message;return _message=[],JSON.stringify(e)}function registerMessageHandlerForTarget(e,t,n){return n.hasOwnProperty(e)||(n[e]=[],sharedClient.isIOSApp()&&messages.send("registerForMessage",{messageName:e})),n[e].push(t),t}function removeMessageHandlerForTarget(e,t,n){if(n.hasOwnProperty(e))for(var i=n[e],o=0;o<i.length;o++)i[o]===t&&i.splice(o,1)}function handleMessageForTarget(e,t,n,i){var o=!1;if(n.hasOwnProperty(e)){var r=n[e].slice(),s=r.length;i&&(n[e]=[]);for(var a=0;a<s;a++)try{(0,r[a])(t),o=!0}catch(e){console.log(e.message),console.log(e.stack)}}return o}function startPollingWorkaroundIfOnAndroid(){var androidInterface=getAndroidInterface();if(androidInterface&&androidInterface.hasOwnProperty("usesEvalBuffer")&&androidInterface.hasOwnProperty("popEvalBuffer")&&androidInterface.usesEvalBuffer()){var fn=function(){for(var str=androidInterface.popEvalBuffer();str&&str.length>0;)eval(str),str=androidInterface.popEvalBuffer()};setInterval(fn,100)}}function saveScrollPosition(e){scrollAnchor=document.elementFromPoint(window.innerWidth/2,window.innerHeight/2),setTimeout(restoreScrollPosition,sharedClient.isAndroidApp()?100:300)}function restoreScrollPosition(){null===scrollAnchor||"undefined"==typeof scrollAnchor.scrollIntoViewIfNeeded?console.log("invalid scroll anchor!"):viewport.isElementInViewport(scrollAnchor)||scrollAnchor.scrollIntoViewIfNeeded(!0)}var settings=__webpack_require__("./settings.js"),$=__webpack_require__("./shared/jquery.js"),u=__webpack_require__("./mobile_app2/util.js"),util=__webpack_require__("./shared/util.js"),coreRpc=__webpack_require__("./shared/core/rpc.js"),viewport=__webpack_require__("./shared/viewport.js"),sharedClient=__webpack_require__("./shared/client.js"),loading=__webpack_require__("./shared/loading.js"),shareAction=__webpack_require__("./mobile_app2/app/view/share.js").shareAction,links=__webpack_require__("./shared/links.js"),tabTitles=__webpack_require__("./mobile_app2/tab_titles.js").tabTitles,errors=__webpack_require__("./shared/errors.js"),messages=__webpack_require__("./mobile_app2/messages.js"),mobileOverlays=__webpack_require__("./unified_view/mobile_overlays.js"),sharedFacebook=__webpack_require__("./shared/facebook.js"),windowManager=__webpack_require__("./shared/window_manager.js");if(exports.buildNumber=settings.buildNumber,exports.osVersion=settings.osVersion,sharedClient.isMobileWeb())var web_app_shim=__webpack_require__("./mobile_app2/web_app_shim.js");var _message=[];sharedClient.isIOSApp()&&(window.getMessageInfo=getMessageInfo);var getAndroidInterface=function(){return window.QuoraAndroid},getSafeMessageData=function(e){if(null===e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&"function"!=typeof e[n]&&(t[n]=e[n]);return t};exports.sendStringsToAndroid=function(e,t,n){if(sharedClient.isAndroidApp()){getAndroidInterface().sendMessage(e,t,n)}else{var i="Warning Tried to use sendStringsToAndroid on non Androiddevice for message"+e;if(console.log(i),sharedClient.isMobileWeb())return web_app_shim.sendStringsToAndroid(e,t,n)}},exports.sendMessageToClient=function(e,t){if(t||(t={}),t.callback){var n="Message "+e+" is sent with unwrapped callback, it will not be called";console.log(n),messages.send("log",{msg:n,level:"warning"})}if(sharedClient.isMobileWeb())return web_app_shim.sendMessageToClient(e,t);switch(sharedClient.getDeviceType()){case sharedClient.DeviceType.ANDROID:var i=getAndroidInterface();i&&i.sendMessage(JSON.stringify({messageName:e,data:t}));break;case sharedClient.DeviceType.IOS:if(sharedClient.isWKWebView())window.webkit.messageHandlers.Q.postMessage({messageName:e,data:getSafeMessageData(t)});else{var o=document.createElement("iframe");if(saveMessage(e,t),window.componentOnLoadFinished){var r=btoa(window.unescape(encodeURIComponent(getMessageInfo())));o.setAttribute("src",settings.clientMessageUrlPrefix+r),o.setAttribute("frameborder",0),o.setAttribute("height",0),o.setAttribute("width",0),document.documentElement.appendChild(o),o.parentNode.removeChild(o),o=null}}}};var callbacks={},generateCallbackId=function(){return Math.random().toString()};exports.registerCallback=function(e){var t=generateCallbackId();return callbacks[t]=e,t},exports.invokeCallback=function(e,t){if(e in callbacks)try{callbacks[e](t),delete callbacks[e]}catch(e){console.log(e.message),console.log(e.stack)}};var defaultMessageHandlers={modalCancelButtonTapped:function(e){messages.send("dismissModal")}};exports.broadcastMessageToWebViews=function(e,t){t||(t={}),messages.send("broadcastAllWebViews",{messageName:e,data:t})};var messageHandlers=exports._messageHandlers={},oneTimeMessageHandlers=exports._oneTimeMessageHandlers={};exports.registerMessageHandler=function(e,t){return registerMessageHandlerForTarget(e,t,messageHandlers)},exports.registerOneTimeMessageHandler=function(e,t){return registerMessageHandlerForTarget(e,t,oneTimeMessageHandlers)},exports.removeMessageHandler=function(e,t){removeMessageHandlerForTarget(e,t,messageHandlers)};var removeOneTimeMessageHandler=function(e,t){removeMessageHandlerForTarget(e,t,oneTimeMessageHandlers)};exports.removeOneTimeMessageHandler=removeOneTimeMessageHandler,exports.handleMessage=function(e,t){var n=handleMessageForTarget(e,t,messageHandlers),i=handleMessageForTarget(e,t,oneTimeMessageHandlers,!0);!n&&!i&&e in defaultMessageHandlers&&defaultMessageHandlers[e](t)},exports.pageReady=function(){window.componentOnLoadFinished||startPollingWorkaroundIfOnAndroid(),window.componentOnLoadFinished=!0,messages.send("PageReady",{windowId:settings.windowId,subdomain:settings.subdomain_name||"www"})},exports.markPageAsDirty=function(e){e===undefined?e=window.location.href:"/"==e[0]&&(e=window.location.origin+e),messages.send("broadcastAllWebViews",{messageName:"markURLAsDirty",data:{url:e}})},exports.registerMessageHandler("markURLAsDirty",function(e){e.url==window.location.href&&exports.registerOneTimeMessageHandler("reloadDirtyPages",function(){messages.send("reload")})}),exports.reloadDirtyPages=function(){setTimeout(function(){messages.send("broadcastAllWebViews",{messageName:"reloadDirtyPages",data:{}})},100)};var scrollAnchor=null;exports.registerMessageHandler("willRotate",saveScrollPosition),exports.registerMessageHandler("addCssClassToHtmlBody",function(e){document.body.className+=" "+e.className}),exports.touchableTarget=function(e){for(;e&&e!=document&&"A"!=e.nodeName.toUpperCase()&&"true"!=e.getAttribute("touchable");)e=e.parentNode;return sharedClient.isAndroidApp()&&e===document&&(e=null),e};var supportsDestructiveActionSheetButtons=exports.supportsDestructiveActionSheetButtons=function(){return!(sharedClient.isIOSApp()&&parseInt(exports.osVersion)<8&&!settings.isTabletApp)},showActionSheet=exports.showActionSheet=function(e){"destructiveButtonIndex"in e&&(supportsDestructiveActionSheetButtons()||(e.destructiveButtonIndex=-1));var t=function(){};if("callback"in e){var n=e.callback;t=function(e){e.buttonIndex>=0&&n(e.buttonIndex)},delete e.callback}messages.send("showActionSheet",e,t)};exports.showNativeShareSheet=function(e,t){if(t||(t=function(){}),sharedClient.isAndroidApp()&&messages.send("showNativeShareSheet",e,function(n){t(e,n.buttonIndex)}),sharedClient.isIOSApp()){var n=e.primary_actions,i=n.map(function(e){return e.buttonTitle});i.push(e.more_text),showActionSheet({buttonTitles:i,destructiveButtonIndex:-1,callback:function(t){var i=n.length;if(t>=0&&t<i){var o,r={messageName:n[t].messageName,externalURL:n[t].externalURL,targetApp:n[t].targetApp,qfeedLogSecondaryAction:n[t].qfeedLogSecondaryAction,successMessage:n[t].successMessage};o="shareTextMessage"==r.messageName?e.content.text_with_url:e.content.text,r.data={url:n[t].shareURL,share_type:e.info.share_type,target:e.info.target,oid:e.info.oid,text:o,error_title:e.error_title,error_message:e.error_message+n[t].buttonTitle},"showActionView"==r.messageName&&(r.data={url:n[t].shareURL}),shareAction(r)}else if(t===i){var s={};s.content=e.content,s.extra_actions=e.extra_actions,s.info=e.info,messages.send("showNativeShareSheet",s)}}})}},exports.showPrefetchingIndicator=function(e,t){var n={visible:!0,position:e};$(document.body).addClass("prefetching_indicator_visible"),messages.send("updatePrefetchingIndicator",n,t)},exports.hidePrefetchingIndicator=function(e){var t={visible:!1};setTimeout(function(){messages.send("updatePrefetchingIndicator",t,e)},100),$(document.body).removeClass("prefetching_indicator_visible")};var updateNextPageIndicator=function(e){var t,n="update_next_page_indicator_spinner_container",i=document.getElementById(n);if(e){if(null===i){t=document.createElement("div"),t.id=n,t.className="update_next_page_indicator_spinner";var o=loading.createDots();t.appendChild(o);var r=document.getElementById("page_wrapper");r||(r=document.body),r.appendChild(t)}}else{if(null===i)return;t=document.getElementById(n),t.parentNode.removeChild(t)}};exports.showNextPageIndicator=function(){sharedClient.isNativeApp()?($(document.body).addClass("next_page_indicator_visible"),messages.send("updateNextPageIndicator",{visible:!0})):updateNextPageIndicator(!0)},exports.hideNextPageIndicator=function(){sharedClient.isNativeApp()?(setTimeout(function(){messages.send("updateNextPageIndicator",{visible:!1})},100),$(document.body).removeClass("next_page_indicator_visible")):updateNextPageIndicator(!1)},exports.openURLFromElement=function(e){var t=e.getAttribute("nav_style"),n=e.getAttribute("mobile_app_target"),i=e.getAttribute("mobile_app_hide_search_bar"),o=e.getAttribute("mobile_app_hide_navigation_buttons"),r=e.getAttribute("href");if(r.startsWith("#")){var s=document.getElementById(r.slice(1)),a=sharedClient.isMobileWeb()?web_app_shim.getFixedHeaderOffset():0;if(s)return u.scrollToView(s,a+s.offsetHeight/2)}var l={url:r};if(r&&("mailto:"===r.slice(0,7)||"tel:"===r.slice(0,4)))return l.target=sharedClient.isIOSApp()?"external":"browser",messages.send("openURL",l),!1;if(!sharedClient.isNativeApp()&&t)windowManager.navigateTo(r,t);else if(n)l.target=n;else{var d=e.hostname.split(".");d.length<2||"com"!=d[d.length-1]||"quora"!=d[d.length-2]?l.target="browser":settings.defaultMobileAppTarget&&(l.target=settings.defaultMobileAppTarget)}if("discardable_modal"!=l.target&&"discardable"!=l.target||(l.position=u.positionForElement(e)),"image_viewer"==l.target){var c,h=e,p=e.getElementsByTagName("img"),f=e.getElementsByTagName("div");p.length>0?(h=p[0],c=h.src):f.length>0&&(h=f[0],c=h.style.backgroundImage),l.placeholderURL=c,l.position=u.positionForElement(h)}return i&&(l.hide_search_bar="true"===i),o&&(l.hide_navigation_buttons="true"==o),setLoadingPlaceholder(l,e),links.linkClicked(l.url),messages.send("openURL",l),!1};var setLoadingPlaceholder=function(e,t){if(sharedClient.isIOSApp()){var n=t.getAttribute("mobile_loading_placeholder");if(n){e.loading_placeholder=n;var i={},o=t.getAttribute("mobile_loading_placeholder_title");o&&(i.title=o);var r=t.getAttribute("mobile_loading_placeholder_subtitle");r&&(i.subtitle=r);var s=t.getAttribute("mobile_loading_placeholder_image_url");s&&(i.imageURL=s);var a=t.getAttribute("mobile_loading_placeholder_background_color");a&&(i.backgroundColor=a);var l=t.getAttribute("mobile_loading_placeholder_text_color");l&&(i.textColor=l),e.loading_placeholder_options=i}}};exports.registerOneTimeMessageHandler("prefetchedPageViewed",function(e){coreRpc.rpc("/api/prefetched_page_viewed_POST").kwargs({url:e.url,window_id:settings.windowId}).send()}),settings.isPagePrefetched&&settings.shouldRecordResponse&&exports.registerOneTimeMessageHandler("pageShow",function(){coreRpc.rpc("/api/prefetched_page_viewed_POST").kwargs({url:document.URL,window_id:settings.windowId}).send(),__webpack_require__("./shared/e2e.js").maybeReportPrefetchedData()});var getTabEvent=function(e){var t="";return e.match(/quora.com\/$/i)?t="feed_tab":e.match(/home\/wanted_answer$/i)?t="write_tab":e.match(/\/notifications$/i)?t="notifs_tab":e.match(/\/api\/mobile_app_drawer$/i)?t="more_tab":e.match(/\/videos$/i)&&(t="video_tab"),t};exports.registerMessageHandler("pageShow",function(){var e=document.URL,t=getTabEvent(e);t&&(t+="_shown",coreRpc.rpc("/api/log_tab_event_POST").kwargs({tab_event:t}).send())}),exports.registerMessageHandler("pageHide",function(){var e=document.URL,t=getTabEvent(e);t&&(t+="_hidden",coreRpc.rpc("/api/log_tab_event_POST").kwargs({tab_event:t}).send())});var deleteCallbackFromMessageData=function(e,t){t in e&&delete e[t]},rightIconButtonHandler=null,rightTextButtonHandler=null,leftCloseButtonHandler=null,filterButtonHandler=null;exports.handleSetPageActionMessage=function(e){if(e=util.cloneObject(e),checkRightButtonOptions(e)&&checkLeftCloseButtonOptions(e))return sharedClient.isMobileWeb()&&settings.shouldUseMobileActionView&&mobileOverlays.isOverlayShown()?void mobileOverlays.setPageAction(e):void(e.rightIconButtons&&!registerRightIconButtonHandler(e.rightIconButtons)||e.rightTextButton&&!registerRightTextButtonHandler(e.rightTextButton)||e.leftCloseButton&&!registerLeftCloseButtonHandler(e.leftCloseButton)||e.filter&&!registerFilterButtonHandler(e.filter)||exports.sendMessageToClient("setPageAction",e))};var checkRightButtonOptions=function(e){for(var t=!1,n=["noRightButtons","rightIconButtons","rightTextButton"],i="You can only specify one of "+n.join(", "),o=0;o<n.length;o++){if(n[o]in e){if(t)return console.error(i),!1;t=!0}}return!("noRightButtons"in e&&!0!==e.noRightButtons)||(console.error("noRightButtons should only be set to true"),!1)},checkLeftCloseButtonOptions=function(e){if(!("leftCloseButton"in e))return!0;var t=["callback","nonDismissibleModal"],n="You can only specify the following: "+t.join(", "),i=e.leftCloseButton;for(var o in i){for(var r=!1,s=0;s<t.length;s++){o==t[s]&&(r=!0)}if(!r)return n=" Invalid option: "+o+". "+n,errors.report(n),!1}if("nonDismissibleModal"in i){var a=i.nonDismissibleModal;if(!0!==a&&!1!==a)return errors.report("leftCloseButton.nonDismissibleModal should be a boolean."),!1}return!0},iconNameToCharMapping,getIconChar=exports.getIconChar=function(e){return getIconNameToCharMapping()[e]},getIconNameToCharMapping=function(){return iconNameToCharMapping||(iconNameToCharMapping={bold:"",italic:"",ol:"",ul:"",indent:"",deindent:"",camera:"",link:"",at:"",quote:"",code:"",math:"",undo:"",redo:"",x:"",more:"",caret_down:"",settings:"",q_logo:"",refresh:"",upvote:"",downvote:"",expandread:"",overflow:"",write:"",pass:"",follow:"",speak:"",subscribe:"",pin:"",share:"",remove:"",later:"",heart:"",star:"",check:"",thumbs_up:"",thumbs_down:"",flag:"",stop:"",user_collapse:"",user_answer:"",user_delete:"",user_draft:"",answer_needed:"","delete":"",merge:"",block:"",problem:"",special_topic:"",help:"",anonymous:"",none:""})},registerRightIconButtonHandler=function(e){var t="rightIconButtonPressed";rightIconButtonHandler&&exports.removeMessageHandler(t,rightIconButtonHandler);var n=e.length;if(0===n||n>2)return console.error("rightIconButtons should have 1 or 2 elements"),!1;for(var i=!1,o=[],r=0;r<e.length;r++){var s=e[r];if(!s.iconName)return console.error("rightIconButtons.iconName not specified for index",r),!1;if(s.iconChar=getIconChar(s.iconName),!s.iconChar)return console.error("righIconButtons: iconChar not found for",s.iconName),!1;var a=e[r].callback;a?(i=!0,o.push(a),deleteCallbackFromMessageData(e[r],"callback")):o.push(null)}if(!i)return!0;var l=function(t){var n=t.buttonIndex;if(n>=0&&n<e.length){var i=o[n];i&&i()}};return rightIconButtonHandler=exports.registerMessageHandler(t,l),!0},registerRightTextButtonHandler=function(e){var t="rightTextButtonPressed";if(rightTextButtonHandler&&exports.removeMessageHandler(t,rightTextButtonHandler),!("title"in e))return console.error("rightTextButton.title not specified."),!1;if(!e||!e.callback)return!0;var n=e.callback,i=function(){n()};return rightTextButtonHandler=exports.registerMessageHandler(t,i),deleteCallbackFromMessageData(e,"callback"),!0},registerFilterButtonHandler=function(e){var t="filterButtonPressed";filterButtonHandler&&exports.removeMessageHandler(t,filterButtonHandler);var n=e.iconName;if(n||(n="caret_down"),e.iconChar=getIconChar(n),!e.iconChar&&""!=e.iconChar)return console.error("filter: iconChar not found for",e.iconName),!1;var i=e.callback,o=function(t){if(i&&i(t),"show"==t.action){if(!settings.shouldUseMobileActionView){var n={target:"minimodal"};e.url&&(n.url=e.url),e.html&&(n.html=e.html),messages.send("openURL",n)}}else messages.send("dismissModal")};return filterButtonHandler=exports.registerMessageHandler(t,o),deleteCallbackFromMessageData(e,"callback"),!0},registerLeftCloseButtonHandler=function(e){var t="closeNavigationButtonPressed";leftCloseButtonHandler&&exports.removeMessageHandler(t,leftCloseButtonHandler);var n=e.callback;if(!n)return!0;var i=function(){n()};return leftCloseButtonHandler=exports.registerMessageHandler(t,i),deleteCallbackFromMessageData(e,"callback"),!0};exports.setTabTitles=function(){tabTitles.language=settings.interfaceLanguage,messages.send("setDefaultTabInfo",tabTitles)},exports.setExperimentVariants=function(e){for(var t in settings.activeExperiments)messages.send("setExperimentVariant",{experiment:t,variant:settings.activeExperiments[t],timestamp:settings.pageCreationTime})},exports.shareToTarget=function(e,t,n){switch(t){case"twitter":if(sharedClient.isIOSApp())messages.send("shareTwitter",e,n);else{var i="https://twitter.com/intent/tweet?";i+="url=",i+=encodeURIComponent(e.url),i+="&text=",i+=encodeURIComponent(e.text),messages.send("openURL",{url:i,target:"external"})}break;case"facebook":sharedClient.isIOSApp()?messages.send("shareFacebook",e,n):sharedFacebook.onInit(function(){FB.ui({method:"feed",display:"popup",link:e.url})});break;case"whatsapp":messages.send("openURL",{url:e,target:"external"})}},exports.updateConfig=function(e,t){if(!sharedClient.isNativeApp())throw new Error("updateConfig should only be called in native apps.");messages.send("updateConfig",{subdomain:e,language:t})},exports.appInBackground=!1,exports.registerMessageHandler("applicationBackground",function(){exports.appInBackground=!0}),exports.registerMessageHandler("applicationForeground",function(){exports.appInBackground=!1}),sharedClient.isAndroidApp()&&exports.registerMessageHandler("performancePing",function(e){exports.sendStringsToAndroid("pingResponse",e)}),exports.checkAndroidPackageInstalled=function(e,t){if(!sharedClient.isAndroidApp())throw new Error("checkAndroidPackageInstalled should only be called in Android app.");messages.send("getPackageList",{},function(n){var i=n.package_list;if(!i)return t(!1);for(var o=0;o<i.length;o++){if(i[o]["package"]==e)return t(!0)}return t(!1)})}},"./mobile_app2/crosstalk_login.js":function(e,t,n){var i=n("./mobile_app2/messages.js"),o=n("./settings.js"),r=n("./shared/core/rpc.js"),s=n("./shared/cookies.js"),a=n("./mobile_app2/qlocalstorage.js"),l=n("./shared/window_manager.js"),d="CrosstalkLoginState",c=t.getLastState=function(e){a.getItem(d,function(t){e(t.value)})};t.disable=function(){a.setItem(d,"disabled")};var u=function(){a.setItem(d,"loggedout")},h=function(){a.setItem(d,"loggedin")};t.login=function(e){i.send("showLoadingView"),setTimeout(function(){i.send("hideLoadingView")},3e3),i.send("browserCrosstalk",{url:"/login/crosstalk_auto_login?action=login"},function(t){"refb"in t&&s.setCookie("refb",t.refb),p(t),"b"in t?(s.setCookie("b",t.b),s.setCookie("u",t.u),h(),i.send("loginStateChanged",{isLoggedIn:!0}),e(!0)):("user_is_logged_out"in t&&u(),e(!1)),i.send("hideLoadingView")})},t.getUserInfo=function(e){i.send("browserCrosstalk",{url:"/login/crosstalk_auto_login?action=name"},function(t){"user_is_logged_out"in t&&u(),e(t),p(t)})};var p=function(e){if("mweb_last_url"in e){var t=e.mweb_last_url;"user_is_logged_out"in e&&l.navigateTo(t,"present"),i.send("setPostAuthURL",{url:t})}};t.syncLoggedInState=function(){!o.isLoggedIn||o.osVersion>=11||c(function(e){"loggedout"!=e&&"disabled"!=e||(h(),"loggedout"==e&&i.send("getCrosstalkPublicKey",{},function(e){"key"in e&&r.rpc("/ajax/get_auto_login_from_mobile_app_url_POST").kwargs({key:e.key}).success(function(e){"data"in e&&i.send("decryptCrosstalkData",e,function(e){"data"in e&&i.send("browserCrosstalk",{url:e.data.url})})}).send()}))})}},"./mobile_app2/custom.js":function(e,t,n){var i=n("./mobile_app2/client.js"),o=n("./shared/client.js"),r=n("./shared/util.js"),s=n("./shared/siteuri.js"),a=n("./settings.js"),l=n("./mobile_app2/messages.js"),d=n("./mobile_app2/message_definitions.js").sendError,c=n("./shared/jquery.js"),u=n("./shared/errors.js"),h=n("./shared/cookies.js");t.messages={openURL:function(e){if(o.isNativeApp()&&e.url&&s.isSiteRelativeUrl(e.url)){var t=new s.SiteURI(e.url);e.url=t.absolute()}if(!s.isSiteUrl(e.url)){var n=["external","links","browser","image_viewer"];if(!n.includes(e.target)){var d=n.join(", ");return void m("Non-quora URLs require one of these targets: "+d,"openURL",e)}}if("reload"!=e.target&&e.html&&o.isWKWebView()){if(window.open("")){var c="quora.com";document.domain=c,window.openURLHTML=e.html,e=r.cloneObject(e),e.html='<!DOCTYPE html><script>\ndocument.domain="'+c+'";\nwindow.document.write(window.opener.openURLHTML);\ndelete window.opener.openURLHTML;\n<\/script>'}}if(a.shouldUseMobileActionView){var u={};if(e.url&&(u.url=e.url),e.html&&(u.html=e.html),e.showVideoEditor&&(u.showVideoEditor=e.showVideoEditor),"modal"==e.target&&o.isNativeApp())return void l.send("showActionView",u)}i.sendMessageToClient("openURL",e)},requestReview:function(e){o.isIOSApp()&&parseFloat(a.osVersion)>=10.3&&i.buildNumber>=968&&i.sendMessageToClient("requestReview",{})},setCookie:function(e){if(e.options&&e.options.expires){var t=e.options.expires;if(t instanceof Date){var n=t.getTime()-Date.now();e.options.expires=n/864e5}}i.sendMessageToClient("setCookie",e)},setPageAction:function(e){i.handleSetPageActionMessage(e)},setSwitcherBar:function(e){var t=e.items;if(t)for(var n=0;n<t.length;n++){var s=t[n];if(o.isIOSApp()){var l=s.imageURL;l&&0!=l.length||(s.imageURL=a.switcherBarDefaultImageURL)}r.iterItems(s,function(t,n){if(n!==undefined&&null!==n||(m("Sending undefined or null value for key = "+t,"setSwitcherBar",e),delete s[t]),"loading_placeholder"==t){var i=["feed","question","notif","profile","topic","tribe"];-1==c.inArray(n,i)&&(m("Sending invalid loading placeholder "+n,"setSwitcherBar",e),delete s[t])}})}i.sendMessageToClient("setSwitcherBar",e)},setUserIntDefault:function(e){p("setUserIntDefault",e)},setUserFloatDefault:function(e){p("setUserFloatDefault",e)},setUserStringDefault:function(e){p("setUserStringDefault",e)},setUserBooleanDefault:function(e){p("setUserBooleanDefault",e)},setUserJSONArrayDefault:function(e){p("setUserJSONArrayDefault",e)},setUserJSONObjectDefault:function(e){p("setUserJSONObjectDefault",e)},showAlert:function(e){e.cancelButtonIndex=0,i.sendMessageToClient("showAlert",e)},showActionSheet:function(e){var t=e.buttonTitles;if(t)for(var n=0;n<t.length;n++){var o=t[n];o!=undefined&&null!=o||(m("Sending undefined or null value for button title at index "+n,"showActionSheet",e),t[n]="")}i.sendMessageToClient("showActionSheet",e)},showNativeShareSheet:function(e){if(o.isIOSApp()){var t=e.content;if(_(t))return void m("Sending undefined or null value for 'content'",e);if(_(t.text))return void m("Sending undefined or null value for 'text'",e);if(_(t.url))return void m("Sending undefined or null value for 'url'",e);if(_(t.short_url))return void m("Sending undefined or null value for 'short_url'",e)}i.sendMessageToClient("showNativeShareSheet",e)},updateNextPageIndicator:function(e){delete window.needsRemoveInitialNextPageIndicator,f("updateNextPageIndicator",e,1143,["visible"])},webnodeServerCall:function(e){if(!a.ajaxServerCalls||e.appFields||!o.isNativeApp()||o.isUIWebView()||"sw:"==window.location.protocol&&1030==a.buildNumber)f("webnodeServerCall",e,1143,!1);else{var t={qapp:a.httpQAppHeader},n=e.post;delete e.post,"sw:"==window.location.protocol&&(e.url.startsWith("/")||e.url.startsWith("sw:"))?t["qapp-post"]=c.param(n):e.data=n,e.headers=t,e.xhrFields={withCredentials:!0},e.type="POST",e.dataType="json",e.complete=function(t){var n={};200==t.status?(n.response=t.responseJSON,n.success=!0):(n.success=!1,g(e,t)),i.invokeCallback(e.callbackId,n)},c.ajax(e)}},loginStateChanged:function(e){i.sendMessageToClient("loginStateChanged",e),o.isIOSApp()&&e.isLoggedIn&&setTimeout(n("./mobile_app2/crosstalk_login.js").syncLoggedInState,2e3)},disableAutoSignIn:function(e){i.sendMessageToClient("disableAutoSignIn",e),o.isIOSApp()&&n("./mobile_app2/crosstalk_login.js").disable()},uploadVideos:function(e){i.sendMessageToClient("uploadVideos",e),(o.isIOSApp()&&i.buildNumber<788||o.isAndroidApp()&&i.buildNumber<1237)&&e.callbackId&&i.invokeCallback(e.callbackId,{success:!0})},showActionView:function(e){if("heightPercent"in e){if("height"in e)return void m("Specify one of height or heightPercent","showActionView",e);var t=e.heightPercent;if(0>t||t>100)return void m("Invalid value for height percent","showActionView",e)}i.sendMessageToClient("showActionView",e)}};var p=function(e,t){!o.isAndroidApp()||i.buildNumber<1167?i.sendMessageToClient("setUserDefault",t):i.sendMessageToClient(e,t)},f=function(e,t,n,r){if(o.isAndroidApp()&&n<=i.buildNumber)if(r){var s=r[0]?t[r[0]]:undefined,a=r[1]?t[r[1]]:undefined;i.sendStringsToAndroid(e,s,a)}else i.sendStringsToAndroid(e,JSON.stringify(t));else i.sendMessageToClient(e,t)},m=function(e,t,n){if(a.debug)throw new Error(e);d(e,{messageName:t,data:n})},_=function(e){return e==undefined||null==e},g=function(e,t){if(a.shouldLogWebnodeServerCallFailure){var n="wscf";e.url.startsWith("/webnode2/")&&h.getCookie(n,function(i){var o=null,s=null;try{s=i.value||"",s.indexOf("%3D")>=0&&(s=decodeURIComponent(s));var l=r.atou(s)||"{}";o=JSON.parse(l),o.total=o.total||0,o.entries=o.entries||[],o.identifier=o.identifier||r.randomId();var d=e.data;if(o.entries.length<10&&s.length<2e3){var c={status:t.status,method:d.__method,hmac:d.__hmac,referring_action:d.referring_action,referring_controller:d.referring_controller,nid:a.nid,time:1e3*Date.now()};o.entries.push(c)}o.total++;var p=r.utoa(JSON.stringify(o));h.setCookie(n,p,{expires:1})}catch(e){h.setCookie(n,null);var f="Error logging webnode server call failure to cookie: "+e+' cookieValue: "'+s+'"';if(a.debug)throw e;u.logMobileJsError("ClientMessageError",f)}})}}},"./mobile_app2/message_definitions.js":function(e,t,n){var i=n("./mobile_app2/client.js"),o=n("./shared/client.js"),r=n("./shared/errors.js"),s={addContentSecurityPolicy:{params:{policy:{type:"string",required:!0},url:{type:"string",required:!0}},platforms:{ios:740}},addHash:{params:{hash:{type:"string",required:!0},onRemove:{type:"function"},immediate:{type:"boolean"}},platforms:{mweb:0}},addQuestion:{params:{url:{type:"string"},title:{type:"string"},placeholderText:{type:"string"},initialText:{type:"string"},submitButtonText:{type:"string"},isSubmit:{type:"boolean"},prefixText:{type:"string"},hideToggle:{type:"boolean"},toggleText:{type:"string"}}},addQuestionFailedWithError:{params:{}},addQuestionFailedWithResponse:{params:{question_resistance:{type:"boolean"},recheck_qr_on_submit:{type:"boolean"},qr_fix_title:{type:"string"},qr_example_improvements:{},qr_matched_phrase:{type:"string"},qr_continue_text:{type:"string"}}},addQuestionSucceededWithResponse:{params:{url:{type:"string"},html:{type:"string"},target:{type:"string"},qid:{type:"number"},existing:{type:"boolean"}}},broadcastAllWebViews:{params:{messageName:{type:"string",required:!0},data:{type:"object",required:!0}}},browserCrosstalk:{params:{url:{type:"string"}},platforms:{ios:624},supportsCallback:!0},cacheHTMLForURL:{params:{url:{type:"string",required:!0},html:{type:"string",required:!0},canonicalURL:{type:"string"},expiresSeconds:{type:"number"},priority:{type:"number"},waitForLoad:{type:"number"},hideLoadingIndicator:{type:"boolean"},prefetched:{type:"boolean"},persistent:{type:"boolean"}},platforms:{ios:0,android:0}},clearDeferredDeepLink:{params:{},platforms:{ios:1472,android:1730}},clearWKWebViewDiskAndMemoryCache:{params:{},platforms:{ios:584}},clearWebViewSearchBar:{params:{}},decryptCrosstalkData:{params:{data:{type:"string",required:!0}},platforms:{ios:724},supportsCallback:!0},deleteIndexData:{params:{},platforms:{ios:0}},disableAutoSignIn:{params:{},platforms:{android:0,ios:0}},dismiss:{params:{}},dismissModal:{params:{}},draftClearComplete:{params:{key:{type:"string"},success:{type:"boolean"}},platforms:{ios:0,android:0}},draftSaveComplete:{params:{success:{type:"boolean"}},platforms:{ios:0,android:0}},getCrosstalkPublicKey:{params:{},platforms:{ios:724},supportsCallback:!0},getDeferredDeepLink:{params:{},platforms:{ios:1472,android:1730},supportsCallback:!0},getLanguages:{params:{},platforms:{ios:930},supportsCallback:!0},getPushNotifSettings:{params:{},platforms:{android:1448,ios:0},supportsCallback:!0},getSavedCredentials:{params:{},platforms:{ios:0},supportsCallback:!0,handlerForCallback:"useSavedCredentials"},flushTextInput:{params:{},platforms:{ios:0},supportsCallback:!1},hapticVibration:{params:{},platforms:{android:1755,ios:1570},supportsCallback:!1},hideAskButton:{params:{},platforms:{android:0}},hideAskToolbar:{params:{}},hideInContextLoadingView:{params:{element:{type:"object"}},platforms:{mweb:0}},hideLoadingView:{params:{}},hideProgressBar:{params:{complete:{type:"boolean"}},platforms:{ios:420}},hideSearchInput:{params:{}},inputImage:{params:{action:{type:"string"},bid:{type:"number"},tid:{type:"number"},tribe_id:{type:"number"},allow_remove_image:{type:"boolean"},hide_take_photo:{type:"boolean","default":!1},allow_edit_photo:{type:"boolean","default":!0}},platforms:{ios:0,android:0}},interceptBack:{params:{},platforms:{android:0}},log:{params:{msg:{type:"string",required:!0},level:{type:"string",required:!0,"default":"warning"}},platforms:{ios:0}},loginStateChanged:{params:{isLoggedIn:{type:"boolean"},userInitiatedLogout:{type:"boolean","default":!1}}},openAppSettings:{params:{},platforms:{ios:0}},openLookbackRecorder:{params:{uid:{type:"number"}},platforms:{ios:0,android:0}},openURL:{params:{url:{type:"string"},html:{type:"string"},target:{type:"string"},hide_loading_indicator:{type:"boolean"},nux:{type:"boolean"},hide_search_bar:{type:"boolean"},hide_navigation_buttons:{type:"boolean"},loading_placeholder:{type:"string"},loading_placeholder_options:{type:"object"},placeholderURL:{type:"string"},position:{type:"object"},forceXWalk:{type:"boolean"},showVideoEditor:{type:"boolean","default":!1},linkActionBar:{type:"object"}}},PageReady:{params:{windowId:{type:"string"},subdomain:{type:"string"}}},prefetchTabs:{params:{},platforms:{ios:0,android:0}},QLocalStorageAllKeys:{params:{},platforms:{ios:0,android:0},supportsCallback:!0},QLocalStorageClear:{params:{},platforms:{ios:0,android:0},supportsCallback:!0},QLocalStorageGetItem:{params:{key:{type:"string"}},platforms:{ios:0,android:0},supportsCallback:!0},QLocalStorageItems:{params:{},platforms:{ios:0,android:0},supportsCallback:!0},QLocalStorageLength:{params:{},platforms:{ios:0,android:0},supportsCallback:!0},QLocalStorageRemoveItem:{params:{key:{type:"string"}},platforms:{ios:0,android:0},supportsCallback:!0},QLocalStorageSetItem:{params:{key:{type:"string"},value:{}},platforms:{ios:0,android:0},supportsCallback:!0},registerForMessage:{params:{messageName:{type:"string"}},platforms:{ios:0}},registerForPushNotifs:{params:{categories:{type:"object"}},platforms:{ios:0},supportsCallback:!0},reload:{params:{cacheEnabled:{type:"boolean"}}},removeHash:{params:{postRemove:{type:"function"}},platforms:{mweb:0}},removeURLFromCache:{params:{url:{type:"string"}},platforms:{ios:0,android:0}},requestReview:{params:{},platforms:{ios:968}},restoreState:{params:{key:{type:"string"}},platforms:{ios:0,android:0}},retrieveCookie:{params:{name:{type:"string"}},supportsCallback:!0},saveCredentials:{params:{email:{type:"string"},password:{type:"string"}},platforms:{ios:0,android:1245}},saveHTML:{params:{html:{type:"string",required:!0},creationTime:{type:"number"},maxAgeSeconds:{type:"number"}},platforms:{ios:644}},saveState:{params:{key:{type:"string"},value:{type:"object"}},platforms:{ios:0,android:0}},scrollToBottom:{params:{animated:{type:"boolean"}},platforms:{ios:1040,android:1443}},scrollToTop:{params:{animated:{type:"boolean"}}},selectionChanged:{params:{},platforms:{ios:334}},setBackgroundColor:{params:{red:{type:"number"},green:{type:"number"},blue:{type:"number"},alpha:{type:"number"}},platforms:{ios:0,android:0}},setCanonicalURL:{params:{url:{type:"string"}}},setCaretPos:{params:{selectionStart:{type:"number"}},platforms:{android:0}},setClipboard:{params:{text:{type:"string"},html:{type:"string"}},platforms:{ios:0}},setCookie:{params:{name:{type:"string",required:!0},value:{},options:{type:"object"}},supportsCallback:!0},setDefaultTabInfo:{params:{language:{type:"string"},feed:{type:"object"},openqs:{type:"object"},notifs:{type:"object"},more:{type:"object"},profile:{type:"object"},videos:{type:"object"},spaces:{type:"object"}},platforms:{ios:0,android:0}},setExperimentVariant:{params:{experiment:{type:"string"},variant:{},timestamp:{type:"number"}},platforms:{ios:0,android:0}},setLookbackEnabled:{params:{enabled:{type:"boolean"},shakeToRecord:{type:"boolean"},uid:{type:"number"}},platforms:{ios:0,android:0}},setModalHeadHTML:{params:{html:{type:"string"}},platforms:{ios:540,android:0}},setNativeConsoleLogVisibility:{params:{visible:{type:"boolean"},maxNumberOfLines:{type:"number"}},platforms:{ios:540,android:0}},setNativeDebuggable:{params:{debuggable:{type:"boolean"}},platforms:{android:0}},setPageAction:{params:{filter:{type:"object"},noRightButtons:{type:"boolean"},rightIconButtons:{type:"object"},rightTextButton:{type:"object"},title:{type:"string"},leftCloseButton:{type:"object"},visible:{type:"boolean"}}},setPageProperties:{params:{scrollable:{type:"boolean"},height:{type:"number"}},platforms:{ios:556,android:1318}},setProfilePhotoUrl:{params:{photoUrl:{type:"string"}},platforms:{ios:1472,android:1730}},setSwipeEnabled:{params:{enabled:{type:"boolean"}},platforms:{android:0}},setSwitcherBar:{params:{items:{type:"object"}}},setupEditor:{params:{hasDraft:{type:"boolean"}},platforms:{ios:334,android:0}},setUserDefault:{params:{key:{type:"string"},value:{}},platforms:{ios:0,android:0}},setUserStringDefault:{params:{key:{type:"string"},value:{type:"string"}},platforms:{ios:0,android:0}},setUserIntDefault:{params:{key:{type:"string"},value:{type:"number"}},platforms:{ios:0,android:0}},setUserFloatDefault:{params:{key:{type:"string"},value:{type:"number"}},platforms:{ios:0,android:0}},setUserBooleanDefault:{params:{key:{type:"string"},value:{type:"boolean"}},platforms:{ios:0,android:0}},setUserJSONObjectDefault:{params:{key:{type:"string"},value:{type:"object"}},platforms:{ios:0,android:0}},setUserJSONArrayDefault:{params:{key:{type:"string"},value:{type:"object"}},platforms:{ios:0,android:0}},shareCopyURL:{params:{url:{type:"string"},share_type:{type:"string"},target:{type:"object"},oid:{type:"number"},text:{type:"string"},error_title:{type:"string"},error_message:{type:"string"}},platforms:{ios:0,android:0},supportsCallback:!0},shareFacebook:{params:{url:{type:"string"},share_type:{type:"string"},target:{type:"object"},oid:{type:"number"},text:{type:"string"},error_title:{type:"string"},error_message:{type:"string"}},platforms:{mweb:0,ios:0},supportsCallback:!0},shareTextMessage:{params:{url:{type:"string"},share_type:{type:"string"},target:{type:"object"},oid:{type:"number"},text:{type:"string"},error_title:{type:"string"},error_message:{type:"string"}},platforms:{ios:0},supportsCallback:!0},shareTwitter:{params:{url:{type:"string"},share_type:{type:"string"},target:{type:"object"},oid:{type:"number"},text:{type:"string"},error_title:{type:"string"},error_message:{type:"string"}},platforms:{ios:0},supportsCallback:!0},showActionSheet:{params:{title:{type:"string"},buttonTitles:{type:"object"},buttonSubtitles:{type:"object"},destructiveButtonIndex:{type:"number"},selectedButtonIndex:{type:"number"},position:{type:"object"}},supportsCallback:!0,handlerForCallback:"actionSheetDismissed"},showActionView:{params:{html:{type:"string"},url:{type:"string"},height:{type:"number"},heightPercent:{type:"number"},title:{type:"string"},dismissable:{type:"boolean","default":!0},dragToDismiss:{type:"boolean","default":!0},showVideoEditor:{type:"boolean","default":!1},tapBackgroundToDismiss:{type:"boolean","default":!0}},supportsCallback:!0},showAlert:{params:{title:{type:"string","default":""},message:{type:"string","default":""},cancelButtonTitle:{type:"string"},otherButtonTitles:{type:"object"}},supportsCallback:!0,handlerForCallback:"alertButtonClicked"},showAskButton:{params:{buttonTitle:{type:"string"},anonToggleTitle:{type:"string"}}},showAskToolbar:{params:{text:{type:"string"},anonToggleText:{type:"string"},buttonText:{type:"string"},isSubmit:{type:"boolean"},enabled:{type:"boolean"},maxCharacterCount:{type:"number"},countWhenVisible:{type:"number"},countWhenWarning:{type:"number"},currentCount:{type:"string"}}},showContextMenu:{params:{position:{type:"object",required:!0}},platforms:{ios:744}},showInContextLoadingView:{params:{element:{type:"object"}},platforms:{mweb:0}},showKeyboard:{params:{},platforms:{android:0}},showLoadingView:{params:{}},presentInNewContainer:{params:{},platforms:{ios:1336,android:1774}},showNativeShareSheet:{params:{info:{type:"object"},content:{type:"object"},extra_actions:{type:"object"},share_subject:{type:"string"},share_text:{type:"string"},share_text_data:{type:"object"},message_share:{type:"object"},share_priority_packages:{type:"object"},target:{type:"object"},share_target:{type:"object"},share_type:{type:"string"},quora_message_data:{type:"object"},copy_data:{type:"object"},extra_buttons:{type:"object"},share_to_blog_data:{type:"object"},error_title:{type:"string"},error_message:{type:"string"}},platforms:{ios:414,android:1e3},supportsCallback:!0,handlerForCallback:"nativeShareSheetDismissed"},showOauthConnectDialog:{params:{provider:{type:"string"},url:{type:"string"},perms:{},scope:{type:"string"},server_google_id:{type:"string"}},supportsCallback:!0},showPMsg:{params:{message:{type:"string",required:!0},style:{type:"string","default":"success"},queued:{type:"boolean","default":!1},persistent:{type:"boolean","default":!0},duration:{type:"number","default":3e3},action:{type:"object"}},supportsCallback:!0,platforms:{android:1283,ios:828}},showProgressBar:{params:{},platforms:{ios:420}},showSearchInput:{params:{searchFocus:{type:"boolean"},searchCancelButton:{type:"boolean"},searchPlaceholderText:{type:"string"}}},showTwitterConnectDialog:{params:{url:{type:"string"}}},signupSplashPresented:{params:{},platforms:{ios:0}},switchInstance:{params:{instance_name:{type:"string"},host:{type:"string"},scheme:{type:"string"}},platforms:{ios:0,android:0}},tryAutoLogin:{params:{},platforms:{android:1682}},updateBadgeCount:{params:{debug:{type:"boolean"},timestamp:{type:"number"},value:{type:"number"},feed:{type:"number"},notifs:{type:"number"},openqs:{type:"number"},more:{type:"number"},profile:{type:"number"},videos:{type:"number"},silos:{type:"object"},inbox:{type:"number"}}},updateConfig:{params:{instance_name:{type:"string"},host:{type:"string"},scheme:{type:"string"},subdomain:{type:"string"},language:{type:"string"},default_subdomain:{type:"string"},default_language:{type:"string"}},platforms:{ios:0,android:0}},updateLookupText:{params:{text:{type:"string"},cursorPositionDelta:{type:"number"}}},updateNewStoriesButton:{params:{visible:{type:"boolean"},text:{type:"string"},use_new_ui:{type:"boolean"}}},updateNextPageIndicator:{params:{visible:{type:"boolean"}},platforms:{ios:0,android:0},supportsCallback:!0},updatePrefetchingIndicator:{params:{visible:{type:"boolean"},position:{type:"number"}},platforms:{ios:0,android:0},supportsCallback:!0},updatePushNotifCategories:{params:{categories:{type:"object"}},platforms:{ios:624}},updateSiloSwitcher:{params:{visible:{type:"boolean"},text:{type:"string"},silos:{type:"object"},showInNavBar:{type:"boolean"}},platforms:{ios:506,android:1127}},updateToolbar:{params:{buttons:{type:"object"},animation:{},tabbed:{type:"boolean"}}},webnodeServerCall:{params:{post:{type:"object"},url:{type:"string"},subdomain:{type:"string"},async:{type:"boolean"},callbackId:{type:"string"},xhrFields:{type:"object"},appFields:{type:"object"}}},setPostAuthURL:{params:{url:{type:"string"}},platforms:{ios:744}},canOpenURL:{params:{url:{type:"string"}},platforms:{ios:760},supportsCallback:!0},startReadingTimeLogging:{params:{passedData:{type:"object"}},platforms:{android:1225,ios:768}},showVideoEditor:{params:{uuid:{type:"string"},version:{type:"number"}},platforms:{android:1237,ios:772}},showVideoPlayer:{params:{uuid:{type:"string"}},platforms:{ios:800,android:1265}},uploadVideos:{params:{videoUuids:{type:"object",required:!0}},platforms:{android:1237,ios:772},supportsCallback:!0},getExistingVideos:{params:{},platforms:{android:1237,ios:772},supportsCallback:!0},getVideoThumbnail:{params:{uuid:{type:"string",required:!0}},platforms:{android:1237,ios:772},supportsCallback:!0},deleteVideo:{params:{uuid:{type:"string",required:!0}},platforms:{android:1237,ios:772},supportsCallback:!1},getVideoUploadingStatus:{params:{uuid:{type:"string",required:!0}},platforms:{android:1237,ios:772},supportsCallback:!0},getKeyboardLanguages:{params:{},platforms:{android:1265,ios:896},supportsCallback:!0},getVoiceInput:{params:{language:{type:"string",required:!0}},platforms:{android:1660},supportsCallback:!0},getPackageList:{params:{},platforms:{android:0},supportsCallback:!0},showImagePicker:{params:{pageTitle:{type:"string",required:!0},id:{type:"string",required:!0},items:{type:"object",required:!0},doneButtonText:{type:"string",required:!0}},platforms:{android:1433,ios:984},supportsCallback:!1},logSignupForFacebook:{params:{method:{type:"string",required:!1}},platforms:{android:1448,ios:1050}},logSignupForTracking:{params:{method:{type:"string",required:!1}},platforms:{android:1677,ios:1336}},takeScreenshotAndShareURL:{params:{},platforms:{ios:1384},supportsCallback:!0},fetchMoreStoriesForFeed:{params:{},platforms:{ios:1480}}},a=t.sendError=function(e,t){var n=e;t&&(t.data&&(n+="\n Data: "+JSON.stringify(t.data)),t.messageName&&(n+="\n Message: "+t.messageName)),r.logMobileJsError("ClientMessageError",n)},l=function(){return o.isIOSApp()?"ios":o.isAndroidApp()?"android":"mweb"},d=t.messageIsSupported=function(e,t){if(!(e in s))return!1;var n=s[e].platforms;if(!n)return!0;var o=l();return o in n?!(n[o]>i.buildNumber&&(t&&a("Message not supported on older version "+i.buildNumber+" on platform "+o+". Please use 'messages.isSupported()' to check for availability.",t),1)):(t&&a("Message not supported on platform = "+o,t),!1)};t.validateMessage=function(e,t,n){var o={messageName:e,data:t};if(e in s){var r=s[e];if(!d(e,o))return!1;var l=r.params;if(!l)return a("Message not sent - missing parameters documentation.",o),!1;for(var c in t)c in l||(a("Message does not support parameter '"+c+"'.",o),delete t[c]);for(var u in l){u in t&&t[u]==undefined&&delete t[u];var h=l[u];if(!(u in t)&&"default"in h&&(t[u]=h["default"]),u in t&&h.type&&typeof t[u]!==h.type&&(a("Parameter '"+u+"' expected type '"+h.type+"', '"+typeof t[u]+"' was given.",o),delete t[u]),!(u in t)&&h.required)return a("Required parameter  '"+u+"' not given.",o),!1}return n&&(r.supportsCallback?r.handlerForCallback?i.registerOneTimeMessageHandler(r.handlerForCallback,n):t.callbackId=i.registerCallback(n):a("Callback not supported.",o)),!0}return a("Message not sent - missing documentation.",o),!1}},"./mobile_app2/messages.js":function(e,t,n){var i=n("./mobile_app2/client.js"),o=n("./mobile_app2/message_definitions.js"),r=n("./shared/util.js"),s=n("./mobile_app2/custom.js").messages,a=n("./settings.js"),l=["loginStateChanged","setDefaultTabInfo","updateBadgeCount","updateConfig","setExperimentVariant"];t.isSupported=function(e){return o.messageIsSupported(e,null)},t.send=function(e,t,n){if(t||(t={}),!a.isAnonPage||!l.includes(e)){var d=r.cloneObject(t);if(o.validateMessage(e,d,n))return e in s?void s[e](d):void i.sendMessageToClient(e,d)}}},"./mobile_app2/modals.js":function(e,t,n){var i=n("./shared/client.js"),o=n("./shared/core/component.js"),r=n("./mobile_app2/page_cloner.js"),s=n("./mobile_app2/client.js"),a=n("./shared/client_log.js"),l=n("./mobile_app2/util.js"),d=n("./shared/util.js"),c=n("./shared/jquery.js"),u=n("./settings.js"),h=n("./gating.js"),p=n("./mobile_app2/messages.js"),f=n("./shared/errors.js"),m=n("./shared/siteuri.js").URI;t.showFromParentComponent=function(e,t,n,o,a){var c,m=h.force_mobile_app_modals,_=t.children();1!=_.length&&f.logJsError("page cloner found "+_.length+" children, expected 1");var g=_[0];if(i.isAndroidApp()||"android"==m)c=r.renderBody(e,g),s.sendStringsToAndroid("showModalWithHtml",c,n);else{c=r.renderPage(e,g);var v=d.extend(a||{},{url:n,html:c,target:o||u.defaultMobileAppTarget});try{v.position=l.positionForElement(t.$link.get(0))}catch(e){}p.send("openURL",v)}};var _=t.modalUrl=function(e,t,n,i){var r={method:t,hmac:e,kwargs:JSON.stringify(n)},s=i.__extra_args&&i.__extra_args.nid_override,l=u.isAnonPage?"/modal/anonymous?":"/modal?",d=s!==undefined?s:u.nid,h={subdomainName:u.nidToSubdomainMap[String(d)]},p=a.getElemMetadata(o.getAnyElement(i));p.referring_controller=u.controller,p.referring_action=u.action;var f={params:btoa(JSON.stringify(r)),__clog:JSON.stringify(p)};return m(l+c.param(f),h).absolute()},g=t.editorParams=function(){var e={};return i.isAndroidApp()&&s.buildNumber>=1115&&(e.forceXWalk=!0),e};t.showFromServerCall=function(e,t,n,i,o){var r=d.extend({target:"modal",url:_(t,n,i,e)},o);["load_editor_modal","load_add_modal","load_edit_modal"].indexOf(n)>=0&&d.extend(r,g()),p.send("openURL",r)}},"./mobile_app2/page_cloner.js":function(e,t,n){var i=n("./shared/core/component.js"),o=n("./shared/errors.js"),r=n("./shared/util.js"),s=n("./shared/client.js"),a=n("./shared/inline_css.js"),l=n("./settings.js"),d=n("./mobile_app2/client.js"),c=n("./mobile_app2/messages.js"),u=n("./shared/broadcast.js"),h=n("./shared/events/index.js"),p=n("./gating.js"),f=function(e){var t={_parents:"parents",_hmacs:"hmacs",_children:"children",_domids:"domids"};l.debug&&(t._debugInfo="debugInfo");for(var n={},o=Object.keys(t),r=0;r<o.length;r++){for(var s=o[r],a={},d=0;d<e.length;d++){var c=e[d];a[c]=i[s][c]}n[t[s]]=a}return n},m=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],s=i._components[r];if(s&&!s.isVirtual){var a=s.__initDataArray;s._rerendering&&(a[5].rerenderRace=!0),t.push(a),null===a[4].serialized_component&&o.logJsError("page_cloner encountered null serialized component",JSON.stringify(a))}}return t},_=function(e){var t=i.getAllDvars(e);delete t.disableOnload;var n=[];return n.push(['var rootComponent = coreComponent._safeGetComponentByCID("',e.cid,'");']),n.push(["rootComponent.__dvars__ = ",JSON.stringify(t),";"]),n},g=function(e){var t=n("./shared/client_log.js"),i=t.getElemMetadata(e),o=['var clientLog = require("shared/client_log");'];return o.push(["var metadata = ",JSON.stringify(i),";"]),o.push(["clientLog.setGlobalMetadataFromObject(metadata);"]),o},v=[];h.GlobalProxy.subscribe(h.Types.ANSWER_VOTE_STATE,function(e){v.push(e)}),h.GlobalProxy.subscribe(h.Types.QUORA_SHARE_VOTE_STATE,function(e){v.push(e)});var b=function(){return["window.Q.eventsToReplayOnLoad = ",JSON.stringify(v),";"]},y=function(e){var t=e.cid,n=i.getDescendantCids(t),o=u.getDataForCids(n),r=[f(n),m(n),!0,o[0],o[1]];return[b(),'var webnode = require("shared/core/webnode");',"var args = ",JSON.stringify(r),";","webnode.initialize2.apply(null, args);",'var coreComponent = require("shared/core/component");',_(e)]},w=function(e){return["<!DOCTYPE html>","<html>",e,"</html>"]},E=function(e,t){return t=t?' class="'+t+'" ':"",["<body",t,">",e,"</body>"]},T=function(e){return["<head>",e,"</head>"]},S=function(e){return['<script type="text/javascript">',e,"<\/script>"]},C=function(e){return['<style type="text/css">',e,"</style>"]},x=function(e){return['require.whenReady("shared/main-loaded", function() {',e,"});"]},k=function(){for(var e=[],t=0;t<document.styleSheets.length;t++){var n=document.styleSheets[t];n.href&&e.push(n.href)}return e},A=function(e){for(var t=0;t<document.styleSheets.length;t++){var n=document.styleSheets[t].ownerNode;n.parentElement.removeChild(n)}a.removeFromPage(e)},I=function(e,t){var n=e.length;if(0==n)return void t();for(var i=function(){0==(n-=1)&&t()},o=0;o<e.length;o++){var r=document.createElement("link");r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",e[o]),r.onload=i,r.onerror=i,document.head.appendChild(r)}},O=function(){return C("html body { display: none; }")},L=function(){return S([x(['require("mobile_app2/page_cloner").fixBodyStyles(',JSON.stringify(k()),",",JSON.stringify(a.getData()),", function() {",'    document.body.style.display = "initial";',"});"])])};t.fixBodyStyles=function(e,t,n){if(0!==t.length)return void A(function(){a.injectData(t),n()});var i=k();if(r.jsonEqual(i,e))return void n();A(function(){I(e,n)})};var D=function(e){for(var t=[],n=0;n<e.length;n++)Array.isArray(e[n])?Array.prototype.push.apply(t,D(e[n])):t.push(e[n]);return t},M=function(e){return D(e).join("")},P=document.head.innerHTML,N=function(){return T([P,O(),a.getCssLoaderIfExists()])},j=function(){return M(w([N(),E(" ")]))},B=function(){return['var settings = require("settings");',"settings.defaultMobileAppTarget = null;","settings.isClonedPage = true;",['settings.controller = "',l.controller,'";'],['settings.action = "',l.action,'";'],['settings.windowId = "',l.windowId,'";']]},R=function(){var e=JSON.stringify(p);return["require.installPageProperties && require.installPageProperties(",JSON.stringify(l),", ",e,");"]},U=function(){return["require.assertPagePropertiesInstalled && require.assertPagePropertiesInstalled()"]},H=function(e,t,n){var i=e.outerHTML;return E([S(R()),S(x(B())),L(),['<div class="PageWrapper" id="page_wrapper">',i,"</div>"],S(x(g(e))),S(U()),S(x(y(t)))],n?document.body.className+" no_page_wrapper":document.body.className)};t.renderBody=function(e,t,n){return M(H(e,t,n))},t.renderPage=function(e,t,n){return M(w([N(),H(e,t,n)]))};var q=!1;t.maybeSendHead=function(){var e="android"==p.force_mobile_app_modals;!q&&(s.isAndroidApp()||d.buildNumber>=540||e)&&(e?d.sendMessageToClient("setModalHeadHTML",{html:j()}):c.send("setModalHeadHTML",{html:j()}),q=!0)},t.markComponentAsRerendering=function(e){e._rerendering=!0}},"./mobile_app2/qlocalstorage.js":function(e,t,n){var i=(n("./mobile_app2/client.js"),n("./mobile_app2/messages.js"));t.clear=function(e){i.send("QLocalStorageClear",{},e)},t.getItem=function(e,t){i.send("QLocalStorageGetItem",{key:e},t)},t.items=function(e){i.send("QLocalStorageItems",{},e)},t.length=function(e){i.send("QLocalStorageLength",{},e)},t.allKeys=function(e){i.send("QLocalStorageAllKeys",{},e)},t.removeItem=function(e,t){i.send("QLocalStorageRemoveItem",{key:e},t)},t.setItem=function(e,t,n){i.send("QLocalStorageSetItem",{key:e,value:t},n)}},"./mobile_app2/tab_titles.js":function(e,t,n){var i=n("./settings.js");t.tabTitles=i.formatted_tab_titles},"./mobile_app2/util.js":function(e,t,n){function i(e){var t=/^\s+/,n=/\s+$/;return e.trim?e.trim():e.replace(t,"").replace(n,"")}function o(e){return e.ownerDocument||e}var r=n("./mobile_app2/click_handlers.js"),s=n("./shared/client.js"),a=n("./mobile_app2/messages.js"),l=t.safeClickHandler=r.safeClickHandler;t.longPressHandler=r.longPressHandler,t.safeClickHandlerForElements=function(e,t){for(var n=0;n<e.length;++n)l(e[n],t)};var d=t.hasClass=function(e,t){return!!e&&-1!=(" "+(e.className||"")+" ").indexOf(" "+t+" ")};t.addClass=function(e,t){e&&!d(e,t)&&(e.className=(e.className||"")+" "+t)},t.removeClass=function(e,t){e&&(e.className=i((" "+(e.className||"")+" ").replace(" "+t+" "," ")))},t.findParent=function(e,t){return c(e,function(e){return d(e,t)})},t.positionForElement=function(e){for(var t=0,n=0,i=e.offsetWidth,o=e.offsetHeight;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{left:t,top:n,width:i,height:o}},t.isTruncatedNumber=function(e){return/[kmb]$/.test(e)};var c=function(e,t){for(var n=o(e).documentElement;e&&e!==n;e=e.parentNode)if(t(e))return e};t.encodeMap=function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];null!==i&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}return t.join("&")},t.GET=function(){var e={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,n,i){e[n]=i}),e},t.findNodeByClass=function(e,t){for(var n=!1;e.parentNode;){if(e.classList.contains(t)){n=e;break}e=e.parentNode}return n},t.findTargetIndexInNodes=function(e,t){for(var n;e&&e.parentNode&&-1===(n=Array.prototype.indexOf.call(t,e));)e=e.parentNode;return n},t.copyCSSStyle=function e(t,n){for(t.style.cssText+=window.getComputedStyle(n).cssText,t=t.firstChild,n=n.firstChild;t&&3!==t.nodeType;)e(t,n),t=t.nextSibling,n=n.nextSibling},t.scrollToView=function(e,t){t=t||0,document.body.scrollTop=e.offsetTop-t+e.offsetHeight/2},t.focusInput=function(e){e.focus(),s.isAndroidApp()&&a.send("showKeyboard")},t.toggleClass=function(e,t){function n(e){var n=e.classList.contains(t)?"remove":"add";e.classList[n](t)}e.length===undefined?n(e):Array.prototype.forEach.call(e,n)}},"./mobile_app2/view/mobile/add_question.js":function(e,t,n){var i=n("./shared/jquery.js"),o=n("./mobile_app2/client.js"),r=n("./shared/client.js"),s=n("./mobile_app2/app/view/common.js"),a=n("./mobile_app2/view/page_wrapper.js"),l=n("./shared/core/component.js").Component,d=n("./mobile_app2/messages.js"),c=n("./shared/history_stack.js"),u=n("./unified_view/question/ask_multi_modal.js").AskMultiModal,h=n("./shared/window_manager.js");t.mobileWebLookupBarHeader=null,t.MobileWebLookupBarHeader=l.extend({onLoad:function(){var e=this;t.mobileWebLookupBarHeader=e,e.shouldRefineText=!1,e.input=this.$id("@mweb_lookup_bar_input").get(0),e.input.value=e.question_prefix,e.input.addEventListener("input",function(t){e.refineText(!1),e.onTextChange()}),e.input.addEventListener("keydown",function(t){var n=t||window.event,i=this;return 13===n.keyCode&&e.input.blur(),i.selectionStart<e.question_prefix.length?(t.preventDefault(),!1):i.selectionStart!==e.question_prefix.length||8!==n.keyCode&&37!==n.keyCode?void 0:(t.preventDefault(),!1)}),e.is_standalone&&e.input.focus(),e.input.addEventListener("focus",function(){o.handleMessage("addQuestionBarInputFocus",!0)}),e.input.addEventListener("blur",function(){o.handleMessage("addQuestionBarInputFocus",!1)}),e.backButton=this.$id("@mweb_lookup_bar_back_button").get(0),e.backButton.addEventListener("click",function(){e.backButtonTrigger()})},setRefineText:function(e){var t=this.shouldRefineText;this.shouldRefineText=e,this.shouldRefineText&&!t&&this.refineText(!0)},refineText:function(e){if(this.shouldRefineText){var t=this.opening_question_punctuation,n=this.closing_question_punctuation,i=this.question_prefix,o=0,r=this.capitalize(this.getText());if(r===t+n||r===t&&t.length>0||r===n&&n.length>0)return void d.send("updateLookupText",{text:i,cursorPositionDelta:0});e&&-1===r.indexOf(n)&&(r+=n),e&&-1===r.indexOf(t)&&(r=t+r,o=t.length),d.send("updateLookupText",{text:i+r,cursorPositionDelta:o})}},capitalize:function(e){return e?e=e.charAt(0).toUpperCase()+e.slice(1):e},getText:function(){var e=this.input.value;return 0===e.indexOf(this.question_prefix)?e.slice(this.question_prefix.length):e},onTextChange:function(){o.handleMessage("addQuestionBarTextDidChange",{text:this.getText()})},focus:function(){this.input.focus()},backButtonTrigger:function(){var e=this;e.is_standalone?window.history.back():(d.send("updateLookupText",{text:"",cursorPositionDelta:0}),e.onTextChange(),a.showPageWrapper("main_page_wrapper"),c.skipBack(1))},addHash:function(){var e=this;c.pushState(e.backButtonTrigger.bind(e))}}),t.MobileWebLookupBarFooter=l.extend({onLoad:function(){var e=this;t.addQuestion=e,e.button=e.child("lookup_bar_button"),e.anonText=e.$id("@anon_text").get(0),e.anonCheckbox=e.$id("@anon_checkbox").get(0),e.anonWrapper=e.$id("@anon_wrapper").get(0),e.text=e.$id("@lookup_bar_text").get(0),e.wrapper=e.$id("@lookup_bar_footer_wrapper").get(0),e.counterWrapper=e.$id("@counter").get(0),e.isSubmit=!1,e.questionText="",e.queryLength=0,e.button.onPressed(e.open_ask_modal.bind(e)),e.length_limit&&(o.registerMessageHandler("addQuestionBarTextDidChange",function(t){e.child("counter").updateCounter(t.text.length),e.queryLength=t.text.length,t.text?e.isSubmit&&(t.text.length>e.length_limit?e.fakeDisabled(!0):e.fakeDisabled(!1)):(e.setEnabled(!0),e.fakeDisabled(!1),e.isSubmit=!1)}),o.registerMessageHandler("addQuestionBarInputFocus",function(t){e.isSubmit&&(t?e.child("counter").show():e.child("counter").hide())}))},setEnabled:function(e){this.button.setDisabled(!e)},fakeDisabled:function(e){e?i(this.button.$id("@button")).addClass("fake_disabled"):i(this.button.$id("@button")).removeClass("fake_disabled")},open_ask_modal:function(){u.open(this,"ask_question",{initial_query:t.mobileWebLookupBarHeader.getText(),is_anon:this.isAnonymous()})},showAskToolbar:function(e){i(this.wrapper).removeClass("hidden"),this.hideOptionalElements(),e.anonToggleText&&(this.anonText.innerHTML=e.anonToggleText,i(this.anonWrapper).removeClass("hidden")),e.text&&(this.text.innerHTML=e.text,i(this.text).removeClass("hidden")),e.buttonText&&this.button.updateLabel(e.buttonText),this.isSubmit&&this.length_limit&&i(this.counterWrapper).removeClass("hidden"),this.isSubmit=e.isSubmit,t.mobileWebLookupBarHeader.setRefineText(this.isSubmit)},hideAskToolbar:function(){i(this.wrapper).addClass("hidden"),t.mobileWebLookupBarHeader.setRefineText(!1),this.length_limit&&(i(this.counterWrapper).addClass("hidden"),this.fakeDisabled(!1),this.setEnabled(!0))},hideOptionalElements:function(){i(this.anonWrapper).addClass("hidden"),i(this.text).addClass("hidden")},isAnonymous:function(){return this.anonCheckbox.checked},onSuccessWithResponse:function(e){e.url?e.html?d.send("openURL",{url:e.url,html:e.html}):h.navigateTo(e.url):d.send("dismiss")},showErrorMessage:function(){d.send("hideLoadingView"),s.showAlert({title:this.error_title,message:this.error_message})},onFailureWithResponse:function(e){d.send("hideLoadingView");var t="";e.qr_example_improvements&&e.qr_example_improvements.length>0&&(t=e.qr_example_improvements[0]),e.question_resistance&&s.showAlert({title:e.qr_fix_title,message:t}),this.setEnabled(!0)},onFailureWithError:function(){this.setEnabled(!0)}}),t.shouldGoToFullTextSearch=!1,t.addQuestionCallbackReceiver=null,t.AddQuestionSubmitHandler=l.extend({submitData:null,onLoad:function(){var e=this;o.registerMessageHandler("addQuestionSubmit",function(n){if(t.shouldGoToFullTextSearch){var i=n.question_text,o="/search?q="+encodeURIComponent(i).replace(/%20/g,"+");d.send("addQuestionFailedWithResponse"),h.navigateTo(o)}else{var r=e.additionalSubmitKwargs?e.additionalSubmitKwargs:{};for(var s in n)r[s]=n[s];e.submitData=r,e.serverCall("submit").kwargs(r).success(function(t){t.question_resistance||"error"===t.result?e.resistanceCallback(t):e.submitSuccessCallback(t)}).error(e.submitErrorCallback).send()}})},resistanceCallback:function(e){if(t.addQuestionCallbackReceiver&&t.addQuestionCallbackReceiver.resistanceCallback(e),"error"===e.result)if("confirm_email"===e.errorMessage){var n=this;n.createModal("email_confirmation_dialog_contents").onSubmit(function(){n.serverCall("resend_email_confirmation").send()}).show()}else s.showAlert({title:this.error_title,message:e.errorMessage});d.send("addQuestionFailedWithResponse",e)},submitSuccessCallback:function(e){var n=this;n.isAnonymous()&&n.should_action_view_anon_question&&r.isNativeApp()?d.send("showActionView",{url:e.url,dragToDismiss:!1}):(t.addQuestionCallbackReceiver&&t.addQuestionCallbackReceiver.submitSuccessCallback(e),d.send("addQuestionSucceededWithResponse",e))},submitErrorCallback:function(){t.addQuestionCallbackReceiver&&t.addQuestionCallbackReceiver.submitErrorCallback(),d.send("addQuestionFailedWithError")},isAnonymous:function(){return this.submitData.is_anonymous}})},"./mobile_app2/view/page_wrapper.js":function(e,t,n){var i=n("./shared/jquery.js"),o=n("./shared/eventemitter.js"),r=new o.EventEmitter;t.onChange=function(e){r.on("change",e)},t.isActive=function(e){return!i("#"+e).hasClass("hidden")},t.showPageWrapper=function(e){var t=["main_page_wrapper","lookup_bar_page_wrapper","modal_page_wrapper"],n=document.getElementById("page_wrapper");"main_page_wrapper"==e?i(n).removeClass("nonav"):i(n).addClass("nonav");var o=document.getElementById("logged_out_footer");if(o){var s=i(o);"main_page_wrapper"==e?(s.removeClass("hidden"),s.css("visibility","visible")):(s.addClass("hidden"),s.css("visibility","hidden"))}t.forEach(function(t){var n=document.getElementById(t),o=i(n);t==e?(o.removeClass("hidden"),setTimeout(function(){i(window).scrollTop(o.data("scroll-top")||0),o.css("visibility","visible")},0)):(o.hasClass("hidden")||o.data("scroll-top",i(window).scrollTop()),o.addClass("hidden"),o.css("visibility","hidden"))}),r.trigger("change",[e])}},"./mobile_app2/web_app_shim.js":function(e,t,n){var i=n("./mobile_app2/client.js"),o=n("./shared/cookies.js"),r=n("./shared/jquery.js"),s=n("./shared/loading.js"),a=n("./settings.js"),l=n("./shared/facebook.js"),d=n("./shared/window_manager.js"),c=n("./unified_view/qtext2/toolbar.js"),u=n("./mobile_app2/view/mobile/add_question.js"),h=n("./mobile_app2/web_app_shim/api_call.js"),p=n("./mobile_app2/web_app_shim/alert.js"),f=n("./mobile_app2/web_app_shim/action_sheet.js"),m=n("./shared/history_stack.js"),_=n("./mobile_app2/web_app_shim/native_app_modal_simulator.js"),g=n("./mobile_app2/messages.js"),v=/\.?\bmobile\..*quora\.com$/i,b=v.exec(window.location.host),y={},w=[],E=!1,T=!1,S="showSearchInputSearchBar",C=null,x=1e3,k=!1,A=null,I=null;t.getFixedHeaderOffset=function(){var e=document.querySelectorAll("#header .fixed_header");return 1===e.length?e[0].offsetHeight:0},t.sendMessageToClient=function(e,t){e=e.replace(/\:$/,""),y.hasOwnProperty(e)&&y[e](t)},t.sendStringsToAndroid=function(e,t,n){"showModalWithHtml"==e&&(_.swapInBody(t),_.moveModalToFront())},y.setModalHeadHTML=function(e){_.loadHtmlIntoModal(e.html)};var O=function(e){if(!e)return e;var t=document.createElement("a");return t.href=e,!b||v.exec(t.host)||("www."===t.host.substr(0,4)&&(t.host=t.host.substr(4)),t.host="mobile."+t.host,v.exec(t.host))?t.href:(d.navigateToWeb(e,!1),null)};y.openURL=function(e){var t=e.url,n=e.target,i=O(t);if(null!==i&&(t=i),!a.isLoggedIn){var o=e.url.split("?")[0];M("toRequestPath"),D("toRequestPath",o,{expires:0,expiresMins:30,path:"/"})}if(e.html&&a.debug)return _.loadHtmlIntoModal(e.html),void _.moveModalToFront();var r="external"===n;d.navigateToWeb(t,r)},y.reload=function(e){null===A?window.location.reload():y.openURL({url:A})},y.setCanonicalURL=function(e){A=e.url},y.showActionView=function(e){g.send("openURL",{url:e.url})},y.webnodeServerCall=function(e){e.type="POST",e.dataType="json",e.data=e.post,e.complete=function(t){var n={};200==t.status?(n.response=t.responseJSON,n.success=!0):n.success=!1,i.invokeCallback(e.callbackId,n)},r.ajax(e)},y.broadcastAllWebViews=function(e){i.handleMessage(e.messageName,e.data)},y.showSearchInput=function(e){if(null===document.getElementById(S)){var t=document.createElement("div");t.className="search_bar_container";var n=document.createElement("input");n.id=S,n.className="search_bar";var o=e.searchPlaceholderText||"";n.placeholder=o,t.appendChild(n),document.body.className+=" has_search_input",n.addEventListener("keyup",function(){i.handleMessage("searchQueryChanged",{query:n.value})});var r=function(){n.addEventListener("input",function e(t){i.handleMessage("searchQueryChanged",{query:n.value}),t.target.removeEventListener(t.type,e)})};n.addEventListener("paste",r),n.addEventListener("cut",r),document.getElementById("page_wrapper").insertBefore(t,document.getElementById("main_page_wrapper")),e.searchFocus&&n.focus()}},y.clearWebViewSearchBar=function(e){var t=document.getElementById(S);t.value="",i.handleMessage("searchQueryChanged",{query:t.value})},y.hideSearchInput=function(){var e=document.getElementById(S);if(e){var t=e.parentNode;t.parentNode.removeChild(t),r(document.body).removeClass("has_search_input")}};var L=function(e,t){for(var n=t,o=t+window.innerHeight,r=0;r<w.length;r++){var s=w[r];s.triggerTop<o&&n<s.triggerBottom&&(i.invokeCallback(s.callbackId,"{}"),w.splice(r,1))}};y.registerScrollPositionCallback=function(e){if(e.triggerTop&&e.triggerBottom&&e.callbackId&&"number"==typeof e.triggerTop&&"number"==typeof e.triggerBottom){T||(document.addEventListener("scroll",function(){E=!0}),setInterval(function(){if(E){E=!1;var e=document.documentElement,t=(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0),n=(window.pageYOffset||e.scrollTop)-(e.clientTop||0);L(t,n)}},100),T=!0);var t={callbackId:e.callbackId,triggerTop:e.triggerTop,triggerBottom:e.triggerBottom};w.push(t)}else console.log("scroll position callback must specify a callbackId and float values for triggerTop and triggerBottom. Data was:",e)},y.updateNewStoriesButton=function(e){var t,n="updateNewStoriesButton";null===document.getElementById(n)&&(t=document.createElement("div"),t.id=n,t.className="new_stories_button",t.style.display="none",document.getElementById("mweb_new_stories_button_wrapper").appendChild(t)),t=document.getElementById(n),e.visible&&e.text!==undefined&&(t=document.getElementById(n),t.innerHTML=e.text,t.style.display="inline-block",r(t).on("click",function(){r(t).addClass("animate_out"),setTimeout(function(){t.style.display="none",r(t).removeClass("animate_out"),i.handleMessage("newStoriesButtonTapped")},200)})),e.visible===undefined||e.visible||(t.style.display="none")},y.scrollToTop=function(e){var t=function(e,t,n,i){return(e/=i/2)<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)},n=window.pageYOffset,i=0-n,o=0,r=20,s=function(){o+=r,o<200?(window.scroll(0,t(o,n,i,200)),setTimeout(s,r)):window.scroll(0,0)};s()};var D=function(e,t,n){o.setCookieOnDocument(e,t,n)},M=function(e){o.setCookieOnDocument(e,"",{expires:-1})};y.setCookie=function(e){e.value?D(e.name,e.value,e.options):M(e.name),e.callbackId&&i.invokeCallback(e.callbackId,"{}")};var P=function(e){return o.getCookieOnDocument(e)};y.retrieveCookie=function(e){e.name&&e.callbackId&&i.invokeCallback(e.callbackId,{name:e.name,value:P(e.name)})};var N=function(){i.handleMessage("tick")},j=function(){null===C&&(C=setInterval(function(){N()},x))},B=!1;y.PageReady=function(e){if(!k){if(k=!0,j(),!B){var t=document.getElementById("page_title");null!==t&&-1===a.non_logo_page_titles.indexOf(document.title)?r(t).text(document.title.slice(0,-8)):r("#logo").removeClass("hidden")}U(),i.handleMessage("pageReadyComplete")}};var R=function(){return document.getElementById("mweb_modal_close_button")},U=function(){var e=R();e&&r(e).on("click",function(e){y.dismiss(),e.preventDefault()})};y.showAlert=function(e){p.showAlert(e)},y.showActionSheet=function(e){f.showActionSheet(e)},y.loginStateChanged=function(e){var t=e.isLoggedIn||a.isLoggedIn,n=O(a.webBaseUrl);if(t){var i=P("login_redirect_url");if(i&&e.isLoggedIn){var r=5/1440;o.setCookie("login_redirect_url",i,{expires:r})}else i=n;y.openURL({url:i})}};var H=function(e){var t=document.getElementById("page_title");null!==t&&(t.innerHTML=e.title,r("#logo").addClass("hidden"),B=!0)};y.setPageAction=function(e){null!==document.getElementById("navigation_button")&&(e.rightTextButton&&W(e.rightTextButton),e.rightIconButtons&&G(e.rightIconButtons),e.noRightButtons&&Q(),e.title&&q(e),e.filter&&z(e.filter),e.leftCloseButton&&Y(e.leftCloseButton))};var q=function(e){H(e),!e.filter&&I&&I.url?z(I):r("#page_title").removeClass("hidden")},F=function(e,t){e["innerText"in e?"innerText":"textContent"]=t},$=function(e,t){!0===t?r(e).addClass("is_disabled"):r(e).removeClass("is_disabled")},W=function(e){te();var t=document.getElementById("navigation_button");r(t).removeClass("hidden"),r(t).removeClass("has_badge"),$(t,e.disabled),F(t,e.title);var n=document.getElementById("header_action_buttons");n&&r(n).addClass("hidden"),W.clickHandlerSet||(W.clickHandlerSet=!0,r(t).on("click",function(e){i.handleMessage("rightTextButtonPressed"),e.preventDefault()}))},G=function(e){te(),Q(),r("#header_action_buttons").removeClass("hidden");for(var t=0;t<e.length;t++){var n=e[t],i="right_icon_button_"+t,o=document.getElementById(i);r(o).removeClass("hidden"),$(o,n.disabled),F(o,n.iconChar),V(o,t)}},V=function(e,t){e.clickHandlerSet||(e.clickHandlerSet=!0,r(e).on("click",function(e){var n={buttonIndex:t};i.handleMessage("rightIconButtonPressed",n),e.preventDefault()}))},Q=function(){r("#navigation_button").addClass("hidden");var e,t=document.getElementById("header_action_buttons");if(t)for(e=0;e<t.children.length;e++){var n=t.children[e];"A"==n.nodeName.toUpperCase()&&r(t.children[e]).addClass("hidden")}},z=function(e){te(),I=e,r("#navigation_button").addClass("hidden");var t=document.getElementById("filter_button");r(t).removeClass("hidden");var n=document.getElementById("logo"),o=document.getElementById("page_title");n&&r(n).addClass("hidden"),o&&r(o).addClass("hidden"),r(t).addClass("is_filter"),J(t),e.badgeValue&&K(t,e),X(t,e),z.clickHandlerSet||(z.clickHandlerSet=!0,r(t).on("click",function(t){var n={action:"show"};i.handleMessage("filterButtonPressed",n),y.openURL({url:e.url}),t.preventDefault()}))},J=function(e){var t=e.getElementsByClassName("filter_text");if(t.length){var n=t[0];F(n,ee())}},K=function(e,t){if(""!==t.badgeValue){var n=document.createElement("span");n.className="badge_count",n.innerText=t.badgeValue,e.insertBefore(n,e.firstChild)}},X=function(e,t){var n=e.getElementsByClassName("filter_icon");if(n.length){n[0].innerText=t.iconChar}},Y=function(e){var t=R();if(t){var n=t.parentNode,i="non_dismissable_modal";e.nonDismissibleModal?r(n).addClass(i):r(n).removeClass(i)}},Z=function(){return document.getElementById("mweb_sub_header")},ee=function(){var e=document.getElementById("page_title");return null!==e?e.innerHTML:""},te=function(){var e=Z();e&&r(e).removeClass("hidden")};y.dismiss=y.dismissModal=function(e){D("reloadOnBack",1,{expires:0,expiresMins:1,path:"/"}),window.history.go(-1)},y.addHash=function(e){m.pushState(e.onRemove)},y.removeHash=function(e){m.popState(),e.postRemove&&e.postRemove()},y.updateBadgeCount=function(e){function t(e,t){var n=document.getElementById(e);null!==n&&(void 0!==t&&0!==t?(n.textContent=t,r(n).removeClass("hidden")):r(n).addClass("hidden"))}t("notifs_badge",e.notifs),t("open_qs_badge",e.openqs),t("profile_badge",e.profile),t("home_badge",e.feed)},y.showOauthConnectDialog=function(e){"facebook"===e.provider?l.onInit(function(){FB.login(function(t){t&&"connected"==t.status?i.invokeCallback(e.callbackId,{provider:"facebook",success:!0,access_token:t.authResponse.accessToken,accessToken:t.authResponse.accessToken,userID:t.authResponse.userID,expiresIn:t.authResponse.expiresIn}):i.invokeCallback(e.callbackId,{provider:"facebook",success:!1})},{scope:e.perms})}):y.openURL({url:e.url})},y.addQuestion=function(e){for(var t={},n=["title","hideToggle","toggleText","submitButtonText","placeholderText","initialText"],i=0;i<n.length;i++){var o=n[i];e.hasOwnProperty(o)&&(t[o]=e[o])}var s=e.url;s.indexOf("?")>-1?s+="&"+r.param(t):s+="?"+r.param(t),d.navigateTo(s)},y.addQuestionSucceededWithResponse=function(e){u.addQuestion.onSuccessWithResponse(e)},y.addQuestionFailedWithResponse=function(e){u.addQuestion.onFailureWithResponse(e)},y.addQuestionFailedWithError=function(){u.addQuestion.onFailureWithError()},y.showAskToolbar=function(e){u.addQuestion.showAskToolbar(e)},y.hideAskToolbar=function(){u.addQuestion.hideAskToolbar()},y.updateLookupText=function(e){var t=e.text,n=e.cursorPositionDelta||0,i=u.mobileWebLookupBarHeader,o=i.input.selectionStart+n,r=i.input.selectionEnd+n;i.input.value=t,t.length>0&&i.input.setSelectionRange(o,r)};var ne=n("./shared/Class.js").Class.extend({create:function(){this.view=document.createElement("div"),this.view.className="loading_view";var e=s.createDots();this.view.appendChild(e),this.visible=!1,this.preventScrolling=function(e){e.preventDefault()}},show:function(){this.view||this.create(),this.visible||(r(this.view).removeClass("animate_out"),this.visible=!0,document.body.appendChild(this.view),document.body.addEventListener("touchmove",this.preventScrolling))},hide:function(){var e=this;e.view&&e.visible&&(r(e.view).addClass("animate_out"),setTimeout(function(){e.visible=!1,null!==e.view.parentNode&&e.view.parentNode.removeChild(e.view),document.body.removeEventListener("touchmove",e.preventScrolling)},200))}}),ie=new ne;y.showLoadingView=function(){ie.show()},y.hideLoadingView=function(){ie.hide()},y.showInContextLoadingView=function(e){if(e.element.querySelectorAll("div.spinner_container").length>0)r(e.element.querySelectorAll("div.spinner_container")[0]).removeClass("hidden");else{var t=document.createElement("div");t.className="spinner_container";var n=s.createDots();t.appendChild(n),e.element.appendChild(t)}},y.hideInContextLoadingView=function(e){e.element.querySelectorAll("div.spinner_container").length>0&&r(e.element.querySelectorAll("div.spinner_container")[0]).addClass("hidden")},y.shareFacebook=function(e){FB.ui({method:"share",href:e.url},function(t){h.makeAPICall("share_log_facebook",{share_type:e.share_type,target:e.target}).send()})},y.updateToolbar=function(e){c.updateMobileWebShim(e)},window.addEventListener("pageshow",function(e){"1"===P("reloadOnBack")&&(D("reloadOnBack",0,{expires:0,expiresMins:1,path:"/"}),y.showLoadingView(),document.location.reload(!0))})},"./mobile_app2/web_app_shim/action_sheet.js":function(e,t,n){var i=n("./mobile_app2/client.js"),o=n("./shared/jquery.js"),r=n("./mobile_app2/messages.js"),s=[];t.showActionSheet=function(e){function t(e){p.appendChild(e)}function n(e){var n=document.createElement("div");n.innerHTML=e,n.className="action_view_title",t(n)}function a(e,t,n,s,a){var l=document.createElement("a");l.className="mweb_action_button",s&&(l.className+=" destructive"),a=a||!1,a&&(l.className+=" selected"),""!=t?(l.className+=" has_subtitle",l.innerHTML="<div class='u-font-weight--medium mweb_action_button_title'>"+e+"</div>",l.innerHTML+="<div class='u-text--gray-light'>"+t+"</div>"):l.innerHTML=e;var d=function(e){return function(){f=!0,r.send("removeHash",{postRemove:function(){i.handleMessage("actionSheetDismissed",{buttonIndex:e})}})}};o(l).on("click",d(n)),h.appendChild(l)}function l(e){e>w?(u.style.height="auto",h.style.height="100%"):(u.style.height=window.innerHeight+"px",h.style.height=window.innerHeight-p.offsetHeight+"px")}var d=e.noCancelButton||!1,c=document.createElement("div");c.className="modal_bg";var u=document.createElement("div");u.className="action_view_action_menu_container";var h=document.createElement("div");h.className="action_view_content";var p=document.createElement("div");p.className="action_view_header",d&&!e.title||u.appendChild(p),u.appendChild(h);var f=!1,m=function(){o(c).addClass("animate_out"),o(u).addClass("action-view-slide-out"),setTimeout(function(){document.body.removeChild(c),document.body.removeChild(u),document.body.style.overflowY=s.pop(),f||i.handleMessage("actionSheetDismissed",{buttonIndex:-1})},200)};r.send("addHash",{hash:"action_sheet",onRemove:m});var _=function(){r.send("removeHash")};if(o(c).on("click",_),!d){var g=document.createElement("span");g.className="action_view_close",o(g).on("click",_),t(g),e.title||(e.title="&nbsp")}e.title!==undefined&&e.title&&n(e.title);for(var v=0;v<e.buttonTitles.length;v++){var b=v===e.destructiveButtonIndex,y=v===e.selectedButtonIndex;e.buttonSubtitles?a(e.buttonTitles[v],e.buttonSubtitles[v],v,b,y):a(e.buttonTitles[v],"",v,b,y)}document.body.insertBefore(c,document.body.firstChild),document.body.insertBefore(u,document.body.firstChild),s.push(document.body.style.overflowY),document.body.style.overflowY="hidden";var w=u.offsetHeight;l(window.innerHeight),window.addEventListener("resize",function(){l(window.innerHeight)})}},"./mobile_app2/web_app_shim/alert.js":function(e,t,n){var i=n("./mobile_app2/client.js"),o=n("./shared/jquery.js"),r=n("./settings.js").interface_strings,s=n("./mobile_app2/messages.js");t.showAlert=function(e){function t(e,t,n){var r=document.createElement("a");r.className="mweb_action_button",n&&(r.className+=" is_cancel"),r.innerHTML=e;var a=function(e){return function(){u=!0,s.send("removeHash",{postRemove:function(){i.handleMessage("alertButtonClicked",{buttonIndex:e})}})}};o(r).on("click",a(t)),d.appendChild(r)}var n=document.createElement("div");n.className="modal_bg";var a=document.createElement("div");a.className="alert_container";var l=document.createElement("div");l.className="inner",a.appendChild(l);var d=document.createElement("div");d.className="alert",e.otherButtonTitles&&(0===e.otherButtonTitles.length?d.className+=" one_button":1===e.otherButtonTitles.length?d.className+=" two_buttons":e.otherButtonTitles.length>1&&(d.className+=" gt_two_buttons")),l.appendChild(d);var c=function(e){e.preventDefault()},u=!1,h=function(){o(a).addClass("animate_out"),o(n).addClass("animate_out"),setTimeout(function(){document.body.removeChild(n),document.body.removeChild(a),document.body.removeEventListener("touchmove",c),u||i.handleMessage("alertButtonClicked",{buttonIndex:-1})},200)};s.send("addHash",{hash:"alert",onRemove:h});var p=function(e,t,n){var i=document.createElement("div");i.className=t,i.innerHTML=e,n.appendChild(i)};e.title=e.title||"",e.message=e.message||"",""===e.message&&(e.message=e.title,e.title=""),p(e.title,"alert_title",d),p(e.message,"alert_message",d),e.otherButtonTitles||(e.otherButtonTitles=[r.ok]);for(var f=0;f<e.otherButtonTitles.length;f++)t(e.otherButtonTitles[f],f+1,!1);t(e.cancelButtonTitle||r.cancel,0,!0),document.body.insertBefore(n,document.body.firstChild),document.body.insertBefore(a,document.body.firstChild),document.body.addEventListener("touchmove",c)}},"./mobile_app2/web_app_shim/api_call.js":function(e,t,n){var i=n("./mobile_app2/client.js"),o=n("./shared/Class.js").Class.extend({__init__:function(e){return this.__success=null,this.__error=null,this.methodName=e,this},data:function(e){return this.data=e,this},success:function(e){return this.__success=e,this},error:function(e){return this.__error=e,this},send:function(){var e=this;i.handleMessage("makeApiCall",{data:e.data,methodName:e.methodName,callback:function(t){t.success?e.__success(t.value):e.__error()}})}});t.makeAPICall=function(e,t){return new o(e).data(t)}},"./mobile_app2/web_app_shim/modal.js":function(e,t,n){var i=n("./shared/Class.js").Class,o=n("./mobile_app2/messages.js"),r=n("./shared/core/component.js"),s=n("./shared/jquery.js"),a=n("./shared/util.js").extend,l=n("./shared/client_log.js"),d=n("./mobile_app2/view/page_wrapper.js"),c=n("./shared/events/index.js"),u="modal_page_wrapper",h=[],p=0,f=function(){return"modal_"+p++},m=function(e){d.showPageWrapper(u);for(var t=0;t<h.length;t++)h[t].hide();var n=h.indexOf(e);-1==n?h.push(e):n!=h.length-1&&(h.splice(n,1),h.push(e)),e.show()};t.dismissActiveModal=function(e){if(h.length){h.pop().removeElement(),e&&e.reopenMultiModal?c.GlobalProxy.dispatch({type:c.Types.MULTIMODAL_UNHIDE_ACTIVE_STEP,payload:{}}):h.length?m(h[h.length-1]):d.showPageWrapper("main_page_wrapper")}},t.openerCid=function(e){var t=e.getDvar("__modal__"),n=r._safeGetComponentByCID(t);return(n&&n.__opener__).cid},t.Modal=i.extend({__init__:function(e,t){this.caller=e,this.opts=a({kwargs:{}},t),this.id=f(),this._cid="*"+this.id,this.modalElem=this.createElement()},createElement:function(){var e=document.getElementById(u),t=document.createElement("div");t.id=this.id,e.appendChild(t);var n=r.getLiveParent(this.caller.cid);return l.associateParentChildDomIds(this.id,n),t},removeElement:function(){var e=r.getLiveParent(this.caller.cid);l.removeParentChildAssociation(this.id,e),document.getElementById(u).removeChild(this.modalElem),r.unloadComponent(this._cid)},enterLoading:function(){o.send("showLoadingView")},exitLoading:function(){o.send("hideLoadingView")},show:function(){s(this.modalElem).removeClass("hidden")},hide:function(){s(this.modalElem).addClass("hidden")},load:function(e){var n=this;m(n),n.enterLoading(),n.caller.serverCall(e).kwargs(n.opts.kwargs).sendJsData(!1).contentFor(n.modalElem,{parentCid:n._cid}).except("login_required",function(){return n.exitLoading(),t.dismissActiveModal(),!0}).success(function(){var e=r._safeGetComponentByCID(n._cid);e.__opener__=n.caller,e.__modal__=n,r._components[n._cid]=e;var t={};t[n._cid]="*ROOT*",r.addParents(t),e.setDvar("__modal__",n._cid),n.exitLoading()}).send()}}),t.loadModal=function(e,n,i){var o={kwargs:i};new t.Modal(e,o).load(n)},t.getCurrentModal=function(){return h[h.length-1]}},"./mobile_app2/web_app_shim/native_app_modal_simulator.js":function(e,t,n){var i,o=n("./shared/viewport.js"),r=n("./shared/jquery.js"),s=function(){return i||(i=document.createElement("iframe"),i.name="htmlmodal",i.style.position="absolute",i.style.top=-1*o.siteHeaderHeight()+"px",i.style.height=o.siteHeaderHeight()+r(window).height()+"px",i.style.width="100%",i.style.backgroundColor="white",i.style.zIndex=-500,document.body.appendChild(i)),i};t.loadHtmlIntoModal=function(e){var t=s(),n=t.contentDocument;n.open(),n.write(e),n.close()},t.moveModalToFront=function(){s().style.zIndex=1e4},t.swapInBody=function(e){s().contentDocument.body.outerHTML=e,a()};var a=function(){for(var e=s(),t=e.contentDocument,n=e.contentDocument.body,i=Array.prototype.slice.call(n.getElementsByTagName("script")),o=0;o<i.length;o++)if(""!=i[o].src){var r=t.createElement("script");r.src=i[o].src,t.getElementsByTagName("head")[0].appendChild(r)}else e.contentWindow.eval(i[o].innerHTML);e.contentWindow.dispatchEvent(new window.Event("load"))}},"./qtext2.js":function(e,t,n){var i=n("./unified_view/qtext2/editor/mobile.js"),o=n("./unified_view/qtext2/toolbar.js");t.handleToolbarAction=function(e,t){o.activeToolbar&&o.activeToolbar.trigger(e,t)},t.handleRestoreState=function(e){"{}"!==JSON.stringify(e)&&i.activeEditor.restoreState(e)},t.saveDraft=function(){i.activeEditor.saveDraft()},t.clearDraft=function(){i.activeEditor.clearDraft()},t.focus=function(){i.activeEditor.focus()}},"./qtext2/keys.js":function(e,t,n){var i=n("./shared/Class.js").Class,o=t.isMac=/Mac/.test(window.navigator.platform),r={8:"BACKSPACE",9:"TAB",13:"RETURN",27:"ESCAPE",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",46:"DELETE",106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},s=function(e){return-1!=[35,36,37,38,39,40].indexOf(e.which)},a=function(e){return e.shiftKey&&16==e.which},l=i.extend({__init__:function(e){e=e.toUpperCase(),this.alt=/ALT-/.test(e),this.ctrl=/CTRL-/.test(e)||!o&&/CMD-/.test(e),this.meta=/META-/.test(e)||o&&/CMD-/.test(e),this.shift=/SHIFT-/.test(e),this.character=e.split("-").pop()},toString:function(){var e="";return this.alt&&(e+="ALT-"),this.ctrl&&(e+="CTRL-"),this.meta&&(e+="META-"),this.shift&&(e+="SHIFT-"),e+=this.character}}),d=function(e){var t=r[e.which]||String.fromCharCode(e.which).toUpperCase(),n="";return e.altKey&&(n+="ALT-"),e.ctrlKey&&(n+="CTRL-"),e.metaKey&&(n+="META-"),e.shiftKey&&(n+="SHIFT-"),n+=t},c=i.extend({__init__:function(){this._handlers=[]},on:function(e,t){var n=new l(e);if(n in this._handlers)throw new Error("Already attached handler for "+n);this._handlers[n]=t},trigger:function(e){var t=d(e),n=this._handlers[t];return!n||n(e)}});t.getShortcutHint=function(e){var t=new l(e),n="";return o?(t.meta&&(n+="&#x2318;"),t.ctrl&&(n+="^"),t.alt&&(n+="&#x2325;"),t.shift&&(n+="&#x21E7;")):(t.ctrl&&(n+="Ctrl-"),t.alt&&(n+="Alt-"),t.shift&&(n+="Shift-")),n+t.character[0]+t.character.slice(1).toLowerCase()},t.isNavigation=s,t.isOnlyShiftKey=a,t.Hub=c,t.SPECIAL_KEYS=r},"./qtext2/quirks.js":function(e,t,n){var i=n("./shared/browser.js"),o={usesCompositionEvents:function(){return i.gecko||i.webkit&&i.webkitVersion>532},dragEventContainsFile:function(e){var t=e.dataTransfer;return!!t&&(!!(t.files&&t.files.length>0)||!!t.types&&(!(!t.types.indexOf||-1==t.types.indexOf("Files"))||!(!t.types.contains||!t.types.contains("application/x-moz-file"))))},insertsPeriodWithDoubleSpace:function(){return i.ios}};t.Quirks=o},"./qtext2/shortcuts.js":function(e,t,n){var i=n("./qtext2/keys.js"),o=n("./shared/util.js").extend,r={Backspace:"backspace",Delete:"delete",Return:"return","Alt-Return":"return","Ctrl-Return":"return","Shift-Return":"soft-return"," ":"space",Tab:"indent","Shift-Tab":"deindent","Cmd-B":"bold","Cmd-I":"italic","Cmd-U":"underline","Cmd-K":"link","Cmd-Shift-7":"ordered_list","Cmd-Shift-8":"unordered_list","Cmd-Shift-9":"quote","Cmd-Shift-K":"code","Cmd-Shift-L":"math","Cmd-Z":"undo","Cmd-Shift-Z":"redo"};i.isMac?o(r,{"Ctrl-H":"backspace","Ctrl-D":"delete","Ctrl-K":"delete-forward","Cmd-Backspace":"delete-backward","Ctrl-T":"transpose","Ctrl-Backspace":"backspace","Ctrl-Delete":"delete","Shift-Backspace":"backspace","Shift-Delete":"delete","Alt-Backspace":"delete-previous-word","Alt-Delete":"delete-next-word","Ctrl-U":"underline"}):o(r,{"Ctrl-Backspace":"delete-previous-word","Ctrl-Delete":"delete-next-word","Shift-Backspace":"backspace","Shift-Delete":"delete","Alt-Backspace":"backspace","Alt-Delete":"delete"}),t.SHORTCUTS=r},"./qtext2/tooltip.js":function(e,t,n){var i,o,r=null,s=n("./shared/jquery.js"),a=function(){i||(i=s("<div>").addClass("qtext2_tooltip"),s(document.body).append(i),o=s("<div>"),o.css({overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}),i.append(o))};t.show=function(e,t,n){a();var l=s(e),d=s(n),c=d.outerWidth();o.html(t),i.css("max-width",c),i.removeClass("hidden");var u=l.offset(),h=u.left+.5*l.width(),p=d.offset(),f=p.left,m=f+c;u.top<30?i.css("top",l.height()+20):i.css("top",u.top-30);var _=i.outerWidth(),g=h-_/2,v=h+_/2;g<f?i.css("left",f):v>m?i.css("left",m-_):i.css("left",g),clearTimeout(r),r=setTimeout(function(){i.addClass("visible")},500)},t.hide=function(){i&&(clearTimeout(r),r=setTimeout(function(){i.removeClass("visible"),i.addClass("hidden")},100))}},"./qtext2/ui.js":function(e,t,n){var i=n("./shared/Class.js").Class,o=n("./qtext2/util.js").Util,r=n("./qtext2/quirks.js").Quirks,s=n("./shared/upload.js");t.LinkSelector=i.extend({__init__:function(e){this.editor=e,this.toolbar=e.toolbar,this.active=!1,this.key="",this._onSubmitCallback=null,this._onCancelCallback=null},isActive:function(){return this.active},show:function(){throw new Error("NotImplemented: Subclasses should override")},hide:function(){this.active=!1,this.key=""},submit:function(){throw new Error("NotImplemented: Subclasses should override")},cancel:function(){throw new Error("NotImplemented: Subclasses should override")},onSubmit:function(e){this._onSubmitCallback=e},onCancel:function(e){this._onCancelCallback=e},getExternalURL:function(e,t,n){this.toolbar&&(this.toolbar.on("linkInput",e),this.toolbar.showBar(0))},getLinkPreview:function(e,t,n){this.editor.serverCall("get_link_preview").kwargs({url:e}).success(t).error(n).send()}}),t.ImageUploader=i.extend({__init__:function(e,t,n,i,o){this.editor=e,this.doc=t,this.$dropZone=n,this.$fileInput=i,this.interface_strings=o,this._dragStartedInDoc=!1,this.initEventHandlers()},_debugEvent:function(e,t){},initEventHandlers:function(){o.on("dragenter",this.doc.node,this.onDragEnter.bind(this)),o.on("dragstart",this.doc.node,this.onDragStart.bind(this)),o.on("dragend",this.doc.node,this.onDragEnd.bind(this)),o.on("paste",this.doc.node,this.onPaste.bind(this)),o.on("drop",this.doc.node,this.onDropInDoc.bind(this)),o.on("dragleave",this.$dropZone,this.onDragLeave.bind(this)),o.on("dragover",this.$dropZone,this.onDragOver.bind(this)),o.on("click",this.$dropZone,this.onClick.bind(this)),o.on("drop",this.$dropZone,this.onDrop.bind(this)),o.on("change",this.$fileInput,this.onChange.bind(this))},onDragEnter:function(e){this._debugEvent("dragenter",e),r.dragEventContainsFile(e)&&(this._dragStartedInDoc||this.showDropZone())},onDragStart:function(e){this._debugEvent("dragstart",e),this._dragStartedInDoc=!0},onDragEnd:function(e){this._debugEvent("dragend",e),this._dragStartedInDoc=!1},onDropInDoc:function(e){this._debugEvent("drop (in doc)",e),this._dragStartedInDoc=!1},onDragLeave:function(e){this._debugEvent("dragleave",e),this.hideDropZone()},onDragOver:function(e){this._debugEvent("dragover",e),e.preventDefault()},onClick:function(e){this._debugEvent("click",e),this.hideDropZone()},onDrop:function(e){if(this._debugEvent("drop",e),e.preventDefault(),e.stopPropagation(),!e.dataTransfer||!e.dataTransfer.files)return void this.hideDropZone();for(var t=[],n=0;n<e.dataTransfer.files.length;++n){var i=e.dataTransfer.files[n].type;(i.match(/image/i)||i.match(/file/i))&&t.push(e.dataTransfer.files[n])}this.startUpload(t)},onChange:function(e){this._debugEvent("change",e),this.startUpload(this.$fileInput.files),this.$fileInput.value=null},onPaste:function(e){this._debugEvent("paste",e);var t=e.clipboardData,n=[];if(!t||!t.items)return!1;for(var i=0;i<t.items.length;++i){var o=t.items[i].type;(o.match(/image/i)||o.match(/file/i))&&n.push(t.items[i].getAsFile())}return this.startUpload(n),!1},showDropZone:function(){this.$dropZone.innerHTML=this.interface_strings.drop_images,this.$dropZone.classList.remove("hidden"),this.$dropZone.style.lineHeight=this.doc.node.clientHeight+"px",this.$dropZone.style.top=this.doc.node.offsetTop+"px"},hideDropZone:function(){this.$dropZone.classList.remove("uploading"),this.$dropZone.classList.add("hidden")},showUploading:function(e){this.showDropZone(),this.$dropZone.innerHTML=e>1?this.interface_strings.uploading_images.replace("{}",e):this.interface_strings.uploading_image},_onUpload:function(e){this.doc.insertImages(e.qimg_urls,{source:"upload"}),this.hideDropZone()},_onError:function(e){e&&e.message?alert(e.message):alert(this.interface_strings.upload_error),this.hideDropZone()},startUpload:function(e){if(0===e.length)return void this.hideDropZone();this.showUploading(e.length),s.uploadData({kind:"qtext"},e,this._onUpload.bind(this),this._onError.bind(this))},uploadImageUrl:function(e,t){this.editor.serverCall("upload_image_url").kwargs({url:e}).success(t).error(this._onError.bind(this,null)).send()}}),t.PhotoSearch=i.extend({__init__:function(e,t,n,i){this.$searchComponent=t,this.$wrapper=n,this.$searchComponent.setSelectCallback(this.submit.bind(this)),this.$searchComponent.setUploadCallback(this.hide.bind(this)),this.$searchComponent.setUploader(i),this.active=!1},isActive:function(){return this.active},fixPosition:function(){var e=this.$wrapper,t=this.$wrapper.parent(),n=6,i=function(){var o=t.find(".editor_toolbar"),r=t.offset().left+t.width()-e.width();"fixed"===o.css("position")?e.css("position","fixed").css("left",r).css("right","auto"):e.css("position","absolute").css("left","auto").css("right",0),e.css("top",parseInt(o.css("top"))+o.height()+n),window.requestAnimationFrame(i)};i()},show:function(){var e=this;e.fixPosition(),e.$wrapper.addClass("animate_in"),setTimeout(function(){e.$wrapper.removeClass("animate_in"),e.$wrapper.addClass("is_shown")},200),e.$searchComponent.makeActive(),e.active=!0},hide:function(){var e=this;e.active=!1,e.$wrapper.addClass("animate_out"),setTimeout(function(){e.$wrapper.removeClass("is_shown"),e.$wrapper.removeClass("animate_out")},200)},toggle:function(){this.active?this.hide():this.show()},submit:function(e){this._onInsertCallback&&this._onInsertCallback(e)},cancel:function(){if(this._onCancelCallback)return this._onCancelCallback(),!1},onInsert:function(e){this._onInsertCallback=e},onCancel:function(e){this._onCancelCallback=e}})},"./qtext2/util.js":function(e,t,n){var i=n("./shared/email.js").isValidEmail,o=n("./shared/jquery.js"),r=["keydown","keyup","keypress"],s=n("./shared/linkify.js"),a=/^https?\:\/\//,l=n("./shared/util.js"),d={assert:function(e){if(!e){var t=Array.prototype.slice.call(arguments,1);throw new Error(t)}},create:function(e){return document.createElement(e)},objectIntersection:function(e,t){for(var n=Object.keys(e),i={},o=0;o<n.length;o++){var r=n[o];l.jsonEqual(e[r],t[r])&&(i[r]=e[r])}return i},removeNullValues:function(e){for(var t,n=Object.keys(e),i=0;i<n.length;i++)if(t=n[i],null===e[t])delete e[t];else if("[object Object]"===Object.prototype.toString.call(e[t]))d.removeNullValues(e[t]);else if("[object Array]"===Object.prototype.toString.call(e[t]))for(var o=0;o<e[t].length;o++)d.removeNullValues(e[t][o]);return e},getData:function(e,t){return e.getAttribute("data-"+t)},setData:function(e,t,n){e.setAttribute("data-"+t,n)},removeData:function(e,t){e.removeAttribute("data-"+t)},isTextNode:function(e){return e&&3==e.nodeType},safeRemoveChild:function(e,t){e&&e.parentNode&&e.parentNode==t&&t.removeChild(e)},on:function(e,t,n){e=e instanceof Array?e:[e],e.forEach(function(e){t.addEventListener(e,function(t){var i;return-1!=r.indexOf(e)&&(t.which=t.charCode!==undefined?t.charCode:t.keyCode),i=n(t,e),!1===i&&(t.preventDefault(),t.stopPropagation()),i})})},ensureProtocol:function(e){return i(e)?e:(a.test(e)||(e="http://"+e),e)},isValidUrl:function(e){var t=d.linkify(e);return 1===t.length&&t[0].href},splitLines:function(e){return e.split(/\n|\r\n?/)},splitByRegex:function(e,t){for(var n,i=[];e;)n=e.match(t),n?(n.index&&i.push({text:e.slice(0,n.index)}),i.push({text:n[0],match:n}),e=e.slice(n.index+n[0].length)):(i.push({text:e}),e="");return i},linkify:function(e){var t=[];return s.linkify(e,{callback:function(e,n){0!==e.length&&t.push({text:e,href:n})}}),t},firstScrollingParent:l.firstScrollingParent,getContainerOffset:function(e,t){var n=o(e).offset(),i=t||d.firstScrollingParent(e);if(i!==document.body){var r=o(i).offset();n.left+=i.scrollLeft-r.left,n.top+=i.scrollTop-r.top}return n},getAttrOfHiddenElement:function(e,t){var n=null;if(e&&t){var i=o(e);i.css("visibility","hidden").removeClass("hidden"),n=t(i),i.addClass("hidden").css("visibility","")}return n},isAstralSymbol:function(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e)},createPlainIframe:function(e){var t=document.createElement("iframe"),n=["<html>","<head>","<style>html, body {margin: 0; padding 0;}</style>","</head>","<body>",e.outerHTML,"</body>","</html>"];return t.srcdoc=n.join(""),t},h:function(e,t){for(var n=new Array(arguments.length-2),i=2;i<arguments.length;i++)n[i-2]=arguments[i];var o;o=null===e?document.createDocumentFragment():document.createElement(e),Object.keys(t||{}).forEach(function(e){o.setAttribute(e,t[e])});for(var r=0;r<n.length;r++){var s=n[r];s&&(Array.isArray(s)&&(s=d.h.apply(null,[null,null].concat(s))),"string"==typeof s&&(s=document.createTextNode(s)),o.appendChild(s))}return o}};t.Util=d},"./settings.js":function(e,t){e.exports=window.Q.settings},"./shared/Class.js":function(e,t){function n(e,t){function n(){if(o||(e.call(l),i(d,t,s),o=!0,t=null),this!==l){var n=this.__init__;n&&n.apply(this,arguments)}}var o,s=a.prototype=e.prototype,d=new a;return n.prototype=d,n.extend=r,d.constructor=n,n}function i(e,t,n){for(var i in t)t.hasOwnProperty(i)&&(e[i]=n?o(i,t,n):t[i])}function o(e,t,n){var i=t[e],o=n[e];return"function"==typeof i&&"function"==typeof o&&i!==o&&s.test(i)?function(){var t=this._super;this._super=n[e];try{return i.apply(this,arguments)}finally{this._super=t}}:i}function r(e){return n(this,e)}var s=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,a=function(){},l={};t.Class=r.call(function(){},{})},"./shared/basicrpc.js":function(e,t){function n(e){var t=[],n=function(e,n){t[t.length]=encodeURIComponent(e)+"="+encodeURIComponent(n)};for(var o in e)e.hasOwnProperty(o)&&i(o,e[o],n);return t.join("&").replace(/%20/g,"+")}function i(e,t,n){if(null!==t&&"object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&i(e+"["+o+"]",t[o],n);else n(e,t)}t.rpc=function(e,t,i){t=n(t);var o=new XMLHttpRequest;o.onreadystatechange=function(){4===this.readyState&&200===this.status&&i&&i()},o.open("POST",e,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.setRequestHeader("Accept","*/*"),o.send(t)}},"./shared/beforeunload.js":function(e,t,n){var i=n("./shared/jquery.js"),o=!1,r=[];t.registerHandler=function(e,t){t=t||0,r[t]||(r[t]=[]),r[t].push(e)},t.isUnloading=function(){return o};var s=function(e){o=!0,e=e||window.event;var t,n=Object.keys(r);n.sort();for(var i=0;i<n.length;i++){for(var s=n[i],a=r[s],l=0;l<a.length;l++){var d=a[l].call(a,e);if(d){t=d;break}}if(t)break}return e&&(e.returnValue=t),t};i(window).on("beforeunload",s)},"./shared/broadcast.js":function(e,t,n){var i=n("./shared/core/component.js"),o=n("./shared/jquery.js"),r=n("./shared/util.js"),s=n("./shared/errors.js"),a=n("./shared/events/index.js"),l=n("./shared/core/rpc.js"),d=n("./shared/client.js"),c=n("./settings.js"),u=n("./unified_view/tchannel_up.js"),h=n("./gating.js"),p=n("./unified_view/live_paged_list.js").PagedList,f=n("./unified_view/paged_list.js");if(PAGE_IS_MOBILE)var m=n("./mobile_app2/client.js"),_=n("./mobile_app2/page_cloner.js");var g=r.once(function(e){var t=e.cid,n="Component needs to be live in order to broadcast reload ";n+=i.getErrorLabel(t),n+=" isUnloaded: "+i._unloaded[t],n+=" domids: "+JSON.stringify(i._domids[t]),n+=" isClonedPage: "+c.isClonedPage,n+=" isVirtual: "+e.isVirtual,n+=" serialized_component: "+E[e.cid],s.logJsError("Broadcast",n)}),v={},b={},y={},w=null,E={},T=t._interactionModeCids={focusedCid:null,changedCids:{}},S={},C={};t.initialize=function(e){if(x(e[0]),k(e[1]),c.isExpandedBroadcast&&(A(),I(e[2]),O()),h.broadcast_debug_mode){var t=h.broadcast_debug_filters.cid_filter,n=h.broadcast_debug_filters.dependency_filter,i=!o.isEmptyObject(t),r=!o.isEmptyObject(n),s=o.extend({},y),a=o.extend({},v),l=o.extend({},b);if(i||r){for(var d in s)i&&!t.some(function(e){return d.includes(e)})?delete s[d]:r&&(s[d]=s[d].filter(function(e){return n.some(function(t){return e[0].includes(t)})}),!t.some(function(e){return d.includes(e)})&&o.isEmptyObject(s[d])&&delete s[d]);for(var u in a){for(d in a[u])i&&!t.some(function(e){return d.includes(e)})&&delete a[u][d];r&&!n.some(function(e){return u.includes(e)})&&delete a[u],i&&o.isEmptyObject(a[u])&&delete a[u]}for(u in l)r&&!n.some(function(e){return u.includes(e)})&&delete l[u]}o.isEmptyObject(s)||console.log("Initialize broadcast with:",{"Original data":e,"Broadcast's id":w,"Current component's id to dependencies":s,"Current dependency to component's ids":a,"Current dependency to version":l})}},t.getId=function(){return w};var x=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n],r=i._components[o];if(r){var s=e[o];y[o]=s,q(r,s)}}},k=function(e){E=r.extend(E,e)},A=function(){u.setBeforeReconnection(j)},I=function(e){w||(w=e)},O=function(){PAGE_IS_MOBILE||(o(document).on("focus",'[data-group="js-editable"]:not(.ignore_interaction)',function(e){var t=i.getAnyComponent(e.target);t&&(T.focusedCid=t.cid,h.broadcast_debug_mode&&T.focusedCid&&console.log("the cid ",T.focusedCid," has been focused, so it and its ancestors will not be reloaded"))}),o(document).on("blur",'[data-group="js-editable"]:not(.ignore_interaction)',function(e){T.focusedCid=null,h.broadcast_debug_mode&&console.log("The previously focused cid has been blurred.")}),o(document).on("keydown",'[data-group="js-editable"]:not(.ignore_interaction)',function(e){T.focusedCid&&(T.changedCids[T.focusedCid]=!0,h.broadcast_debug_mode&&console.log("the cid ",T.focusedCid," has been changed, so it and its ancestors will not be reloaded"))}))},L=t._shouldReloadComponent=function(e){return!(e in S)||(h.broadcast_debug_mode&&console.log("We won't reload the component",e,"because it will affect the focused/edited component(s)"),!1)},D=t.shouldForceReloadDirtiedDepkeys=function(e){if(!e)return!1;for(var t=0;t<e.length;t++)if(0!=e[t][1])return!1;return!0},M=t.rerenderComponent=function(e,t){var n=i._safeGetComponentByCID(e);if(n&&!n.isVirtual){var o=i.getLiveDomElement(n.cid);if(o){var r=N(e),s={serialized_component:E[n.cid],hmac:n.getHmac(),broadcast:!0,broadcast_id:w,rerender_props:r};if(!s.serialized_component)return void g(n);PAGE_IS_MOBILE&&d.isNativeApp()&&n.getDvar("disableOnload")&&_.markComponentAsRerendering(n),n.__extra_args&&n.__extra_args.nid_override!==undefined&&(s.nid_override=n.__extra_args&&n.__extra_args.nid_override);var a;a=t?"/api/rerender_component_low_pri_POST":"/api/rerender_component_POST",l.rpc(a).kwargs(s).contentFor(o,{parentCid:n.parent().cid,inPlace:!0,useLoadingSpinner:!1}).earlySuccess(function(){i.unloadComponent(n.cid)}).success(function(){delete C[n.cid],F()}).error(function(){delete C[n.cid],F()}).send({batched:!0})}}},P=function(e,t,n){if(e&&h.broadcast_debug_mode&&console.log("Reload components:",e),PAGE_IS_MOBILE||c.isExpandedBroadcast){var o=[];e.forEach(function(e){var t=i._safeGetComponentByCID(e);if(t instanceof p)t.updateList();else{if(t instanceof f.PagedList)return;t instanceof f.InvisibleUpdater?t.requestReplacement()||o.push(e):o.push(e)}}),e=o}var r=[];e.forEach(function(t){for(var n=i._parents[t],o=i._safeGetComponentByCID(n);o;){if(-1!=e.indexOf(n))return;o=o.parent()}r.push(t),C[t]=!0}),n&&F(),r.forEach(function(e){try{M(e,t)}catch(e){s.report(e)}})},N=t._getRerenderProps=function(e){var t=i.getDescendantCids(e),n={};return t.forEach(function(e){var t=i._safeGetComponentByCID(e),o=t.rerenderProperties();if(o){var r=E[e];if(!r)return;var a=JSON.parse(r)[1]+t.getHmac();a in o&&s.logJsError("Broadcast","Duplicate rerender key for component: "+e),n[a]=o}}),n};a.DocumentProxy.subscribe(a.Types.BROADCAST_RELOAD_DIRTIED_DEPKEYS,function(e){h.broadcast_debug_mode&&console.log("Received cchannel message:",e),c.isExpandedBroadcast&&e.payload&&e.payload.dirtied_depkeys&&H(e.payload.dirtied_depkeys,!1,!0)});var j=function(e){h.broadcast_debug_mode&&console.log("Refresh stale deps:",b);var t={dependency_to_version:b};l.rpc("/api/get_stale_deps_POST").kwargs(t).success(function(t){H(t.depkeys,!0),e(t.minSeq,t.broadcast_id,t.channelHash,t.netloc,t.targetUrl),w=t.broadcast_id}).send()},B=!1,R=function(){B||(B=!0,PAGE_IS_MOBILE&&m.registerMessageHandler("reloadDirtiedDepkeys",function(e){H(e.dirtied_depkeys,e.force||D(e.dirtied_depkeys),!1)}))},U=t._updateInteractionModeAncestors=function(){S={};var e=[];T.focusedCid&&e.push(i._safeGetComponentByCID(T.focusedCid));for(var t in T.changedCids)e.push(i._safeGetComponentByCID(t));e.forEach(function(e){for(var t=e;t;)S[t.cid]=!0,t=t.parent()})},H=t.reloadDirtiedDepkeys=function(e,t,n,o){h.broadcast_debug_mode&&console.log("Reload dirtied depkeys:",{"Dirtied depkeys":e,"Force update version":t,"From other window":n,"Hide LiveSpinner after reload":o});var r=e,s=[];U();for(var a=0;a<r.length;a++){var l=r[a],d=[];if(c.isExpandedBroadcast){var u=l[1];l=l[0];var p=b[l];if(!t&&p!==undefined&&u<=p)continue;var f=!0;Object.keys(v[l]||{}).forEach(function(e){var t=i._safeGetComponentByCID(e);L(e)&&t&&t.shouldBroadcastReload(n)?d.push(e):f=!1}),f&&l in v&&(h.broadcast_debug_mode&&console.log("Update version of",l,"from",b[l],"to",u),b[l]=u)}else d=Object.keys(v[l]||{});Array.prototype.push.apply(s,d)}P(s,n,o)},q=function(e,t){if(t&&0!==t.length&&!e.isVirtual){R(),t.forEach(function(t){if(c.isExpandedBroadcast){var n=t[1];t=t[0];var i=b[t];b[t]=Math.min(n,i||Number.MAX_VALUE)}v[t]=v[t]||{},v[t][e.cid]=!0}),e.whenUnloaded(function(){t.forEach(function(t){c.isExpandedBroadcast&&(t=t[0]),v[t]=v[t]||{},delete v[t][e.cid]})});if(!i.getLiveDomElement(e.cid))return void(i.getLiveDomId(e.cid)||g(e));var n=function(n){n&&-1!=t.indexOf(n.key)&&M(e.cid)};PAGE_IS_MOBILE&&(m.registerOneTimeMessageHandler("fullReload",n),e.whenUnloaded(function(){m.removeOneTimeMessageHandler("fullReload",n)}))}};t.getDataForCids=function(e){for(var t={},n={},i=0;i<e.length;i++){var o=e[i],r=y[o],s=E[o];r&&(c.isExpandedBroadcast&&r.forEach(function(e){e[1]=b[e]}),t[o]=r),s&&(n[o]=s)}return[t,n]},t.markComponentsAsSafeToReload=function(e){e&&Object.keys(T.changedCids).forEach(function(t){i.isAncestorComponent(e,i._safeGetComponentByCID(t))&&(h.broadcast_debug_mode&&console.log("Component",t,"is safe to reload"),delete T.changedCids[t])})},t.showLiveSpinner=function(){a.DocumentProxy.dispatch({type:a.Types.LIVENODE_LOADING_SPINNER,payload:{show:!0}})};var F=function(){0==Object.keys(C).length&&$()},$=t.hideLiveSpinner=function(){a.DocumentProxy.dispatch({type:a.Types.LIVENODE_LOADING_SPINNER,payload:{show:!1}})}},"./shared/browser.js":function(e,t,n){var i=n("./third_party/browser.js");i.version=parseFloat(i.version),e.exports=i},"./shared/client.js":function(e,t,n){var i=n("./settings.js"),o=n("./shared/browser.js"),r=t.DeviceType={ANDROID:0,IOS:1,WEB:2},s=t.getDeviceType=function(){var e=i.deviceName;return"iphone"==e?r.IOS:"android"==e?r.ANDROID:r.WEB},a=t.isIOSApp=function(){return s()==r.IOS},l=t.isAndroidApp=function(){return s()==r.ANDROID};t.isNativeApp=function(){return a()||l()};var d=t.isMobileWeb=function(){return PAGE_IS_MOBILE&&s()==r.WEB};t.isWKWebView=function(){return!!(a()&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.Q)},t.isUIWebView=function(){return a()&&!window.webkit};var c=t.isAndroidMobileWeb=function(){return d()&&o.android},u=t.isIOSMobileWeb=function(){return d()&&o.ios};t.isAndroid=function(){return c()||l()},t.isIOS=function(){return u()||a()}},"./shared/client_log.js":function(e,t,n){var i=n("./shared/util.js"),o=n("./shared/jquery.js"),r=n("./settings.js"),s=n("./shared/siteuri.js"),a=n("./shared/errors.js"),l=n("./shared/window_manager.js"),d=n("./shared/cookies.js"),c=n("./shared/log_sender.js"),u=n("./shared/core/component.js"),h=t.logEvent=function(e,t,n){var o=i.extend({},n,_(t));e&&c.log("client_log",{eventType:e,metadata:o},{shouldDeduplicate:!0})},p=t.logClickthrough=function(e,t){var n=x(e);if(n){var i=_(t);if(0!=Object.keys(i).length){var o={expires:1};d.setMessage("clog",[i,n],null,o)}}},f={};t.associateParentChildDomIds=function(e,t){f[e]||(f[e]=[]),-1==f[e].indexOf(t)&&f[e].push(t)},t.removeParentChildAssociation=function(e,t){if(f[e]){var n=f[e].indexOf(t);if(-1==n)return n;f[e].splice(n,1)}};var m=function(e){var t=[];return Object.keys(f).forEach(function(n){var i=document.getElementById(n);(e&&e.id==n||i&&o.contains(i,e))&&f[n].forEach(function(e){var n=document.getElementById(e);n&&t.push(n)})}),t},_=t.getElemMetadata=function(e){var t=[],n=m(e);o(n).parents("[data-clog-metadata]").addBack("[data-clog-metadata]").each(function(e,n){t.push(o(n).data("clog-metadata"))}),o(e).parents("[data-clog-metadata]").addBack("[data-clog-metadata]").each(function(e,n){t.push(o(n).data("clog-metadata"))});var r=i.extend.apply(null,[{}].concat(t));r._componentPath=E(e);var s=u.getAnyComponent(e),a=s&&s.__extra_args&&s.__extra_args.nid_override;return null!=a&&(r.nid_override=a),i.extend({},v(),r)},g={},v=t.getGlobalMetadata=function(){return g},b=t.setGlobalMetadataFromObject=function(e){i.extend(g,e)},y=function(e,t){t!==undefined&&null!==t&&(g[e]=t)},w=function(e){return o(e).data("clog-event-type")},E=t._getElemComponentPath=function(e){var t=[];return[e].concat(m(e)).forEach(function(e){for(var n=u.getAnyComponent(e);n;){var i=n.getHmac();i&&-1==t.indexOf(i)&&t.push(i),n=n.parent()}}),t.reverse(),t},T=i.once(function(){return n("./shared/impression_tracker.js").createTracker(function(e,t,n){h(w(n),n)},{oneOffTracking:!0,exitViewport:!1})}),S=function(){var e=T();o("[data-clog-trigger=impression]").not("[data-clog-processed=1]").each(function(t,n){e.observe(n)}).attr("data-clog-processed",1)},C=t._getUrlFromElem=function(e){for(var t=e;"A"!=t.tagName;)if(!(t=t.parentElement))return null;return t.getAttribute("href")},x=t._getRelativeSiteUrl=function(e){return e&&s.isSiteUrl(e)?new s.SiteURI(e).relativeUrl:null},k=function(e){p(C(e),e)},A=function(){o(function(){document.addEventListener("mousedown",function(e){k(e.target),"mousedown"==o(e.target).data("clog-trigger")&&h(w(e.target),e.target)},!0)})};t.init=function(){g={},f={},y("client_log_trail",r.clientLogTrail);try{var e=l.getURLParam("__clog");e&&b(JSON.parse(decodeURIComponent(e)))}catch(e){a.report(e)}A(),u.registerAfterOnLoadCallback(S)}},"./shared/cookies.js":function(e,t,n){var i,o=n("./shared/util.js"),r=n("./settings.js"),s=n("./shared/errors.js"),a=r.cookiePrefix,l=".quora.com",d="/",c=n("./gating.js"),u=n("./shared/client.js"),h=function(){h.called||(h.called=!0,n("./shared/log_sender.js").log.apply(this,arguments))};PAGE_IS_MOBILE&&(i=n("./mobile_app2/messages.js"));var p=function(e){return o.extend({expires:1825,path:d,domain:l},e)};t.setCookie=function(e,n,o,r){if(o=p(o),PAGE_IS_MOBILE){var s={name:e,options:o};null!=n&&(s.value=n),i.send("setCookie",s,r)}else t.setCookieOnDocument(e,n,o)},t.getCookie=function(e,n){if(!PAGE_IS_MOBILE)return t.getCookieOnDocument(e);i.send("retrieveCookie",{name:e},n)},t.setCookieOnDocument=function(e,t,n){n=p(n),e=a+"-"+e;var i,o=n.document||document,r=n.path?"; path="+n.path:"",s=n.domain?"; domain="+n.domain:"",l=n.secure?"; secure":"",d="";null===t&&(t="",n.expires=-1),n.expires&&"number"==typeof n.expires&&(i=new Date,i.setTime(i.getTime()+24*n.expires*60*60*1e3),d="; expires="+i.toUTCString()),n.expires instanceof Date&&(d="; expires="+n.expires.toUTCString()),o.cookie=[e,"=",encodeURIComponent(t),d,r,s,l].join("")},t.getCookieOnDocument=function(e){e=a+"-"+e;var t,n,i,o=document;if(o.cookie&&""!==o.cookie)for(t=o.cookie.split(";"),i=0;i<t.length;i++)if(n=t[i].trim(),n.startsWith(e+"="))return decodeURIComponent(n.substring(e.length+1))};var f=function(e){var t,n,i="="+encodeURIComponent(e),o='="'+encodeURIComponent(e)+'"';if(document.cookie)for(t=document.cookie.split(";"),n=0;n<t.length;n++)if(t[n].endsWith(i)||t[n].endsWith(o))return!0;return!1},m=t.setMessage=function(e,n,i,a,l){var c,u=document,m=u.cookie.length,_=u.cookie.split(";").length;if(a=p(a),a.path!=d){var g="Trying to set a non-default path for cookie message: "+e;return void s.logJsError("cookies",g)}if(m>2400||_>50)return void h("cookie_message_errors",{key:e,args:n,size:m,count:_,cookie:u.cookie});var v=Math.floor(4294967296*Math.random()),b=JSON.stringify({key:e,args:n});l=l!==undefined?l:r.nid,c=["qm",v,l].join("-"),PAGE_IS_MOBILE&&(b=o.utoa(b)),f(b)||t.setCookie(c,b,a,i)};t.setFeedBundleLog=function(e,t){var n,i=e.getDvar("bundle_hash"),o=e.getDvar("feed_page"),r=e.getDvar("page_data"),s=e.__extra_args&&e.__extra_args.nid_override;if(n=[1,i,o,r,t],i&&(m("fbl",n,undefined,undefined,s),c.qfeed_log_debugger)){var a={action:t,bundle_hash:i,feed_page:o,page_data:r};console.log("feed_bundle_action:",JSON.stringify(a,null,2))}},t.setScreenSizeCookie=function(){var e=window.screen.width,n=window.screen.height;u.isIOS()&&window.orientation&&90==Math.abs(window.orientation)&&(e=window.screen.height,n=window.screen.width),t.setCookie("screen_size",e+"x"+n)}},"./shared/core/component.js":function(e,t,n){var i=n("./shared/Class.js").Class,o=n("./shared/w2.timing.js"),r=n("./shared/eventemitter.js").EventEmitter,s=n("./shared/jquery.js"),a=n("./shared/w2.context.js"),l=n("./shared/util.js"),d=n("./interface/settings.js"),c=n("./shared/errors.js"),u=n("./shared/events/index.js"),h="__w2_",p={},f={},m={},_={},g={},v={},b={},y={},w={};t._parents=p,t._components=f,t._allChildren=m,t._children=_,t._hmacs=g,t._domids=v,t._domidToCid=b,t._debugInfo=y,t._unloaded=w;var E=t.addParents=function(e){var t,n,i,o;for(t=Object.keys(e),o=0;o<t.length;o++)n=t[o],i=e[n],p[n]=i,i in m||(m[i]=[]),m[i].push(n),n in _||(_[n]={})},T=function(e){var t,n,i;for(t=Object.keys(e),n=0;n<t.length;n++)i=t[n],g[i]=e[i]},S=function(e){var t,n,i;for(t=Object.keys(e),n=0;n<t.length;n++)i=t[n],i in _||(_[i]={}),l.extend(_[i],e[i])},C=function(e){var t,n,i,o;for(t=Object.keys(e),n=0;n<t.length;n++)i=t[n],o=e[i],v[i]=o,b[o]=i},x=t.addDebugInfo=function(e){var t,n,i;for(t=Object.keys(e),n=0;n<t.length;n++)i=t[n],y[i]||(y[i]=e[i],o.timing._components&&(i in o.timing._components||(o.timing._components[i]={}),o.timing._components[i].addDebugInfo=Date.now()))};t.addComponentMetadata=function(e){var t=e.parents,n=e.children,i=e.domids,o=e.hmacs;E(t),T(o),S(n),C(i),"debugInfo"in e&&x(e.debugInfo)},t.registerComponents=function(e){return e.forEach(function(e){f[e.cid]=e}),e};var k=t._safeGetComponentByCID=function(e){return e?(f[e]||(f[e]=N(e)),f[e]):null};t.isCid=function(e){return e&&!!f[e]};var A=function(e){var t;if(v[e]&&(t=document.getElementById(v[e])))return t;try{t=s("[id^="+h+e+"]").get(0)}catch(e){}return t||void 0};t.getAnyElement=function(e){for(var t,n,i=e.cid,o=[i];o.length;){if(n=o.shift(),t=A(n))return t;Array.prototype.push.apply(o,m[i])}for(n=i;n=p[n];)if(t=A(n))return t;return null},t.getAnyComponent=function(e){for(var t=e;t;){var n=t.id;if(n&&n.startsWith(h)){var i=n.slice(h.length).split("_"),o=i.slice(0,1).join("_");if(f[o])return f[o];var r=i.slice(0,2).join("_");if(f[r])return f[r]}t=t.parentElement}return null},t.getLiveDomId=function(e){return v[e]},t.getLiveDomElement=function(e){if(e in v)return document.getElementById(v[e])},t.getComponentFromElement=function(e){for(;e&&!(e.id in b);)e=e.parentNode;return e&&k(b[e.id])};var I=t.getLiveParent=function(e){return e in v?v[e]:e in p?I(p[e]):""};t.getLiveParentDomElement=function(e){return document.getElementById(I(e))},t.getLiveChildren=function(e){var t,n,i;if(t=m[e],n=[],t)for(i=0;i<t.length;i++)t[i]in v&&n.push(v[t[i]]);return n};var O=t.getErrorLabel=function(e){return[" (",e," ",g[e],")"].join("")},L=t.removeComponentMetadata=function(e){u.DocumentProxy.dispatch({type:u.Types.WEBNODE_BEFORE_REMOVE_COMPONENT_METADATA,payload:{cid:e}});var t=f[e],n=p[e],i=t&&t.cname;if(n&&i){var o=_[n];o&&o[i]==e&&delete o[i]}if(n){var r=m[n];if(r){var s=r.indexOf(e);s>-1&&r.splice(s,1)}}delete m[e],delete _[e],delete f[e],delete y[e],delete b[v[e]],delete v[e],delete p[e]},D=t.unloadComponent=function(e){try{var t=f[e];t&&(t.onUnload(),t._flushOnUnloadCallbacks(),a.unloadComponent(t));var n=m[e]||[];n=n.slice(),n.forEach(function(e){D(e)}),L(e),u.ComponentProxy.unsubscribeAll(e)}catch(e){c.report(e)}finally{w[e]=!0}};t.beforeOnLoad=function(e){e&&(o.logTime("preOnLoad"),(d.logComponentTime||d.debug||d.componentInspector)&&(o.timing.components={},o.timing._components={})),u.DocumentProxy.dispatch({type:u.Types.WEBNODE_COMPONENT_PRE_ONLOAD,payload:{isPageLoad:e}})},t.afterOnLoad=function(e){e&&(o.logTime("postOnLoad"),o.logTime("pageInteractive")),u.DocumentProxy.dispatch({type:u.Types.WEBNODE_COMPONENT_POST_ONLOAD,payload:{isPageLoad:e}})},t.registerBeforeOnLoadCallback=function(e){u.DocumentProxy.subscribe(u.Types.WEBNODE_COMPONENT_PRE_ONLOAD,function(t){e(t.payload.isPageLoad)})},t.registerAfterOnLoadCallback=function(e){u.DocumentProxy.subscribe(u.Types.WEBNODE_COMPONENT_POST_ONLOAD,function(t){e(t.payload.isPageLoad)})},t.getRootParent=function(e){if(!f[e])return null;for(var t=e;t&&!t.startsWith("*");)t=p[t];return t},t.getDescendantCids=function(e){for(var t={},n=[e];n.length;){var i=n.pop();t[i]=!0;var o=m[i];o&&Array.prototype.push.apply(n,o)}return Object.keys(t)},t.getAllDvars=function(e){for(var t,n={},i=e,o={};i;){if(i.cid in o){var r="Broke parent loop "+O(i.cid);c.logJsError("getAllDvars",r);break}t=l.extend({},i.__dvars__),n=l.extend(t,n),o[i.cid]=!0,i=i.parent()}return n},t.isAncestorComponent=function(e,t){for(var n=t;n;){if(n.cid==e.cid)return!0;n=n.parent()}return!1};var M=t.Component=i.extend({__init__:function(e,t,i,o){this.cid=e,this.cname=t,this.__js_init=i,this.__extra_args=o,this.__onloaded=!1,this.__emitter=null,this.init(i),o&&o.rerenderRace&&n("./shared/broadcast.js").rerenderComponent(e),o.nid_override!==undefined&&n("./shared/core/rpc.js").addMetadataCallback(this._addNidOverrideMetadataInRpc.bind(this))},init:function(e){l.isPlainObject(e)&&l.extend(this,e)},onLoad:function(e){},onUnload:function(){},contextConstructor:function(){},child:function(e){var t=_[this.cid],n=t?t[e]:null;return k(n)},children:function(){return(m[this.cid]||[]).map(function(e){return k(e)})},parent:function(){return k(p[this.cid])},setDvar:function(e,t){this.__dvars__=this.__dvars__||{},this.__dvars__[e]=t},getDvar:function(e){if(this.__dvars__=this.__dvars__||{},e in this.__dvars__)return this.__dvars__[e];for(var t,n=this.cid;n;)if(n=p[n],t=f[n])return t.getDvar(e);return null},getHmac:function(){return g[this.cid]},__maybeCreateEmitter:function(){this.__emitter||(this.__emitter=new r)},whenOnLoaded:function(e){if(this.__onloaded)return void e();this.__maybeCreateEmitter(),this.__emitter.on("onload",e)},whenUnloaded:function(e){this.__maybeCreateEmitter(),this.__emitter.on("unload",e)},_flushOnLoadCallbacks:function(){this.__emitter&&this.__emitter.trigger("onload"),this.__onloaded=!0},_flushOnUnloadCallbacks:function(){this.__emitter&&this.__emitter.trigger("unload")},_my:function(){return h+this.cid+"_"},ge:function(e){return document.getElementById(j(this.cid,e))},createModal:function(e){var t=n("./shared/modal.js"),i=t.fromComponent(this);if(e){var o=this.getHmac();if(!o)throw new Error("Invalid hmac for component: "+this.cid);i.fromServerCall(o,e)}return i},emitEvent:function(e){u.ComponentProxy.dispatch(e,this.cid)},handleEvent:function(e,t){u.ComponentProxy.subscribe(e,t,this.cid)},$id:function(e){if("@"!=e[0])throw new Error("Expect id to begin with @. Got: "+e);return s("#"+j(this.cid,e))},serverCall:function(e){var t=this.getHmac();if(t){return new(n("./shared/core/rpc.js").ServerCall)(t,e,this)}},_addNidOverrideMetadataInRpc:function(e,t){t.__extra_args.nid_override!==undefined&&(e.nid_override=t.__extra_args.nid_override)},rerenderProperties:function(){return null},shouldBroadcastReload:function(e){return!0}}),P=M.extend({__init__:function(e){this._super(e,null,{},{}),this.isVirtual=!0,a.initComponent(this)}}),N=t.makeVirtualComponent=function(e){return new P(e)},j=t.getIdAttr=function(e,t){return t.replace("@",[h,e,"_"].join(""))}},"./shared/core/rpc.js":function(e,t,n){var i,o,r,s,a,l,d=n("./shared/errors.js"),c=n("./shared/events/index.js"),u=n("./shared/util.js"),h=n("./shared/perf.js"),p=n("./settings.js"),f=n("./shared/loading.js"),m=n("./shared/w2.timing.js"),_=n("./shared/jquery.js"),g=n("./shared/core/component.js"),v=n("./shared/core/webnode.js"),b=n("./shared/client.js"),y=n("./shared/rpc_manager.js"),w=n("./shared/window_manager.js"),E=n("./shared/Class.js").Class,T=n("./shared/broadcast.js");PAGE_IS_MOBILE?(a=n("./mobile_app2/client.js"),l=n("./mobile_app2/messages.js")):(p.isExpandedBroadcast||(i=n("./w2.livenode.js")),r=n("./webnode2.js"),s=n("./w2.errors.js"),o=n("./actions.js"));var S={},C=!1;c.GlobalProxy.subscribe(c.Types.WEBNODE_RPC_RETRY_FAILED,function(e){var t=S[e.payload.requestId];t&&(t(),delete S[e.payload.requestId])});var x=function(e){if(Array.isArray(e.app_data)){for(var t=0;t<e.app_data.length;t++)l.send("showPMsg",e.app_data[t]);delete e.app_data}Object.keys(e).length>0&&c.GlobalProxy.dispatch({type:c.Types.PMSG_SHOW,payload:{content:e,fadeOut:!0}})},k=E.extend({__init__:function(){this.__data={args:[],kwargs:{}},this.__success=null,this.__earlySuccess=null,this.__error=null,this.__contentFor=null,this.__url=null,this.__exceptionCatchAll=null,this.__name=null,this.__liveMutation=!1,this.__inLiveMutation=!1,this.__optimisticUpdate=!1,this.__liveMutateBroadcastId=null,this.__creationTime=Date.now(),this.__syncXhr=!1,PAGE_IS_MOBILE||(this.__isRelatedToUserAction=s.canBeRelatedToUserAction())},args:function(){return this.__data.args=Array.prototype.slice.call(arguments),this},kwargs:function(e){return this.__data.kwargs=u.extend({},e),this},url:function(e){return this.__url=e,this},_url:function(){return this.__url},_xhrFields:function(){return this.__xhrFields},xhrFields:function(e){return this.__xhrFields=e,this},_syncXhr:function(){return this.__syncXhr},syncXhr:function(e){return this.__syncXhr=e,this},_appFields:function(){return this.__appFields},appFields:function(e){return this.__appFields=e,this},success:function(e){return this.__success=e,this},earlySuccess:function(e){return this.__earlySuccess=e,this},error:function(e){return this.__error=e,this},_error:function(){return this.__error||this._defaultErrorHandler},_defaultErrorHandler:function(e,t,n){if(!PAGE_IS_MOBILE&&(p.debug||Math.random()<.1)&&400!==e.status&&504!==e.status&&!(p.debug&&502===e.status)&&0!==e.status){var i={statusCode:e.status,status:t,error:n,name:this.__name},o="Unhandled xhr error: "+JSON.stringify(i);this._logError(o)}},except:function(e,t){switch(arguments.length){case 1:this.__exceptionCatchAll=e;break;case 2:if("string"!=typeof e)return void this._logError("Except pattern should be a string, got: "+typeof e);this.__exceptionPatterns[e]=t;break;default:var n=Array.prototype.slice.call(arguments);this._logError("Invalid arguments to except: "+JSON.stringify(n))}return this},contentFor:function(e,t){if(t=t||{},!t.parentCid){if(!this._component)return void this._logError("contentFor parentCid not specified for non component rpc.");t.parentCid=this._component.cid}return e instanceof _&&(e=e.get(0)),t=u.extend(t,{element:e}),PAGE_IS_MOBILE||t.useLoadingSpinner||!1===t.useLoadingSpinner||(t.useLoadingSpinner=!0),this.__contentFor=t,this},sendJsData:function(e){return this._sendJsData=!!e,this},liveMutate:function(e){return p.isExpandedBroadcast&&(this.__liveMutateBroadcastId=T.getId()),PAGE_IS_MOBILE||(p.isExpandedBroadcast?T.showLiveSpinner():(this.__liveMutation=!0,e=e||{},e.optimisticUpdate===undefined?this.__optimisticUpdate=!1:this.__optimisticUpdate=e.optimisticUpdate)),this},disableDefaultUserPerceivedLogging:function(){return this._disableDefaultUserPerceivedLogging=!0,this},sendOnlyOnce:function(){return this._onlyOnce(),this.send()},sendUsingBeacon:function(){if(b.isNativeApp())return this._send();if(this.syncXhr(!0),!(window.navigator&&window.navigator.sendBeacon&&!(PAGE_IS_MOBILE&&b.isIOSMobileWeb())))return this._send();var e=new window.FormData,t=this._data();for(var n in t)e.append(n,t[n]);try{window.navigator.sendBeacon(this._url(),e)}catch(e){this._send()}},send:function(e){if(!e||!e.batched)return this._send();y.enqueueRequest(this)},_send:function(){var e=p.subdomain_name||"www",t=this._url();if(b.isNativeApp()&&(t.startsWith("//")&&(t=window.location.protocol+t),t.startsWith("http://")||t.startsWith("https://"))){var n=u.getLocation(t),o=n.hostname,s=o.indexOf(p.subdomain_suffix);e=o.substr(0,s-1)||"www",t=n.pathname}if(!PAGE_IS_MOBILE&&(!p.isExpandedBroadcast&&this.__liveMutation&&(this.__inLiveMutation=!0,this.__liveMutationInfo=i.startMutation(this.__optimisticUpdate)),this.__contentFor)){if(!p.windowId)return this;this.__contentFor.useLoadingSpinner&&(this.__contentForLoadingTimeout=setTimeout(function(){r.forgetContents(_(this.__contentFor.element));var e=document.createElement("div");e.className="__contentfor_loading_dots",e.appendChild(f.createDots()),this.__contentFor.element.appendChild(e),this.__contentForLoadingDots=e}.bind(this),150))}var d={post:this._data(),url:t,subdomain:e};if(!C&&t.startsWith(p.serverCallUrl)&&(d.post.__first_server_call=!0,C=!0),this._beforeSendHandler(),this.__onlyOnce){if(this._isSimilarServerCallActive())return this;this._component.activeServerCalls[this.__method]=1}var c=this._successHandler.bind(this),h=this._error().bind(this),g=this._completeHandler.bind(this);if(PAGE_IS_MOBILE)d.callbackId=a.registerCallback(function(e){e.success?e.response&&c(e.response):h(),g()}),d.post.__mobile_page=!0,b.isMobileWeb()?(this._xhrFields()&&(d.xhrFields=this._xhrFields()),d.async=!this._syncXhr()):b.isNativeApp()&&this._appFields()&&(d.appFields=this._appFields()),l.send("webnodeServerCall",d);else{this.__startTime=m.getTime(),d.dataType="json",d.type="POST",d.xhrFields=this._xhrFields(),d.async=!this._syncXhr();var v=this._beforeErrorHandler.bind(this);d.success=c,d.error=function(e,t,n){try{v.apply(this,arguments)}finally{h.apply(this,arguments)}},d.complete=g,d.data=d.post,_.ajax(d)}},_beforeSendHandler:function(){this.__hmac&&(this._action=h.startPOST({hmac:this.__hmac,method:this.__method}),this._disableDefaultUserPerceivedLogging||(this._userPerceivedAction=h.startUserPerceived({hmac:this.__hmac,method:this.__method})))},_beforeErrorHandler:function(e,t,n){this.__contentFor&&this.__contentFor.useLoadingSpinner&&this.__contentForLoadingDots&&this.__contentFor.element.removeChild(this.__contentForLoadingDots),PAGE_IS_MOBILE||s.reportAjaxError(e,t,n,this.__isRelatedToUserAction,this.__creationTime)},_completeHandler:function(){if(this.__startTime&&m.logRequestTime(this.__name,this.__startTime),this._action&&(h.finishAction(this._action),this._action=null),!this._disableDefaultUserPerceivedLogging&&this._userPerceivedAction&&(h.finishAction(this._userPerceivedAction),this._userPerceivedAction=null),this.__onlyOnce&&this._isSimilarServerCallActive()&&delete this._component.activeServerCalls[this.__method],this.__contentForLoadingTimeout&&clearTimeout(this.__contentForLoadingTimeout),!PAGE_IS_MOBILE&&!p.isExpandedBroadcast&&this.__inLiveMutation){if(this.__liveMutationInfo){var e=this.__liveMutationInfo.transactionId;e&&i.mutationDoneAfterVersion(e,0)}this.__inLiveMutation=!1}},_successHandler:function(e){if(e.pmsg&&x(e.pmsg),e.exception)return void this._handleException(e);if(this.__earlySuccess&&this.__earlySuccess(e.value),this.__contentFor){var t=_(this.__contentFor.element);PAGE_IS_MOBILE||r.forgetContents(t),document.body.contains(t.get(0))&&(this.__contentFor.inPlace?(t.replaceWith(_(e.value.html)),v.evaluateContentJS(e.value)):v.setContent(t,e.value)),PAGE_IS_MOBILE||_(document).trigger("rpc_content_for_done",{opts:this.__contentFor,value:e.value})}this.__success&&this.__success(e.value),!this.__liveMutation||"post_reload"!=p.pageMode||p.isLoggedIn||w.isPendingNavigation()||w.reload(),this.__liveMutateBroadcastId&&T.markComponentsAsSafeToReload(this._component),PAGE_IS_MOBILE?b.isAndroidApp()&&a.buildNumber>=1163&&!p.ajaxServerCalls||e.dirtied_depkeys&&l.send("broadcastAllWebViews",{messageName:"reloadDirtiedDepkeys",data:{dirtied_depkeys:e.dirtied_depkeys}}):e.dirtied_depkeys?T.reloadDirtiedDepkeys(e.dirtied_depkeys,T.shouldForceReloadDirtiedDepkeys(e.dirtied_depkeys),!1,!0):T.hideLiveSpinner(),e.post_perf_html&&c.DocumentProxy.dispatch({type:c.Types.PERF_POST_HTML,payload:{html:e.post_perf_html,js:e.post_perf_js}})},_onlyOnce:function(){return this._component.activeServerCalls||(this._component.activeServerCalls={}),this.__onlyOnce=!0,this},_invokeExceptionCallback:function(e){var t=this.__exceptionPatterns[e.exception.type];return t?t(e.exception,e,this):!this.__exceptionCatchAll||void this.__exceptionCatchAll(e.exception,e,this)},_handleException:function(e){if(this._invokeExceptionCallback(e)){var t=p.request_id;c.DocumentProxy.dispatch({type:c.Types.WEBNODE_RPC_EXCEPTION,payload:{exceptionType:e.exception.type,requestId:t}}),S[t]=this.send.bind(this)}},_data:function(){p.formkey||this._logError("Formkey not set, cannot send request securely.");var e;try{e=JSON.stringify(this.__data,function(e,t){return t===undefined?null:t})}catch(t){this._logError("Unable to JSON encode arguments for RPC."),e=JSON.stringify({error:"Unable to JSON encode arguments for RPC"})}var t={json:e,revision:p.revision,formkey:p.formkey,postkey:p.postkey,window_id:p.windowId,referring_controller:p.controller,referring_action:p.action};if(this.__contentFor&&(t.parent_cid=this.__contentFor.parentCid,!PAGE_IS_MOBILE)){var n=this.__contentFor.element,i=g.getLiveChildren(t.parent_cid),r=i.filter(function(e){return n.contains(document.getElementById(e))});t.parent_domid=g.getLiveParent(t.parent_cid),t.domids_to_remove=JSON.stringify(r)}if(!PAGE_IS_MOBILE&&this.__liveMutation&&u.extend(t,this.__liveMutationInfo.data),this.__liveMutateBroadcastId&&(t.broadcast_id=this.__liveMutateBroadcastId),this.__hmac&&(t.__hmac=this.__hmac,t.__method=this.__method,!PAGE_IS_MOBILE)){var s=o.startOrUpdateAction(t.__e2e_action_id,{url:this.__url,hmac:this.__hmac,method:this.__method,args:t.args,kwargs:t.kwargs});t.__e2e_action_id=s.id}return this._component&&(this._sendJsData&&(t.js_init=JSON.stringify(this._component.__js_init)),t.__metadata=JSON.stringify(O(this._component))),t},_isSimilarServerCallActive:function(){return!!this._component.activeServerCalls&&this.__method in this._component.activeServerCalls},_errorDebugInfo:function(){return"url: "+this.__url},_logError:function(e){e=this._errorDebugInfo()+"\n\n"+e,d.logJsError("coreRpc",e)}});t.rpc=function(e){return(new k).url(e)},t.ServerCall=k.extend({__init__:function(e,t,n){this._super(),this.__hmac=e,this.__method=t,this.__name=this.__hmac+"."+this.__method,this.__exceptionPatterns={state_expired:this._stateExpired.bind(this),invalid_parent_component:this._invalidParentComponent.bind(this)};var i=p.serverCallUrl;b.isIOSApp()||(i=w.addParamToURL(i,"_h",e),i=w.addParamToURL(i,"_m",t)),this.url(i),this._component=n,this._sendJsData=!0,this._action=null,this._disableDefaultUserPerceivedLogging=!1,this._userPerceivedAction=null},_stateExpired:function(){PAGE_IS_MOBILE?l.send("showAlert",{title:p.interface_strings.page_out_of_date,message:p.interface_strings.please_refresh},function(e){1==e.buttonIndex&&l.send("reload")}):p.isExpandedBroadcast||i.reportPageNeedsReload("livenode_state_expired")},_invalidParentComponent:function(){PAGE_IS_MOBILE||p.isExpandedBroadcast||(this._logError("Invalid contentFor parent: "+JSON.stringify(this.__contentFor)),i.reportPageNeedsReload("livenode_contentfor_invalid_parent"))},_errorDebugInfo:function(){return["component: "+g.getErrorLabel(this._component.cid),"method: "+this.__method].join("\n")}});var A={},I=[];t.addMetadataCallback=function(e){I.push(e)};var O=function(e){var t=e.cid,n=t in A?A[t]:{};delete A[t];for(var i=0;i<I.length;i++)I[i](n,e);return n};t.atLeastOneServerCallIsSent=function(){return C}},"./shared/core/webnode.js":function(module,exports,__webpack_require__){var coreComponent=__webpack_require__("./shared/core/component.js"),webnodeTiming=__webpack_require__("./shared/w2.timing.js"),context=__webpack_require__("./shared/w2.context.js"),settings=__webpack_require__("./settings.js"),errors=__webpack_require__("./shared/errors.js"),gating=__webpack_require__("./gating.js"),sharedClient=__webpack_require__("./shared/client.js"),broadcast=__webpack_require__("./shared/broadcast.js"),ERROR_SAMPLING_RATE=.05,_missingComponentClasses={},shouldSampleError=function(e){return!(settings.isClonedPage||!e)||Math.random()<ERROR_SAMPLING_RATE},logMissingComponentClassError=function(e,t,n,i){if(shouldSampleError(i)){var o=[e?'require("'+e+'").':"window.",t].join("");if(!_missingComponentClasses[o]){_missingComponentClasses[o]=!0;var r="Cannot find component class: "+o;r+=" (isPageLoad = "+i+")",r+="\n\njs_init: "+JSON.stringify(n),errors.logJsError("webnode",r)}}},parseJSInit=exports.parseJSInit=function(e){return{module:e[0],export_:e[1],cid:e[2],cname:e[3],data:e[4],extra_args:e[5],fallback_module:e[6],fallback_export_:e[7]}},_modulehasError={},getComponentCls=function(e,t,n,i){if(_modulehasError[e])return null;var o;try{o=e?window.require(e):window}catch(t){_modulehasError[e]=!0,"MODULE_NOT_FOUND"==t.code?i||(handleModuleNotFoundDebug(e),shouldSampleError(n)&&errors.logJsError("webnode","Module not found: "+e)):errors.report(t)}return o?o[t]:null},createComponentInstance=exports.createComponentInstance=function(e,t){var n=parseJSInit(e),i=getComponentCls(n.module,n.export_,t,!!n.fallback_module)||getComponentCls(n.fallback_module,n.fallback_export_,t);if(!i)return _modulehasError[n.module]||logMissingComponentClassError(n.module,n.export_,e,t),null;var o=new i(n.cid,n.cname,n.data,n.extra_args);return o.__initDataArray=e,o},onLoadComponents=exports.onLoadComponents=function(e,t){for(var n=0;n<e.length;n++)context.initComponent(e[n]);for(var i=0;i<e.length;i++)onLoadComponent(e[i],t);return!PAGE_IS_MOBILE&&window.clearHandlers&&window.clearHandlers(),e},onLoadComponent=function(e,t){if(PAGE_IS_MOBILE&&e.getDvar("disableOnload"))return void((sharedClient.isNativeApp()||gating.force_mobile_app_modals)&&__webpack_require__("./mobile_app2/page_cloner.js").maybeSendHead());var n=Date.now(),i=e.cid;try{e.onLoad(t),e._flushOnLoadCallbacks()}catch(e){if(shouldSampleError(t)){var o=["isPageLoad="+t,coreComponent.getErrorLabel(i)].join(" ");e.message=e.message+" - "+o,errors.report(e)}}webnodeTiming.timing.components&&(webnodeTiming.timing.components[i]||(webnodeTiming.timing.components[i]={}),webnodeTiming.timing.components[i].l=Date.now()-n)},sleep=function(e){for(var t=Date.now();;){if(Date.now()-t>e)return}};exports.initialize2=function(e,t,n,i,o,r){n&&settings.onloadDelay>0&&sleep(settings.onloadDelay),coreComponent.beforeOnLoad(n),coreComponent.addComponentMetadata(e),t=t.map(function(e){return createComponentInstance(e,n)}),t=t.filter(function(e){return e}),coreComponent.registerComponents(t),onLoadComponents(t,n),i&&(o!==undefined&&(i=[i,o,r]),broadcast.initialize(i)),coreComponent.afterOnLoad(n)};var setContentHTML=exports.setContentHTML=function(e,t){e.html?e.html(t.html):e.innerHTML=t.html},evaluateContentJS=exports.evaluateContentJS=function(content){var js=content.js?content.js:content;eval(js)};exports.setContent=function(e,t){setContentHTML(e,t),evaluateContentJS(t)};var handleModuleNotFoundDebug=function(e){return}},"./shared/debounce.js":function(e,t){var n=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)};t.debounce=function(e,t,i){function o(){m&&clearTimeout(m),u&&clearTimeout(u),g=0,u=m=_=undefined}function r(){return Date.now()}function s(t,n){n&&clearTimeout(n),u=m=_=undefined,t&&(g=r(),h=e.apply(f,c),m||u||(c=f=undefined))}function a(){var e=t-(r()-p);e<=0||e>t?s(_,u):m=setTimeout(a,e)}function l(){s(b,m)}function d(){var n,i;if(c=arguments,p=r(),f=this,_=b&&(m||!y),!1===v)n=y&&!m;else{u||y||(g=p);var o=v-(p-g);i=o<=0||o>v,i?(u&&(u=clearTimeout(u)),g=p,h=e.apply(f,c)):u||(u=setTimeout(l,o))}return i&&m?m=clearTimeout(m):m||t===v||(m=setTimeout(a,t)),n&&(i=!0,h=e.apply(f,c)),!i||m||u||(c=f=undefined),h}var c,u,h,p,f,m,_,g=0,v=!1,b=!0;if("function"!=typeof e)throw new Error("Only able to debounce functions.");t=t<0?0:+t||0;var y;return!0===i?(y=!0,b=!1):n(i)&&(y=!!i.leading,v="maxWait"in i&&Math.max(+i.maxWait||0,t),b="trailing"in i?!!i.trailing:b),d.cancel=o,d},t.throttle=function(e,i,o){var r=!0,s=!0;if("function"!=typeof e)throw new Error("Only able to throttle functions.");return n(o)&&(r="leading"in o?!!o.leading:r,s="trailing"in o?!!o.trailing:s),t.debounce(e,i,{leading:r,maxWait:i,trailing:s})}},"./shared/dom.js":function(e,t,n){function i(e){if(!e||!e.parentNode)return!1;var t=e.getAttribute("id");e.setAttribute("id",l);var n=!!document.getElementById(l);return t?e.setAttribute("id",t):e.removeAttribute("id"),n}var o=n("./shared/jquery.js"),r=n("./shared/util.js"),s=n("./shared/eventemitter.js"),a=n("./shared/browser.js"),l=(new Date).toString(16),d=!1;t.onDocClick=function(){var e=new s.EventEmitter,t=r.once(function(){o(document).on("click",function(t){e.trigger("click",[t.target])})});return function(n){t(),e.on("click",n)}}(),t.getScrollbarWidth=function(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var n=e.offsetWidth;t.style.overflow="scroll";var i=e.offsetWidth;return n==i&&(i=t.clientWidth),document.body.removeChild(t),n-i},t.anchor=function(e,t){if(e=o(e),d||e.length<1)return e;d=!0;var n=[],r=o(window).scrollTop(),s=o(window).scrollLeft();n.length=e.length;for(var a=0;e[a];++a)n[a]=[e[a],o(e[a]).offset().top-r];var l=function(){for(var e,t,r,a={},l=0,c=[undefined,-1];t=n[l++];)i(t[0])&&(e=o(t[0]).offset().top-t[1],r=a[e]=(a[e]||0)+1,c[1]<r&&(c=[e,r]));-1!=c[1]&&window.scrollTo(s,Math.round(c[0],0)),d=!1};return t?l:(setTimeout(l,10),e)},t.addAnimationClass=function(e,t,n){function i(){for(var e=0;e<d.length;e++){var t=s.css(d[e]);if(t)return t}}function r(e){return!!e&&e.originalEvent.animationName+l}var s=o(e);if(a.msie&&a.version<=9)return n(),s;var l="W2_css_animation",d=["-webkit-animation-name","-moz-animation-name","-o-animation-name","-ms-animation-name"];s.addClass(t),s.on("oanimationend animationend webkitAnimationEnd MSAnimationEnd",function(e){s.trigger(r(e))});var c=i()+l;return s.on(c,function(){s.off(c),s.removeClass(t),n()}),s}},"./shared/e2e.js":function(e,t,n){var i,o=n("./shared/util.js"),r=n("./shared/log_sender.js"),s=n("./gating.js"),a=n("./settings.js"),l=n("./shared/w2.timing.js"),d=n("./shared/window_performance.js"),c=n("./shared/client.js"),u=n("./third_party/rum-speedindex.js");PAGE_IS_MOBILE&&(i=n("./mobile_app2/client.js"));var h=!1,p=!1,f=null,m=null;t.NATIVE_PERF_SAMPLE_RATE=.01;var _=!1;t.maybeReportPrefetchedData=function(){_=!0,window.performance.timing.loadEventEnd>0&&E()},PAGE_IS_MOBILE&&i.registerMessageHandler("logPerformanceData",function(e){if("web_view_page_ready"==e.measurement&&e.error===undefined){var t={native_first_paint:e.duration,network_class:a.networkClass};"native_perf_data"in e&&(t.native_perf_data=e.native_perf_data),y(t)}}),t.reportPageData=function(e){if(null!==e){var t=l.timing,n={};for(var i in t)"components"!==i&&"_components"!==i&&(n[i]=t[i]);f=o.extend(e,{win_perf:{path:window.location.pathname,revision:a.revision,request_id:a.request_id,controller:a.controller,action:a.action,server_time:t.server_time,total_worker_time:t.total_worker_time,window_id:t.window_id,is_css_inlined:t.is_css_inlined,is_early_js_inlined:t.is_early_js_inlined,experiments:t.experiments,envs:t.envs},w2_timing:n}),v()}};var g=function(){return window.performance&&window.performance.timing},v=function(){if(g()&&0===window.performance.timing.loadEventEnd)return void setTimeout(v,250);b()},b=function(){f.win_perf.timing=d.getNavigationTiming()||{};var e=u.getFirstPaint();0!==e&&(f.win_perf.timing.firstPaint=e),Math.random()<=s.speed_index_sampling_rate&&(f.win_perf.speedIndex=u.getSpeedIndex()),l.stop(),h=!0,w()},y=function(e){m=e,w()},w=function(){PAGE_IS_MOBILE?E():T()},E=function(){var e=!1;c.isMobileWeb()&&h&&(e=!0),!g()&&m&&(e=!0),h&&f&&m&&(e=!0),c.isNativeApp()&&a.isPagePrefetched&&!_&&(e=!1),e&&T()},T=function(){if(!p){p=!0;var e=o.extend(f||{},m||{});a.shouldReportE2E&&setTimeout(function(){e.resource_timing=d.getResourceTimingInfo(),e.cdn=a.cdn,r.log("perf/get_e2e",e)},100),a.componentInspector||(delete l.timing.components,delete l.timing._components)}}},"./shared/email.js":function(e,t){t.isValidEmail=function(){var e="[^\\x0d\\x22\\x5c\\x80-\\xff]",t="[^\\x0d\\x5b-\\x5d\\x80-\\xff]",n="[^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+",i="\\x5c[\\x00-\\x7f]",o="\\x5b("+t+"|"+i+")*\\x5d",r="\\x22("+e+"|"+i+")*\\x22",s=n,a="("+s+"|"+o+")",l="("+n+"|"+r+")",d=a+"(\\x2e"+a+")*",c=l+"(\\x2e"+l+")*",u=c+"\\x40"+d,h="^"+u+"$",p=new RegExp(h);return function(e){return p.test(e)}}()},"./shared/errors.js":function(e,t,n){function i(e){s()&&(f+=1,p.push(e),m())}function o(e,t){var n=!1;return function(){n||(n=!0,setTimeout(function(){n=!1,e()},t))}}function r(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],o=i.stack;if(o&&o.length){for(var r=!1,s=0;s<o.length;s++){var a=o[s];if(a.url&&(-1!=a.url.indexOf("quora.com/static")||-1!=a.url.indexOf("quoracdn.net"))){r=!0;break}}r&&t.push(i)}}return t}function s(){if(Math.random()>h)return!1;if(f>u)return!1;var e=window.require.hasModule("shared/browser")&&window.require("shared/browser");return!e||!e.opera}function a(){var e="";return"quora.com"==window.Q.subdomainSuffix&&(e+=[window.location.protocol,"//log.quora.com"].join("")),e+="/ajax/log_errors_3RD_PARTY_POST"}function l(){var e=r(p);p=[],0!==e.length&&c(a(),{revision:window.Q.revision,errors:JSON.stringify(e)})}var d=n("./third_party/tracekit.js"),c=n("./shared/basicrpc.js").rpc;d.remoteFetching=!1,d.collectWindowErrors=!0,d.report.subscribe(i);var u=10,h=window.Q&&window.Q.errorSamplingRate||1,p=[],f=0,m=o(l,1e3),_=window.console&&!(window.NODE_JS&&window.UNIT_TEST);t.report=function(e){try{_&&console.error(e.stack||e),d.report(e)}catch(e){}};var g=function(e,t,n){i({name:t,message:n,source:e,stack:d.computeStackTrace.ofCaller().stack||[]}),_&&console.error(n)};t.logJsError=g.bind(null,"js"),t.logMobileJsError=g.bind(null,"mobile_js")},"./shared/eventemitter.js":function(e,t,n){var i=n("./shared/Class.js").Class,o=n("./shared/errors.js");t.EventEmitter=i.extend({on:function(e,t){this.__handlers=this.__handlers||{},this.__handlers[e]=this.__handlers[e]||[],this.__handlers[e].push(t)},off:function(e,t){if(this.__handlers&&this.__handlers[e]){var n=this.__handlers[e].indexOf(t);-1!=n&&this.__handlers[e].splice(n,1)}},once:function(e,t){this.__onceHandlers=this.__onceHandlers||{},this.__onceHandlers[e]=this.__onceHandlers[e]||[],this.__onceHandlers[e].push(t)},trigger:function(e,t){for(var n=this.__handlers&&this.__handlers[e]||[],i=[],r=0;r<n.length;r++)try{i.push(n[r].apply(null,t||[]))}catch(e){o.report(e)}for(var s=this.__onceHandlers&&this.__onceHandlers[e]||[];0!==s.length;)try{i.push(s.pop().apply(null,t||[]))}catch(e){o.report(e)}return i}})},"./shared/events/helpers.js":function(e,t,n){var i=n("./shared/events/types.js").EventTypes,o=n("./shared/events/scope.js");t.addAnswerUpvote=function(e,t){return{type:i.ANSWER_VOTE_STATE,payload:{aid:e,state:"upvoted",cid:t},scope:o.GLOBAL}},t.addAnswerDownvote=function(e){return{type:i.ANSWER_VOTE_STATE,payload:{aid:e,state:"downvoted"},scope:o.GLOBAL}},t.removeAnswerDownvote=t.removeAnswerUpvote=function(e,t){return{type:i.ANSWER_VOTE_STATE,payload:{aid:e,state:null,cid:t},scope:o.GLOBAL}},t.addUserFollow=function(e,t){return{type:i.USER_FOLLOW_STATE,payload:{uid:e,state:"followed",source:t},scope:o.GLOBAL}},t.removeUserFollow=function(e){return{type:i.USER_FOLLOW_STATE,payload:{uid:e,state:null},scope:o.GLOBAL}},t.addQuestionDownvote=function(e){return{type:i.QUESTION_VOTE_STATE,payload:{qid:e,state:"downvoted"},scope:o.GLOBAL}},t.removeQuestionDownvote=function(e){return{type:i.QUESTION_VOTE_STATE,payload:{qid:e,state:null},scope:o.GLOBAL}},t.addPostUpvote=function(e,t){return{type:i.POST_VOTE_STATE,payload:{pid:e,state:"upvoted",cid:t},scope:o.GLOBAL}},t.removePostUpvote=function(e,t){return{type:i.POST_VOTE_STATE,payload:{pid:e,state:null,cid:t},scope:o.GLOBAL}},t.addPostDownvote=function(e){return{type:i.POST_VOTE_STATE,payload:{pid:e,state:"downvoted"},scope:o.GLOBAL}},t.removePostDownvote=function(e){return{type:i.POST_VOTE_STATE,payload:{pid:e,state:null},scope:o.GLOBAL}},t.addHyperLinkUpvote=function(e,t){return{type:i.HYPERLINK_VOTE_STATE,payload:{link_id:e,state:"upvoted",cid:t},scope:o.GLOBAL}},t.addHyperLinkDownvote=function(e){return{type:i.HYPERLINK_VOTE_STATE,payload:{link_id:e,state:"downvoted"},scope:o.GLOBAL}},t.removeHyperLinkDownvote=t.removeHyperLinkUpvote=function(e,t){return{type:i.HYPERLINK_VOTE_STATE,payload:{link_id:e,state:null,cid:t},scope:o.GLOBAL}},t.addQuoraShareUpvote=function(e,t){return{type:i.QUORA_SHARE_VOTE_STATE,payload:{share_id:e,state:"upvoted",cid:t},scope:o.GLOBAL}},t.addQuoraShareDownvote=function(e){return{type:i.QUORA_SHARE_VOTE_STATE,payload:{share_id:e,state:"downvoted"},scope:o.GLOBAL}},t.removeQuoraShareDownvote=t.removeQuoraShareUpvote=function(e,t){return{type:i.QUORA_SHARE_VOTE_STATE,payload:{share_id:e,state:null,cid:t},scope:o.GLOBAL}},t.addQuestionCantAnswer=function(e){return{type:i.QUESTION_CANT_ANSWER_STATE,payload:{qid:e,state:"passed"},scope:o.GLOBAL}},t.removeQuestionCantAnswer=function(e){return{type:i.QUESTION_CANT_ANSWER_STATE,payload:{qid:e,state:null},scope:o.GLOBAL}},t.changeQuestionDeletionState=function(e){return{type:i.QUESTION_DELETE_STATE_CHANGE,payload:{qid:e},scope:o.GLOBAL}},t.inlineEditorCancel=function(e,t){return{type:i.INLINE_EDITOR_STATE,payload:{oid:t,contentType:e,state:"cancel"}}},t.inlineEditorEdit=function(e,t){return{type:i.INLINE_EDITOR_STATE,payload:{oid:t,contentType:e,state:"edit"}}},t.inlineEditorLoad=function(e,t){return{type:i.INLINE_EDITOR_STATE,payload:{oid:t,contentType:e,state:"load"}}},t.inlineEditorSubmit=function(e,t){return{type:i.INLINE_EDITOR_STATE,payload:{oid:t,contentType:e,state:"submit"}}},t.inlineEditorSubmitted=function(e,t){return{type:i.INLINE_EDITOR_STATE,payload:{oid:t,contentType:e,state:"submited"}}},t.inlineEditorDisclaimer=function(e,t){return{type:i.INLINE_EDITOR_STATE,payload:{oid:t,contentType:e,state:"disclaimer"}}},t.inlineEditorToggle=function(e,t){return{type:i.INLINE_EDITOR_STATE,payload:{oid:t,contentType:e,state:"toggle"}}},t.loginUser=function(e){return{type:i.LOGIN_USER,payload:{pmsg:e},scope:o.GLOBAL}},t.logoutUser=function(){return{type:i.LOGOUT_USER,payload:{},scope:o.GLOBAL}},t.anonLinkSaved=function(){return{type:i.ANON_LINK_SAVED,payload:{},scope:o.GLOBAL}},t.feedNegativeFeedback=function(e,t,n,r){return t?{type:i.FEED_NEGATIVE_FEEDBACK_STATE,payload:{oid:e,message:t,state:"show_message",action:n,action_id:r},scope:o.GLOBAL}:{type:i.FEED_NEGATIVE_FEEDBACK_STATE,payload:{oid:e,state:"hide"}}}},"./shared/events/hub.js":function(e,t,n){var i=n("./shared/Class.js").Class,o=n("./shared/eventemitter.js").EventEmitter,r=n("./shared/errors.js"),s=n("./shared/events/types.js"),a=i.extend({__init__:function(){this.reset()},reset:function(){this._emitter=new o,this._allEmitter=new o},_isValidType:function(e,t){if(!s.EventTypes[e]){var n="Unknown error type - "+e;return n=t?n+", "+t():n,r.logJsError("Hub",n),!1}return!0},_isValidEvent:function(e){var t=this._isValidType(e.type,function(){return"Trying to emit: "+JSON.stringify(e)}),n=!!e.payload,i=!!e.scope;return n||r.logJsError("Hub","Event object missing payload - "+JSON.stringify(e)),i||r.logJsError("Hub","Event object missing scope - "+JSON.stringify(e)),t&&n&&i},subscribe:function(e,t,n){var i=function(){return"Trying to subscribe to "+(n=n||t)};this._isValidType(e,i)&&this._emitter.on(e,t)},subscribeAll:function(e){this._allEmitter.on("any",e)},unsubscribe:function(e,t,n){var i=function(){return"Trying to unsubscribe from "+(n=n||t)};this._isValidType(e,i)&&this._emitter.off(e,t)},dispatch:function(e){this._isValidEvent(e)&&(this._emitter.trigger(e.type,[e]),this._allEmitter.trigger("any",[e]))}});t.Hub=new a},"./shared/events/index.js":function(e,t,n){var i=n("./shared/events/types.js"),o=n("./shared/events/proxy.js"),r=n("./shared/events/hub.js"),s=n("./shared/events/scope.js"),a=n("./shared/events/helpers.js");t.Types=i.EventTypes,t.GlobalProxy=o.Global,t.DocumentProxy=o.Document,t.Hub=r.Hub,t.ComponentProxy=o.Component,t.scope=s,t.helpers=a},"./shared/events/proxy.js":function(e,t,n){var i=n("./shared/Class.js").Class,o=n("./shared/events/hub.js").Hub,r=n("./shared/events/scope.js"),s=i.extend({__init__:function(){this._subscriptions={}},reset:function(){for(var e=Object.keys(this._subscriptions),t=0;t<e.length;t++)this.unsubscribeAll(e[t])},subscribe:function(e,t,n){var i=function(e){e.scope.contains(n)&&t(e)};this._subscriptions[n]=this._subscriptions[n]||[],this._subscriptions[n].push([e,i,t]),o.subscribe(e,i,t)},unsubscribeAll:function(e){var t=this._subscriptions[e];if(t){for(var n=0;n<t.length;n++){var i=t[n],r=i[0],s=i[1],a=i[2];o.unsubscribe(r,s,a)}delete this._subscriptions[e]}},dispatch:function(e,t){e.scope||(e.scope=this.defaultScope(e.type,t)),o.dispatch(e)},defaultScope:function(e,t){return null}}),a=s.extend({defaultScope:function(e,t){return r.GLOBAL}}),l=s.extend({defaultScope:function(e,t){return r.DOCUMENT}}),d=s.extend({defaultScope:function(e,t){return new r.ComponentScope(t)}});t.Global=new a,t.Document=new l,t.Component=new d},"./shared/events/scope.js":function(e,t,n){var i=n("./shared/Class.js").Class,o=n("./shared/errors.js");t.GLOBAL={contains:function(){return!0},toJSON:function(){return{type:"GlobalScope"}}},t.DOCUMENT={contains:function(){return!0},toJSON:function(){return{type:"DocumentScope"}}},t.ComponentScope=i.extend({__init__:function(e){this.source=e;var t=n("./shared/core/component.js");if(!t.isCid(e)){var i="ComponentScope used by unknown component"+t.getErrorLabel(e);o.logJsError("events",i)}this.rootParent=t.getRootParent(e)},contains:function(e){var t=n("./shared/core/component.js");return!!t.isCid(e)&&this.rootParent==t.getRootParent(e)},toJSON:function(){return{type:"ComponentScope",source:this.source,root:this.rootParent}}})},"./shared/events/types.js":function(e,t,n){var i=n("./shared/util.js");t.EventTypes=i.makeEnum(["A2A_UPDATE_TOPIC","A2A_ADD_TOPIC_SUGGESTION","A2A_MODAL_ADD_TOPIC_FILTER","A2A_SEND_REQUEST","A2A_EDIT_TOPIC_TOGGLE","A2A_SHOW_REQUEST_PROMPT","A2A_SELECTOR_TOGGLE","A2A_MODAL_TAB_SWITCH","A2A_TOGGLE_LIMIT_MESSAGE","AD_REPORTED","ADS_MANAGER_ACCOUNT_SELECTOR_RESULT","ADS_MANAGER_AD_EDIT_SUBMIT","ADS_MANAGER_NOTIF_CLICKTHROUGH","ADS_MANAGER_AD_UNIT_SUGGESTIONS","ADS_MANAGER_ADD_SUGGESTED_TOPIC","ADS_MANAGER_BULK_AD_EDIT_SUBMIT","ADS_MANAGER_CHANGE_TARGETING","ADS_MANAGER_CLEAR_TARGET_AD_SET","ADS_MANAGER_CREATE_CONVERSION","ADS_MANAGER_CUSTOM_COLUMNS_SELECTED","ADS_MANAGER_EMAIL_REPORT_CREATED","ADS_MANAGER_EMPTY_ENTITY_NAMES","ADS_MANAGER_ERR","ADS_MANAGER_IMPORT_AD","ADS_MANAGER_IMPORT_AD_SET","ADS_MANAGER_LOADING","ADS_MANAGER_LOAD_TABLE","ADS_MANAGER_LOGO_INPUTS_LOADED","ADS_MANAGER_LOGO_SELECTED","ADS_MANAGER_PIXEL_EVENT_DELETED","ADS_MANAGER_PREVIEW_LOADED","ADS_MANAGER_ROW_SELECTED","ADS_MANAGER_SELECTOR_ADD_DATA","ADS_MANAGER_SELECTOR_COUNT_CHANGE","ADS_MANAGER_TABLE_ACTION_CLICKED","ADS_MANAGER_TARGETING_IMPORT_COMPLETE","ADS_MANAGER_TOGGLE_AD_FORMAT","ADS_MANAGER_UPDATE_CPC_BID","ADS_MANAGER_UPDATE_CPC_RANGE","ADS_MANAGER_UPDATE_CPC_SIDEBAR","ADS_MANAGER_UPDATE_INVENTORY","ADS_MANAGER_UPDATE_PLATFORMS","ADS_MANAGER_UPDATE_SUGGESTED_TOPIC","ADS_MANAGER_UPDATE_SUGGESTED_BID","ADS_MANAGER_UPDATE_SUMMARY","ADS_MANAGER_UPDATE_TIME_FILTER","AD_MANAGER_VALID_ANSWER_URL_FILLED","ADS_MANAGER_CPA_CONFIRM_MODAL","ADS_MANAGER_ADD_PAYMENT_CARD_FORM_UPDATE","ADS_PROMOTE_ANSWER_PAYMENT_CARD_ADDED","ADS_REVIEW_QUEUE_ACTION","ACTIVATION_NEXT_STEP","ANON_LINK_SAVED","ANON_ACTION_VIEW_DISMISSED","ANON_QUESTION_FLAG","ANSWER_COMMENT_SORT_ALL","ANSWER_INBOX_PREVIEW_EXPAND","ANSWER_SURVEY_TRIGGER","ANSWER_MODAL_CONTENT_VISIBLE","ANSWER_TOGGLE_EDITOR","ANSWER_VOTE_STATE","ANSWER_DRAFT_DELETED","ANSWER_ADDED","ASK_QUESTION_MODAL_SUCCESS","ASK_QUESTION_MODAL_RESULT_CLICK","ASK_QUESTION_MODAL_QUERY_CHANGE","ASK_QUESTION_MODAL_OPEN","ASK_QUESTION_LIMIT_QUESTION_DISTRO","ASK_QUESTION_VIEW_DUPLICATE","ASK_QUESTION_ADD_DUPLICATE_ANYWAY","BROADCAST_RELOAD_DIRTIED_DEPKEYS","CAROUSEL_CHECK_DISMISS_ALL","CAROUSEL_DISMISS_ALL","COMMENT_ADD","COMMENT_REPLY_FOCUS","COMMENT_EDIT_FOCUS","COMMENT_WRITING_FOCUS_TOGGLE","CREDENTIAL_ADDED","CREDENTIAL_DELETED","CREDENTIAL_ADD_FORM_VISIBILITY","CREDENTIAL_CHOSEN","BOARD_DRAFT_DELETED","FEED_DEBUG_PASS_STORY_INFO","FEED_NEGATIVE_FEEDBACK_STATE","FEED_NUM_PIN_TOPICS","FEED_CONTROL_UPDATE","FEED_PAGING_DONE","FEED_ANSWER_INLINE_EXPAND","FEED_ANSWER_MODAL_OPEN","FEED_TRIBE_POST_INLINE_EXPAND","FILTER_NAV_LIST_UPDATE","FIREBASE_LOAD_ATTEMPT","HOME_MULTIFEED_REFRESH","HORIZONTAL_ITEM_DISMISSED","HORIZONTAL_SCROLL_ZONE_EMPTY","HIDE_OPEN_IN_APP_BANNER","SHOW_OPEN_IN_APP_BANNER","HYPERLINK_VOTE_STATE","HYPERLINK_ADDED_BY_USER","I18N_MONITOR_QUESTIONS_ADD","INLINE_EDITOR_STATE","INTERACTION_MODE_BANNER_STATE","IOS_NOTIF_PROMPT_COMPLETED","KNOWS_ABOUT_ADD_TOPIC","KNOWS_ABOUT_REMOVE_TOPIC","LAYOUT_SET_BACKDROP","LIVENODE_LOADING_SPINNER","LOGIN_UPDATE_FIELDS","LOGIN_USER","LOGOUT_USER","LOOKUP_BAR_ASK_QUESTION","LOOKUP_BAR_QUESTION_DETAILS_STATE","LOOKUP_BAR_SET_ASKING_TARGET","MESSAGE_THREAD_CLICKED","MESSAGE_SENT","MESSAGE_USER_BLOCKED","MOBILE_APP_MODAL_CLOSE","MOBILE_APP_MODAL_SUBMIT","MOBILE_APP_NAV_SIDEBAR_OPEN","MOBILE_APP_NAV_SIDEBAR_BADGE_UPDATE","MOBILE_NOTIFS_RESYNC","MULTIFEED_BUNDLE_REMOVE","MULTIFEED_TOP_QUESTIONS_FROM_NETWORK_HIDE","MULTIFEED_QUESTIONS_FOR_NEW_WRITERS_HIDE","MULTIFEED_ANSWERS_IN_TOPIC_HIDE","MULTIFEED_ANSWER_BUNDLE_EXPAND","MULTIFEED_TRANSLATE_ANSWER_SUGGESTIONS_HIDE","MULTIFEED_TRANSLATE_ANSWER_SUGGESTIONS_TARGET_SILO_HIDE","MULTIMODAL_PROXY_HACK","MULTIMODAL_DISMISS","MULTIMODAL_DONE","MULTIMODAL_LOAD","MULTIMODAL_LOADED","MULTIMODAL_SHOW","MULTIMODAL_SET_QUERY","MULTIMODAL_SET_LINK","MULTIMODAL_NATIVE_BACK","MULTIMODAL_NATIVE_SUBMIT","MULTIMODAL_HIDE_ACTIVE_STEP","MULTIMODAL_UNHIDE_ACTIVE_STEP","MULTI_SELECT_MODAL_SUBMIT","NOTIFS_CLEAR_BADGE","NOTIFS_HIDE_DROPDOWN","NOTIFS_MARK_ALL_READ","NOTIF_MARK_AS_READ","NUX_PROGRESS_BAR_STEP","NUX_DIALOG_CLOSE","NUX_DIALOG_NEXT_STEP","NUX_DIALOG_STANDALONE_DONE","NUX_DIALOG_SKIP_NEXT_STEP","NUX_DIALOG_FRIENDS_UPDATE","NUX_FEED_REFRESH","NUX_SELECT_TOPICS_ENABLE_SUBMIT","NUX_SELECT_TOPICS_DISABLE_SUBMIT","NETWORK_BETA_LOGIN_FORM_STATE","NETWORK_BETA_WAITLIST_FORM_STATE","NETWORK_INVITE_USER","NETWORK_JOIN_MODAL","PAGE_TAB_SELECTION_REQUEST","PAGE_TAB_SELECTION_CONFIRMATION","PAGE_TAB_DEFAULT_SELECTION_REQUEST","PAGE_TAB_DEFAULT_SELECTION_CONFIRMATION","PAGE_TAB_SELECTION_REQUEST_PROXY","PARTNER_INSIGHTS_TIME_CHANGE","PARTNER_QUESTION_STARTERS_TYPE_CHANGE","PARTNER_PROMPTS_TOPIC_REFRESH","PARTNER_PROMPTS_A2A_REFRESH","PARTNER_PROMPTS_TRANSLATION_REFRESH","PENDING_CONTENT_STATUS_CHANGE","PERF_POST_HTML","PHONE_NUMBER_SEND_VERIFICATION_CODE_CLICKED","PHONE_NUMBER_CONFIRM_CODE_CLICKED","PHONE_NUMBER_COUNTRY_CODE_SELECTED","PHONE_NUMBER_VERIFIED","PHONE_NUMBER_CONFIRMATION_UNSUCCESSFUL","PILE_ON_REQUEST_MADE","PMSG_SHOW","PROFILE_SWITCH_CONTENT","PROFILE_TOPICS_UPDATED","POST_DISCLAIMER","POST_VOTE_STATE","PUBLISHER_DASHBOARD_LOAD_TABLE","PUBLISHER_DASHBOARD_LOADING","PUBLISHER_DASHBOARD_UPDATE_TIME_FILTER","QTEXT_EXPANDABLE_STATE","QUESTION_BIO_TOPIC_SELECT","QUESTION_CANT_ANSWER_STATE","QUESTION_DELETE_STATE_CHANGE","QUESTION_TOPIC_SELECTION_ADD","QUESTION_VOTE_STATE","QUESTION_EDITING_STATE","QUESTION_SURVEY_SHOW","QUESTION_TRANSLATION_PROMPT_DISMISS","QUORA_SHARE_VOTE_STATE","QUORA_SHARE_ANSWER_EXPANDED","READING_LIST_VIEW_STATE","READING_LIST_ITEM_REMOVE","RELATED_QUESTIONS_EXPAND","RESHARE_ADDED","RESHARE_DELETED","RESHARE_OPEN_TRIBE_CREATION","RESHARE_DESTINATION_UPDATED","REVIEW_QUEUE_ACTIVITY","REVIEW_QUEUE_LOGOUT","SELF_SERVE_AMA_EDIT","SELF_SERVE_AMA_START","SELF_SERVE_AMA_STOP","SERVICE_WORKER_REGISTERED","SMS_CODE_ENTERED","SMS_CONTINUE_PRESSED","SIGNUP_WALL_FROM_AD_REFERRAL","SIGNUP_UPDATE_FORM_DATA","SIGNUP_FAILED","SIGNUP_PASSWORD_LEAKED","CAPTCHA_REQUIRED","CAPTCHA_RESPONSE_CHANGED","SITE_HEADER_SEARCH_FOCUSED","SHARE_SEND_ITEM_SELECTED","SHARE_SEND_ITEM_SHARED","TOPICS_GRID_ADD","TOPICS_GRID_REMOVE","TOPICS_GRID_UPDATE_SHOWN","TOPIC_LIST_REMOVE","TOPIC_LIST_ADD","TOPIC_FAQ_VIEW_MORE","TOPIC_FAQ_HIGHLIGHT_QUESTION","TRANSLATE_SELECT_EXISTING_QID","TRANSLATE_REMOVE_EXISTING_QID","TRIBE_CANDIDATE_RECOMMEND_STATE","TRIBE_FOLLOW_BUTTON_CLICK","TRIBE_ITEM_ADD","TRIBE_ITEM_VIEWER_COMMENT","TRIBE_QUESTION_SUBMITTED","TRIBE_SORT","TRIBE_ITEM_MODAL_SHOW","TRIBE_QUEUE_LABEL_SELECT","TRIBE_QUORA_SHARE_MODAL_CLOSED","TRIBE_SETTINGS_SAVE","TRIBE_ITEM_REMOVE","TRIBE_SETTINGS_CHANGE","TRIBE_RSS_SOURCE_ADDED","TRIBE_RSS_SOURCE_DELETED","TRIBE_SORT_CHANGED","UI_EDITABLE_LIST_ADD","UI_EDITABLE_LIST_REMOVE","USER_FOLLOW_STATE","USER_LEADERBOARD_TOGGLE_EDIT","USER_STATS_UNSELECT_ITEMS","USER_STATS_UPDATE_GRAPHS","USER_STATS_UPDATE_ATTRIBUTES","USER_STATS_SHOW","UPLOAD_DIALOG_DROPZONE","UPLOAD_DIALOG_LOADING_STATE","VIDEO_SAVE_POSITION","VIDEO_UNMUTED","VIDEO_COMPLETE","VIDEO_UPLOAD_FAILURE","VIDEO_UPLOAD_PROGRESS","VIDEO_UPLOAD_SUCCESS","WEBNODE_BEFORE_REMOVE_COMPONENT_METADATA","WEBNODE_COMPONENT_POST_ONLOAD","WEBNODE_COMPONENT_PRE_ONLOAD","WEBNODE_RPC_EXCEPTION","WEBNODE_RPC_RETRY_FAILED","WORDPRESS_CONNECT_SUCCESS","ZAPDOS_INLINE_DISMISS","ZAPDOS_WALL_DISMISS"])},"./shared/facebook.js":function(e,t,n){var i=n("./shared/loadjs.js").loadJS,o=n("./shared/util.js"),r=n("./shared/onload.js"),s=n("./shared/client.js"),a=n("./settings.js"),l=!1,d=[],c=o.once(function(){if(!PAGE_IS_MOBILE||!s.isNativeApp()){var e=a.fbLanguageCode,t="//connect.facebook.net/"+e+"/sdk.js",n=a.fbAppId;window.fbAsyncInit=function(){for(FB.init({appId:n,oauth:!0,xfbml:!1,version:a.fbApiVersion}),l=!0;d.length;)d.pop().call()},i(t)}}),u=t.onInit=function(e){l?e():(r.execAfterLoadDelayed(c),d.push(e))};t.isLoaded=function(){return l},t.load=function(){u(function(){})};var h=null,p=t.updatePermissions=function(e){FB.api("/me/permissions",function(t){t.data&&t.data.length>0?(h=t.data,e&&e(!0,t.data)):e&&e(!1,null)})};t.asyncUpdatePermissions=function(){null===h&&u(function(){FB.getLoginStatus(function(e){"connected"==e.status&&p()})})},t._disconnect=function(){FB.getLoginStatus(function(e){e.authReponse?FB.api({method:"auth.revokeAuthorization"},function(e){e?console.log("Successfully disconnected"):console.error("Disconnection failed")},console.error):console.warn("Already not connected")})};var f=t.hasPermission=function(e){return h&&1==h[e]};t.requestPermissions=function(e,t){var n=function(e){return e.split(",").every(f)};n(e)?t(!0):FB.login(function(i){"connected"===i.status?p(function(i,o){t(i&&n(e))}):t(!1)},{scope:e})};var m=function(){return l?FB.getAuthResponse():null};t.getAccessToken=function(){var e=m();return e?e.accessToken:null},t.getExpiresIn=function(){var e=m();return e?e.expiresIn:null},t.getFbUid=function(){var e=m();return e?e.userID:null}},"./shared/fx.js":function(e,t,n){var i=n("./shared/jquery.js"),o=n("./shared/util.js"),r={duration:400,easing:""},s=function(e,t){var n=!1;e.one("webkitTransitionEnd transitionEnd",function(){n=!0});var i=function(){n||e.trigger("transitionEnd")};setTimeout(i,t)},a=function(e){e.each(function(){this.offsetHeight})},l=function(e,t,n){n=o.extend({},r,n);var i="all "+n.duration+"ms "+n.easing;t.webkitTransition=i,t.mozTransition=i,t.transition=i;var a=o.once(function(){e.dequeue(),n.complete&&n.complete.apply(e)});e.queue(function(){e.one("webkitTransitionEnd transitionEnd",a),s(e),e.css(t)})},d=function(e,t,n,o){e=i(e),e.css(t),a(e),l(e,n,{duration:o||r.duration})};t.highlight=function(e,t){d(e,{backgroundColor:"#ffff99"},{backgroundColor:"transparent"},t)},t.fadeIn=function(e,t){d(e,{opacity:0},{opacity:1},t)}},"./shared/history_stack.js":function(e,t,n){var i=n("./shared/client.js"),o=n("./shared/beforeunload.js"),r=!1,s=[];t.pushState=function(e){if(!i.isNativeApp()){var t=s.push(e);window.history.pushState({n:t},"")}},t.popState=function(){i.isNativeApp()||window.history.go(-1)},t.skipBack=function(e){i.isNativeApp()||e<=0||(r=!0,s.splice(-e,e),window.history.go(-e))},i.isNativeApp()||(o.registerHandler(function(){t.skipBack(s.length)}),window.addEventListener("popstate",function(){if(r)return void(r=!1);var e=s.pop();e&&e()}))},"./shared/impression_tracker.js":function(e,t,n){var i=n("./shared/Class.js").Class,o=n("./shared/viewport.js"),r=n("./shared/visibility_state.js"),s=n("./shared/jquery.js"),a=n("./shared/util.js"),l=n("./third_party/intersection-observer.js").IntersectionObserver,d=function(){return window.performance&&window.performance.now?window.performance.now():Date.now()},c={ratioThreshold:.1,minTimeInViewMs:0,enterViewport:!0,exitViewport:!0,oneOffTracking:!1},u=i.extend({__init__:function(e,t){this._impressionCallback=e,this._options=a.extend({},c,t),this._randomId=a.randomId("impression-tracker"),this._observer=this._createObserver(),this._elementsInView=[],this._elementsInViewTracked=[],this._optDataKey=this._randomId+"-optData",this._lastViewedKey=this._randomId+"-lastViewed",this._elementsToTrack=[],this._handleVisibilityStateChanges()},observe:function(e,t){e&&(null!=t&&s(e).data(this._optDataKey,t),r.isVisible()?this._observer.observe(e):this._elementsToTrack.push(e))},unobserve:function(e){if(e){this._observer.unobserve(e),this._untrackElemDelayed(e);var t=this._elementsToTrack.indexOf(e);-1!==t&&this._elementsToTrack.splice(t,1)}},_handleVisibilityStateChanges:function(){var e=this;r.onChange(function(t){if(t)for(;e._elementsToTrack.length;)e.observe(e._elementsToTrack.pop())})},_getRootMargin:function(){var e=o.siteHeaderHeight();return e?["-",e,"px 0px 0px 0px"].join(""):"0px"},_createObserver:function(){var e={threshold:[this._options.ratioThreshold],rootMargin:this._getRootMargin()};return new l(this._observerHandler.bind(this),e)},_trackElemDelayed:function(e,t){-1===this._elementsInView.indexOf(e)&&(s(e).data(this._lastViewedKey,t),this._elementsInView.push(e))},_untrackElemDelayed:function(e){var t=this._elementsInView.indexOf(e);-1!==t&&(s(e).data(this._lastViewedKey,null),this._elementsInView.splice(t,1)),-1!==(t=this._elementsInViewTracked.indexOf(e))&&this._elementsInViewTracked.splice(t,1)},_observerHandler:function(e){var t=this;e.forEach(function(e){var n=e.isIntersecting&&e.intersectionRatio>t._options.ratioThreshold,i=e.target;0===t._options.minTimeInViewMs?t._onImpression(i,n):n?t._trackElemDelayed(i,e.time||d()):(-1!==t._elementsInViewTracked.indexOf(i)&&t._onImpression(i,!1),t._untrackElemDelayed(i))}),0!==t._elementsInView.length&&setTimeout(function(){for(var e=[],n=0;n<t._elementsInView.length;n++){var i=t._elementsInView[n],o=s(i).data(t._lastViewedKey);d()-o>=t._options.minTimeInViewMs&&e.push(i)}for(var r=0;r<e.length;r++)t._untrackElemDelayed(e[r]),t._elementsInViewTracked.push(e[r]),t._onImpression(e[r],!0)},t._options.minTimeInViewMs)},_onImpression:function(e,t){if((!t||this._options.enterViewport)&&(t||this._options.exitViewport)){t&&this._options.oneOffTracking&&(this._untrackElemDelayed(e),this._observer.unobserve(e));var n=s(e).data(this._optDataKey);this._impressionCallback(n,t,e)}}});t.createTracker=function(e,t){return new u(e,t)}},"./shared/inline_css.js":function(e,t,n){var i=n("./shared/cookies.js"),o="q-inline-css",r=function(e){e=e||function(){};var t=document.getElementsByClassName(o);if(0==t.length)return void e();window.requestAnimationFrame(function(){for(var n;t.length;)n=t[0],n.parentElement.removeChild(n);e()})},s=function(e,t){r(),e&&t&&i.setCookie(e,t,{expires:365})};t.loadStyleSheet=function(e,t,n){var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",e),i.setAttribute("id","onLoadCss"),i.onload=function(){s(t,n)},document.head.appendChild(i)},t.getData=function(){var e=document.getElementsByClassName(o),t=document.getElementById("inlineCssLoader");if(!t||0===e.length)return[];for(var n=[],i=0;i<e.length;i++)n.push(e[i].innerHTML),n.push(";");return[n.join(""),t.innerHTML]},t.injectData=function(e){var t=e[0],n=document.createElement("style");n.setAttribute("type","text/css"),n.setAttribute("class",o),n.innerHTML=t,document.head.appendChild(n);var i=e[1],r=document.createElement("script");r.setAttribute("type","text/javascipt"),r.setAttribute("id","inlineCssLoader"),r.innerHTML=i,document.head.appendChild(r)},t.getCssLoaderIfExists=function(){var e=document.getElementById("inlineCssLoader");return e?e.outerHTML:""},t.removeFromPage=function(e){var t=document.getElementById("inlineCssLoader");t&&t.parentElement.removeChild(t),r(e)}},"./shared/jquery.js":function(e,t,n){var i,o=n("./settings.js"),r=n("./shared/errors.js"),s=n("./third_party/jquery3.js"),a=n("./shared/client.js");window.jQuery=s,PAGE_IS_MOBILE&&(i=n("./mobile_app2/android_click_hack.js"));var l=s.fn.offset,d=function(){var e,t=this[0],n={top:0,left:0};return t&&t.nodeType?(e=(t.ownerDocument||document).documentElement,s.contains(e,t)?l.apply(this,arguments):n):n},c=function(e){return"click"!=e[0]?e:this.length&&this.get(0).ownerDocument!==document?e:(a.isAndroidApp()&&o.osVersion<=4.3&&("function"==typeof e[1]?e[1]=i.rateLimitWrap(e[1]):"function"==typeof e[2]?e[2]=i.rateLimitWrap(e[2]):"function"==typeof e[3]&&(e[3]=i.rateLimitWrap(e[3]))),e)},u=s.fn.on,h=function(e,t,n,i){if("string"!=typeof e)return void r.logJsError("jQuery.on","invalid events argument "+e);if("click"!=e&&-1!=e.indexOf("click"))return void r.logJsError("jQuery.on","bind click events separately "+e);var o=c.call(this,Array.prototype.slice.call(arguments));return u.apply(this,o)},p=s.fn.off,f=function(e,t,n){if(!e)return p.apply(this,arguments);if(("object"!=typeof e||Array.isArray(e))&&"click"!=e&&-1!=e.indexOf("click"))return void r.logJsError("jQuery.off","unbind click events separately "+e);var i=c.call(this,Array.prototype.slice.call(arguments));return p.apply(this,i)};PAGE_IS_MOBILE?(s.fn.on=h,s.fn.off=f):s.fn.offset=d,e.exports=s},"./shared/keyboard_event_handler.js":function(e,t,n){var i=n("./shared/jquery.js"),o=[];t.push=function(e){o.push(e)},t.remove=function(e){var t=o.indexOf(e);t>-1&&o.splice(t,1)},i(document).on("keydown",function(e){for(var t=o.length-1;t>=0;t--){if(0==o[t](e)||e.isDefaultPrevented())return}})},"./shared/linkify.js":function(e,t){/*!
 * JavaScript Linkify - v0.3 - 6/27/2009
 * http://benalman.com/projects/javascript-linkify/
 *
 * Copyright (c) 2009 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 *
 * Some regexps adapted from http://userscripts.org/scripts/review/7122
 */
t.iterLinks=function(e,t){n(e,{callback:function(e,n){return n&&t(n,e),""}})};var n=t.linkify=function(){var e="[a-z\\d.-]+://",t="(?:(?:[^\\s!@#$%^&*()_=+[\\]{}\\\\|;:'\",.<>/?]+)\\.)+",n="(?:ac|ad|aero|ae|af|ag|ai|al|am|an|ao|aq|arpa|ar|asia|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|biz|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|cat|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|coop|com|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|info|int|in|io|iq|ir|is|it|je|jm|jobs|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mil|mk|ml|mm|mn|mobi|mo|mp|mq|mr|ms|mt|museum|mu|mv|mw|mx|my|mz|name|na|nc|net|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|org|pa|pe|pf|pg|ph|pk|pl|pm|pn|pro|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tel|tf|tg|th|tj|tk|tl|tm|tn|to|tp|travel|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|xn--0zwm56d|xn--11b5bs3a9aj6g|xn--80akhbyknj4f|xn--9t4b11yi5a|xn--deba0ad|xn--g6w251d|xn--hgbk6aj7f53bba|xn--hlcj6aya9esc7a|xn--jxalpdlp|xn--kgbechtv|xn--zckzah|ye|yt|yu|za|zm|zw)",i="(?:"+t+n+")",o="(?:[;/][^#?<>\\s\\[\\]]*)?",r="(?:\\?[^#<>\\s]*)?(?:#[^<>\\s]*)?",s="\\b"+e+"[^<>\\s\\[\\]]+",a="\\b"+i+o+r+"(?!\\w)",l="mailto:",d="(?:"+l+")?[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@"+i+r+"(?!\\w)",c=new RegExp("(?:"+s+"|"+a+"|"+d+")","ig"),u=new RegExp("^"+e,"i"),h={"'":"`",">":"<",")":"(","]":"[","}":"{","»":"«","›":"‹"},p={callback:function(e,t){return t?'<a href="'+t+'" title="'+t+'">'+e+"</a>":e},punct_regexp:/(?:[!?.,:;'"]|(?:&|&amp;)(?:lt|gt|quot|apos|raquo|laquo|rsaquo|lsaquo);)$/};return function(e,t){t=t||{};var n,i,o,r,s,a,d,f,m,_,g,v,b="",y=[];for(i in p)t[i]===undefined&&(t[i]=p[i]);for(;n=c.exec(e);)if(o=n[0],a=c.lastIndex,d=a-o.length,!/[\/:]/.test(e.charAt(d-1))){do{f=o,v=o.substr(-1),g=h[v],g&&(m=o.match(new RegExp("\\"+g+"(?!$)","g")),_=o.match(new RegExp("\\"+v,"g")),(m?m.length:0)<(_?_.length:0)&&(o=o.substr(0,o.length-1),a--)),t.punct_regexp&&(o=o.replace(t.punct_regexp,function(e){return a-=e.length,""}))}while(o.length&&o!==f);r=o,u.test(r)||(r=(-1!==r.indexOf("@")?r.indexOf(l)?l:"":r.indexOf("irc.")?r.indexOf("ftp.")?"http://":"ftp://":"irc://")+r),s!=d&&(y.push([e.slice(s,d)]),s=a),y.push([o,r])}for(y.push([e.substr(s)]),i=0;i<y.length;i++)b+=t.callback.apply(window,y[i]);return b||e}}()},"./shared/links.js":function(e,t){var n=[];t.onLinkClick=function(e){n.push(e)},t.linkClicked=function(e,t){for(var i=0;i<n.length;i++)try{n[i].call(null,e,t)}catch(e){window.require.whenReady("shared/errors",function(){window.require("shared/errors").report(e)})}}},"./shared/loading.js":function(e,t){t.createDots=function(e){e=e||"regular";var t=document.createElement("div");t.className="LoadingDots "+e;var n=document.createElement("div");n.className="dot first";var i=document.createElement("div");i.className="dot second";var o=document.createElement("div");return o.className="dot third",t.appendChild(n),t.appendChild(i),t.appendChild(o),t}},"./shared/loadjs.js":function(e,t,n){var i=n("./shared/util.js"),o=n("./shared/onload.js");t.loadJS=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,t&&(n.onload=n.onreadystatechange=i.once(t));var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o)};var r=function(e){var t=document.createElement("object");t.data=e,t.type="application/javascript",t.width=0,t.height=0,document.body.appendChild(t)};t.lazyPrefetchJS=function(e){o.execAfterLoadDelayed(function(){r(e)})}},"./shared/log_sender.js":function(e,t,n){var i=n("./shared/beforeunload.js"),o=n("./shared/util.js"),r=n("./shared/Class.js").Class,s=n("./shared/core/rpc.js"),a=n("./shared/siteuri.js"),l=n("./gating.js"),d=n("./settings.js"),c=n("./shared/client.js"),u={sampleRate:1,scribeOnly:!1,shouldDeduplicate:!1};t.log=function(e,t,n){n=o.extend({},u,n);var i=n.sampleRate;if((i<0||i>1)&&(i=1),!(i>0&&Math.random()>i)){var r=null,s=1e3*Date.now();n.scribeOnly?(t.scribe_category=e,r={category:"scribe_only",data:t,time:s}):r={category:e,data:t,time:s};var a=p();a.enqueue(r,n.shouldDeduplicate),a.scheduleSend()}};t.debugLog=function(e){};var h=t.LoggingManager=r.extend({__init__:function(e,t,n,i){this.msgBuffer=[],this.retryBuffer=[],this.timer=null,this.maxBatchSize=null==e?20:e,this.maxBufferedSize=null==t?50:t,this.maxRetries=null==n?1:n,this.batchInterval=null==i?1e3:i},_isDuplicateMessage:function(e){return this.msgBuffer.some(function(t){return t.category==e.category&&o.jsonEqual(t.data,e.data)})},enqueue:function(e,t){t&&this._isDuplicateMessage(e)||(this.msgBuffer.push(e),this.numPending()>this.maxBufferedSize&&this.send())},enqueueForRetry:function(e){var t=this;e=e.map(function(e){return e.numRetries=(e.numRetries||0)+1,e}).filter(function(e){return e.numRetries<=t.maxRetries}),Array.prototype.push.apply(this.retryBuffer,e)},scheduleSend:function(){this.timer||0===this.numPending()||(this.timer=setTimeout(this.send.bind(this),this.batchInterval))},send:function(e){this.timer&&(clearTimeout(this.timer),this.timer=null);var t=this._getMessagesToSend();if(0!==t.length){var n=s.rpc(f());c.isIOSApp()&&n.appFields({maxRetries:1,persistent:!0});var i=this,o=n.xhrFields({withCredentials:!0}).kwargs({messages:t,nid:d.nid}).success(function(){i.scheduleSend()}).error(function(){i.enqueueForRetry(t),i.scheduleSend()});e?o.sendUsingBeacon():o.send()}},_getMessagesToSend:function(){for(var e=[];e.length<this.maxBatchSize;)if(this.msgBuffer.length)e.push(this.msgBuffer.shift());else{if(!this.retryBuffer.length)break;e.push(this.retryBuffer.shift())}return e},numPending:function(){return this.msgBuffer.length+this.retryBuffer.length}}),p=o.once(function(){return new h(20,50,1,l.client_side_batched_logging_interval)}),f=function(){var e="";return"quora.com"==d.subdomain_suffix&&(e+=[window.location.protocol,"//",a.netlocForSubdomainName("log")].join("")),e+="/ajax/batched_log_POST"},m=t.flushPendingLogs=function(){p().send(!0)};t.init=function(){i.registerHandler(function(){m()},10),n("./shared/visibility_state.js").onChange(function(e){e||m()}),c.isNativeApp()&&window.addEventListener("pagehide",function(){m()})}},"./shared/modal.js":function(e,t,n){var i,o,r,s,a,l=n("./shared/errors.js"),d=n("./shared/events/index.js"),c=n("./shared/core/component.js"),u=n("./shared/eventemitter.js"),h=n("./gating.js"),p=n("./shared/util.js"),f=n("./shared/client.js"),m=n("./shared/Class.js").Class,_=n("./shared/history_stack.js");PAGE_IS_MOBILE?(i=n("./mobile_app2/messages.js"),s=n("./mobile_app2/modals.js"),a=n("./mobile_app2/web_app_shim/modal.js"),o=n("./mobile_app2/action_view.js")):r=n("./w2.modal.js");var g={},v=function(e){var t;return PAGE_IS_MOBILE?f.isMobileWeb()&&(t=a.openerCid(e)):t=r.Modal.openerFor(e).cid,g[t]};t.handleClose=function(e){var t;if(PAGE_IS_MOBILE&&!f.isMobileWeb()||(t=v(e),t.handleClose()),PAGE_IS_MOBILE)if(c.unloadComponent(e.cid),f.isNativeApp())i.send("dismiss"),d.GlobalProxy.dispatch({type:d.Types.MOBILE_APP_MODAL_CLOSE,payload:{}});else{var n=t.__multiModalOptions&&t.__multiModalOptions.hideUnderlyingModal,o={reopenMultiModal:n};a.dismissActiveModal(o)}else t.innerModalInstance().close()},t.handleSubmit=function(e,t){if(!PAGE_IS_MOBILE||f.isMobileWeb()){return void v(e).handleSubmit(t)}d.GlobalProxy.dispatch({type:d.Types.MOBILE_APP_MODAL_SUBMIT,payload:t||{}})},t.fromComponent=function(e){return new b(e)},t.cancelLastModal=function(){var e;if(PAGE_IS_MOBILE)if(f.isNativeApp())i.send("dismiss"),d.GlobalProxy.dispatch({type:d.Types.MOBILE_APP_MODAL_CLOSE,payload:{}});else{e=a.getCurrentModal();var t=e&&e.__multiModalOptions&&e.__multiModalOptions.hideUnderlyingModal,n={reopenMultiModal:t};a.dismissActiveModal(n)}else(e=r.Modal.getCurrentModal())&&e.close&&e.close()},d.GlobalProxy.subscribe(d.Types.WEBNODE_RPC_EXCEPTION,function(e){"login_required"==e.payload.exceptionType&&t.cancelLastModal()});var b=m.extend({__init__:function(e){this.component=e,this.emitter=new u.EventEmitter,g[this.component.cid]=this,this.__id=[p.randomId(),this.component.cid].join("-"),this.__kwargs={},this.__webOnlyOptions=null,this.__appOnlyOptions=null,this.__multiModalOptions=null,this.__loaded=!1,this.__fromServerCall=!1,this.__method=null,this.__hmac=null,this.__fromElement=!1,this.__element=null},innerModalInstance:function(){if(f.isNativeApp())return void l.logJsError("shared/modal","Trying to getModalInstance on native");if(!this.__modal){var e={kwargs:this.__kwargs};PAGE_IS_MOBILE?this.__modal=new a.Modal(this.component,e):(e=p.extend(this.__webOnlyOptions||{},e),null==e.sendJsData&&(e.sendJsData=!0),this.__modal=new r.ModalWithCallBacks(this.component,e))}return this.__modal},load:function(){return this.__loaded?this:(this.__loaded=!0,PAGE_IS_MOBILE?f.isNativeApp():this.innerModalInstance().fetch(this.__method),this)},show:function(){if(this.load(),f.isNativeApp()){var e=this;d.GlobalProxy.subscribe(d.Types.MOBILE_APP_MODAL_SUBMIT,function(t){e.handleSubmit(t.payload)},this.__id),d.GlobalProxy.subscribe(d.Types.MOBILE_APP_MODAL_CLOSE,function(){e.handleClose()},this.__id)}else this.__multiModalOptions&&this.__multiModalOptions.hideUnderlyingModal&&d.GlobalProxy.dispatch({type:d.Types.MULTIMODAL_HIDE_ACTIVE_STEP,payload:{}});return PAGE_IS_MOBILE?this.__fromElement?this.__kwargs.useActionView?o.showFromParentComponent(this.__element,this.component,this.__kwargs.height,this.__kwargs.url,this.__kwargs.title,null,this.__kwargs.noPageWrapper):s.showFromParentComponent(this.__element,this.component,this.__kwargs.url,this.__kwargs.target,this.__kwargs.options):f.isNativeApp()||h.force_mobile_app_modals?s.showFromServerCall(this.component,this.__hmac,this.__method,this.__kwargs,this.__appOnlyOptions||{}):(this.innerModalInstance().load(this.__method),this._addHashMobileWeb()):this.innerModalInstance().load(this.__method),this},_addHashMobileWeb:function(){if(f.isMobileWeb()){var e=this.__multiModalOptions&&this.__multiModalOptions.hideUnderlyingModal,t={reopenMultiModal:e};_.pushState(a.dismissActiveModal.bind(a,t))}},unload:function(){this.emitter.trigger("unload"),g[this.component.cid]=null,f.isMobileWeb()&&_.skipBack(1),f.isNativeApp()&&d.GlobalProxy.unsubscribeAll(this.__id),this.__multiModalOptions&&this.__multiModalOptions.hideUnderlyingModal&&d.GlobalProxy.dispatch({type:d.Types.MULTIMODAL_UNHIDE_ACTIVE_STEP,payload:{}})},onUnload:function(e){return this.emitter.on("unload",e),this},fromElement:function(e,t){return PAGE_IS_MOBILE||l.logJsError("shared/modal","fromElement only supported in mobile."),this.__fromServerCall&&l.logJsError("shared/modal","Used both fromElement and fromServerCall."),this.__fromElement=!0,this.__element=e,this.__kwargs=t,this},fromServerCall:function(e,t){return this.__fromElement&&l.logJsError("shared/modal","Used both fromElement and fromServerCall."),this.__fromServerCall=!0,this.__hmac=e,this.__method=t,this},kwargs:function(e){return this.__kwargs=e,this},webOnlyOptions:function(e){return this.__webOnlyOptions=e,this},appOnlyOptions:function(e){return this.__appOnlyOptions=e,this},multiModalOptions:function(e){return this.__multiModalOptions=e,this},onSubmit:function(e){return this.emitter.on("submit",e),this},onClose:function(e){return this.emitter.on("close",e),this},handleClose:function(){this.emitter.trigger("close"),this.unload()},handleSubmit:function(e){this.emitter.trigger("submit",[e])}})},"./shared/onload.js":function(e,t){var n=!1,i=[];window.addEventListener("load",function(){setTimeout(function(){n=!0;var e,t,o;for(e=0;e<i.length;e++)t=i[e][0],o=i[e][1],0===t?o():setTimeout(o,t);i=[]},0)});var o=function(e,t){if(n)return void t();i.push([e,t])};t.execAfterLoad=o.bind(null,0),t.execAfterLoadDelayed=o.bind(null,100)},"./shared/perf.js":function(e,t,n){var i=n("./shared/log_sender.js"),o=n("./settings.js"),r={},s=5e3,a=3e4,l=function(e){delete e.id,o.shouldReportE2E&&i.log("perf/post_e2e",e)},d=function(e){if(!e)throw new Error("This method expects an object describing the action.");var t=e.method;if(t.startsWith("log_")||t.startsWith("record_")||t.startsWith("track_"))return null;if(e.startTime=Date.now(),!e.id){var n=1e3*e.startTime+Math.floor(1e3*Math.random());e.id=n.toString(36)}return r[e.id]=e,e},c=function(e){var t=r[e];t&&(t.duration=Date.now()-t.startTime,delete t.startTime,delete r[e],l(t))};t.startPOST=function(e){return e.type="web",d(e)},t.startUserPerceived=function(e){return e.type="user_perceived",d(e)},t.finishAction=function(e){e&&e.id&&c(e.id)},t.cancelAction=function(e){e&&e.id&&delete r[e.id]};var u=function(){for(var e=Date.now(),t=Object.keys(r),n=0;n<t.length;n++){var i=r[t[n]];e-i.startTime>=a&&(i.timeout=!0,c(i.id))}};setInterval(u,s)},"./shared/polyfills/array.js":function(e,t){var n=function(e,t,n){"function"==typeof Object.defineProperty?Object.defineProperty(e,t,{configurable:!0,value:n,writable:!0,enumerable:!1}):e[t]=n};if(!Array.prototype.every){var i=function(e,t){"use strict";var n,i;if(null===this)throw new TypeError("this is null or not defined");var o=Object(this),r=o.length>>>0;if("function"!=typeof e)throw new TypeError;for(arguments.length>1&&(n=t),i=0;i<r;){var s;if(i in o){s=o[i];if(!e.call(n,s,i,o))return!1}i++}return!0};n(Array.prototype,"every",i)}if(!Array.prototype.some){var o=function(e){"use strict";if(null===this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof e)throw new TypeError;for(var t=Object(this),n=t.length>>>0,i=arguments.length>=2?arguments[1]:void 0,o=0;o<n;o++)if(o in t&&e.call(i,t[o],o,t))return!0;return!1};n(Array.prototype,"some",o)}if(!Array.prototype.indexOf){var r=function(e,t){var n;if(null===this)throw new TypeError('"this" is null or not defined');var i=Object(this),o=i.length>>>0;if(0===o)return-1;var r=+t||0;if(Math.abs(r)===Infinity&&(r=0),r>=o)return-1;for(n=Math.max(r>=0?r:o-Math.abs(r),0);n<o;){if(n in i&&i[n]===e)return n;n++}return-1};n(Array.prototype,"indexOf",r)}if(!Array.prototype.forEach){var s=function(e,t){var n,i;if(null===this)throw new TypeError(" this is null or not defined");var o=Object(this),r=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),i=0;i<r;){var s;i in o&&(s=o[i],e.call(n,s,i,o)),i++}};n(Array.prototype,"forEach",s)}if(!Array.prototype.map){var a=function(e,t){var n,i,o;if(null===this)throw new TypeError(" this is null or not defined");var r=Object(this),s=r.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),i=new Array(s),o=0;o<s;){var a,l;o in r&&(a=r[o],l=e.call(n,a,o,r),i[o]=l),o++}return i};n(Array.prototype,"map",a)}if(!Array.prototype.filter){var l=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=[],o=arguments.length>=2?arguments[1]:void 0,r=0;r<n;r++)if(r in t){var s=t[r];e.call(o,s,r,t)&&i.push(s)}return i};n(Array.prototype,"filter",l)}if(!Array.prototype.reduce){var d=function(e){"use strict";if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,n=Object(this),i=n.length>>>0,o=0;if(2==arguments.length)t=arguments[1];else{for(;o<i&&!(o in n);)o++;if(o>=i)throw new TypeError("Reduce of empty array with no initial value");t=n[o++]}for(;o<i;o++)o in n&&(t=e(t,n[o],o,n));return t};n(Array.prototype,"reduce",d)}if(!Array.prototype.lastIndexOf){var c=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t,n,i=Object(this),o=i.length>>>0;if(0===o)return-1;for(t=o-1,arguments.length>1&&(t=Number(arguments[1]),t!=t?t=0:0!==t&&t!=1/0&&t!=-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),n=t>=0?Math.min(t,o-1):o-Math.abs(t);n>=0;n--)if(n in i&&i[n]===e)return n;return-1};n(Array.prototype,"lastIndexOf",c)}if(!Array.prototype.includes){var u=function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");var t=Object(this),n=parseInt(t.length,10)||0;if(0===n)return!1;var i,o=parseInt(arguments[1],10)||0;o>=0?i=o:(i=n+o)<0&&(i=0);for(var r;i<n;){if(r=t[i],e===r||e!==e&&r!==r)return!0;i++}return!1};n(Array.prototype,"includes",u)}},"./shared/polyfills/classList.js":function(e,t){!function(){function e(e){this.el=e;for(var t=e.className.replace(/^\s+|\s+$/g,"").split(/\s+/),n=0;n<t.length;n++)i.call(this,t[n])}function t(e,t,n){Object.defineProperty?Object.defineProperty(e,t,{get:n}):e.__defineGetter__(t,n)}if(!("undefined"==typeof window.Element||"classList"in document.documentElement)){var n=Array.prototype,i=n.push,o=n.splice,r=n.join;e.prototype={add:function(e){this.contains(e)||(i.call(this,e),this.el.className=this.toString())},contains:function(e){return-1!=this.el.className.indexOf(e)},item:function(e){return this[e]||null},remove:function(e){if(this.contains(e)){for(var t=0;t<this.length&&this[t]!=e;t++);o.call(this,t,1),this.el.className=this.toString()}},toString:function(){return r.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},window.DOMTokenList=e,t(Element.prototype,"classList",function(){return new e(this)})}}()},"./shared/polyfills/date.js":function(e,t){Date.now||(Date.now=function(){return(new Date).getTime()})},"./shared/polyfills/function.js":function(e,t){Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},o=function(){return n.apply(this instanceof i?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(i.prototype=this.prototype),o.prototype=new i,o})},"./shared/polyfills/object.js":function(e,t){Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=n.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var r,s,a=[];for(r in o)e.call(o,r)&&a.push(r);if(t)for(s=0;s<i;s++)e.call(o,n[s])&&a.push(n[s]);return a}}())},"./shared/polyfills/requestAnimationFrame.js":function(e,t){!function(){for(var e=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var i=(new Date).getTime(),o=Math.max(0,16-(i-e)),r=window.setTimeout(function(){t(i+o)},o);return e=i+o,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}()},"./shared/polyfills/string.js":function(e,t){String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var i=n.indexOf(e,t);return-1!==i&&i===t}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)})},"./shared/qevents/main.js":function(e,t,n){n("./shared/polyfills/requestAnimationFrame.js"),n("./shared/polyfills/string.js"),n("./shared/polyfills/classList.js"),n("./shared/polyfills/array.js"),n("./shared/polyfills/function.js"),n("./shared/polyfills/object.js"),n("./shared/polyfills/date.js"),n("./shared/qevents/pixel.js").init(),n("./shared/qevents/queue.js").flush()},"./shared/qevents/pixel.js":function(e,t,n){function i(){try{var e=r("ia_share_url");if(null!==e)return e}catch(e){}try{return ia_document!==undefined&&ia_document.shareURL}catch(e){return}}function o(e){var t,n=[];for(var i in e)t=e[i],s(i)&&a(t)&&n.push(i+"="+encodeURIComponent(t));return n.join("&")}function r(e){var t=null,n=[];return window.location.search.substr(1).split("&").forEach(function(i){n=i.split("="),n[0]===e&&(t=decodeURIComponent(n[1]))}),t}function s(e){return"string"==typeof e}function a(e){return"string"==typeof e||!isNaN(Number(e))}function l(){function e(e,t){var n=window.history[e];window.history[e]=function(){var e=n.apply(this,arguments);return t.apply(this,arguments),e}}window.history.pushState&&window.history.replaceState&&(e("pushState",d),e("replaceState",d),window.addEventListener("popstate",d,!1))}function d(){!0!==window.qp.disablePushState&&t.quoraPixelHelper("track","ViewContent")}var c,u=n("./shared/Class.js").Class,h=n("./shared/log_sender.js"),p=u.extend({__init__:function(e){if("string"!=typeof e)throw new Error("Quora Pixel Error: The second argument passed to qp is invalid.");this.uuid=e,this.lastViewContentUrl=""},track:function(e,n){if("string"!=typeof e)throw new Error("Quora Pixel Error: The second argument passed to qp is invalid.");var i,o,r=this._getIsFBIAUrl(),s=this._getValueFromPassback(n),a=this._getUrl();this._shouldTrack(e,a)&&(i=this._getMetadata(e,a,r,s),o=this._getPixelUrl(i),t.firePixel(o)),this._logStorageAccess()},_shouldTrack:function(e,t){return("ViewContent"!=e||t!=this.lastViewContentUrl)&&("ViewContent"==e&&(this.lastViewContentUrl=t),!0)},_getMetadata:function(e,t,n,i){var o={j:1,u:t,tag:e,ts:(new Date).getTime()};return n&&(o.fbia=1),i!==undefined&&(o.v=i),o},_getValueFromPassback:function(e){var t;if(e!==undefined&&null!==e&&e.value!==undefined&&"number"!=typeof(t=e.value)&&"string"!=typeof t)throw new Error("Quora Pixel Error: The third argument passed to qp is invalid.");return t},_getUrl:function(){var e=i();return e||(e=window.location.href),e},_getIsFBIAUrl:function(){return Boolean(i())},_getPixelUrl:function(e){return this._getBasePixelUrl()+this.uuid+"/pixel?"+o(e)},_getBasePixelUrl:function(){return"https://q.quora.com/_/ad/"},_logStorageAccess:function(){document.hasStorageAccess&&document.hasStorageAccess().then(function(e){h.log("pixel_storage_access_log",{uuid:this.uuid,url:window.location.href,has_storage_access:e})})}}),f=u.extend({__init__:function(){this.uuidToPixel={}},installPixel:function(e){if(this.uuidToPixel[e]===undefined){var t=new p(e);this.uuidToPixel[e]=t}},track:function(e,t){var n=Object.keys(this.uuidToPixel);if(!n.length)throw new Error("Quora Pixel Error: Base pixel code is not installed properly.");for(var i=0;i<n.length;i++){var o=n[i];this.uuidToPixel[o].track(e,t)}}});t.quoraPixelHelper=function(e,t,n){if("string"!=typeof arguments[0])throw new Error("Quora Pixel Error: The first argument passed to qp is invalid.");"init"==e?c.installPixel(t):"track"==e&&c.track(t,n)},t.firePixel=function(e){(new Image).src=e},t.init=function(){if(!window.qp)throw new Error("Quora Pixel Error: Base pixel code is not installed properly.");window.qp.qp=t.quoraPixelHelper,l(),c=new f},t.initializeStates=function(){c=new f}},"./shared/qevents/queue.js":function(e,t){t.flush=function(){var e,t=window.qp;for(t.queue||(t.queue=[]);t.queue.length;)e=t.queue.shift(),t.apply(t,e)}},"./shared/rpc_manager.js":function(e,t,n){var i=n("./shared/core/rpc.js"),o=n("./interface/settings.js"),r=n("./shared/errors.js"),s=n("./shared/debounce.js").debounce,a=n("./shared/Class.js").Class.extend({__init__:function(){this._urlToBatchedUrl={},this._pendingRequests={},this._makeBatchRequests={},this._debounceWait=10,this._registerUrlToBatchedUrl(o.serverCallUrl,o.batchedServerCallUrl),this._registerUrlToBatchedUrl("/api/rerender_component_POST","/api/batched_rerender_component_POST"),this._registerUrlToBatchedUrl("/api/rerender_component_low_pri_POST","/api/batched_rerender_component_low_pri_POST")},_registerUrlToBatchedUrl:function(e,t){this._urlToBatchedUrl[e]=t,this._pendingRequests[e]=[],this._makeBatchRequests[e]=this._getBatchRequestFunction(e)},_shouldBatchRequest:function(e){return e._url()in this._urlToBatchedUrl},enqueue:function(e){if(!this._shouldBatchRequest(e))return e.send();this._pendingRequests[e._url()].push({request:e,data:this._getDataObject(e),success:this._getSuccessCallback(e),error:this._getErrorCallback(e)}),this._makeBatchRequests[e._url()]()},_getDataObject:function(e){var t=e._data();return delete t.formkey,delete t.window_id,delete t.referring_controller,delete t.referring_action,t},_getSuccessCallback:function(e){return function(t){e._successHandler({value:t}),e._completeHandler()}},_getErrorCallback:function(e){return function(){e._beforeErrorHandler.apply(e,arguments),e._error()(),e._completeHandler()}},_getBatchRequestFunction:function(e){var t=this;return s(function(){var n=t._pendingRequests[e];if(t._pendingRequests[e]=[],1===n.length)return void n[0].request.send();var o=n.map(function(e){return e.data}),s=function(e){n.forEach(function(t){t.error(e)})},a=function(e){n.forEach(function(t,n){try{t.success(e[n])}catch(e){r.report(e)}})};i.rpc(t._urlToBatchedUrl[e]).kwargs({requestsData:o}).success(a).error(s).send()},t._debounceWait)}}),l=new a;t.enqueueRequest=function(e){l.enqueue(e)}},"./shared/scroll_animation_handler.js":function(e,t){t.add=function(e,t){var n,i=!1,o=function(){n=e.scrollY,n===undefined&&(n=e.scrollTop),i||requestAnimationFrame(function(){i=!1,t(n)}),i=!0};return e.addEventListener("scroll",o),o(),o}},"./shared/siteuri.js":function(e,t,n){function i(e){this.message=this.errorType+": "+e}function o(e){return"http:"==e.substring(0,5)?"https:"+e.substring(5):e}function r(e){var t=e.match(d);if(!t)return!1;var n=t[1],i=t[2],o=a();if("www."+i!=o){if("www"!=n&&n&&"www."+n+"."+i==o){var r=e.replace("://","://www.").match(d);if(r)return r}return!1}return t}var s=n("./settings.js");i.prototype=new Error,i.prototype.errorType="SiteURIError",i.prototype.constructor="SiteURIError",t.SiteURIError=i,t.getQuoraSubdomain=function(e){return e?e.substring(0,e.lastIndexOf("quora.com")-1):""};var a=function(e,t){var n;return n=t?"quora.com":s.subdomain_suffix||"quora.com",e?e+"."+n:"www."+n};t.netlocForSubdomainName=a;var l=function(e,t){return"http://"+a(e,t)+"/"};t.baseUrlForSubdomainName=l;var d=/https?:\/\/(?:([^.\/]+)\.)?((?:[^.\/]+\.)*quora\.com(?::[0-9]*)?)(\/.*)?/,c=function(e){return!1!==r(e)};t.isSiteAbsoluteUrl=c;var u=function(e){return e.startsWith("/")&&!e.startsWith("//")};t.isSiteRelativeUrl=u;var h=function(e){return c(e)||u(e)};t.isSiteUrl=h;var p=function(e,t){return new f(e,t)};t.URI=p;var f=n("./shared/Class.js").Class.extend({__init__:function(e,t){e instanceof f&&(e=e.unicode());var n,o=r(e),a=t&&t.subdomainName||null,l=t&&t.secure||!1;if(o){if(a)throw new i("subdomain context should not be set for absolute url, url = "+e+", subdomain = "+a);a=o[1],"www"==a&&(a=null),n=o[3]||"",""===n&&(n="/"),"https"==e.substring(0,5)&&(l=!0)}else n=e,"https:"==window.location.protocol&&(l=!0);if("/"!=n[0])throw new i("invalid site uri input "+e);return this.relativeUrl=n,this.subdomainName=a,this.subdomainName||(this.subdomainName=s.subdomain_of_network),this.isSecure=l,this},unicode:function(e){if(s.force_use_absolute_links)return this.absolute(e);var t=this.relativeUrl;return(this.subdomainName||s.subdomain_name)&&(t=l(this.subdomainName,e)+t.substring(1),"/"==t.charAt(t.length-1)&&(t=t.substring(0,t.length-1))),this.isSecure&&(t=o(t)),t},absolute:function(e){var t=l(this.subdomainName,e),n=t+this.relativeUrl.substring(1);return this.isSecure&&(n=o(n)),n},secure:function(e){return o(this.absolute(e))}});t.SiteURI=f},"./shared/toast.js":function(e,t,n){var i,o=n("./shared/Class.js").Class,r=n("./settings.js"),s=n("./shared/client.js"),a=r.interface_strings,l=n("./shared/jquery.js");PAGE_IS_MOBILE&&(i=n("./mobile_app2/messages.js"));var d=null,c=t.Toast={show:function(){if(s.isNativeApp()&&this.message_data)return void i.send("showPMsg",this.message_data);if(null!==d&&d.close(),d=this,this.closeTimeout=setTimeout(this.close.bind(this),this.duration||4e3),PAGE_IS_MOBILE&&s.isUIWebView()&&window.navigator.userAgent.indexOf("iPad")<0){var e=this.$container.get(0),t=document.documentElement.clientHeight-window.innerHeight;t>0&&e&&(e.style.paddingBottom=t+"px")}},close:function(){clearTimeout(this.closeTimeout),d=null,0!==this.$container.length&&(this.$container.addClass("animate_out"),this.$container.css("paddingBottom",""),setTimeout(this.cleanup.bind(this),1e3))},cleanup:function(){var e=this.$container.get(0);e.parentNode&&e.parentNode.removeChild(e)}},u=o.extend(c).extend({__init__:function(e,t){this.additionalClasses=t||[],this.message=e,this.$container=l(this.render())},render:function(){var e=document.getElementById("pmsg_container");e||(e=document.createElement("div"),e.id="pmsg_container",document.body.appendChild(e)),e.className="PMsgContainer";var t=document.createElement("div");t.className=["PMsg"].concat(this.additionalClasses).join(" "),e.appendChild(t);var n=document.createElement("div");return n.className="contents",l(n).text(this.message),t.appendChild(n),t}});t.show=function(e){if(s.isNativeApp())i.send("showPMsg",{message:e});else{new u(e).show()}};var h=t.showError=function(e){if(s.isNativeApp())i.send("showPMsg",{message:e,style:"error"});else{new u(e,["PMsgError"]).show()}};t.showPleaseTryAgainError=function(){h(a.please_try_again)}},"./shared/upload.js":function(e,t,n){var i=n("./shared/beforeunload.js"),o=n("./shared/events/index.js"),r=n("./third_party/resumable.js"),s=n("./settings.js"),a=n("./shared/siteuri.js"),l=n("./shared/jquery.js"),d=function(e){return"quora.com"!=s.subdomain_suffix?e:c(e)},c=function(e){return[window.location.protocol,"//",a.netlocForSubdomainName("upload"),e].join("")};t.uploadData=function(e,t,n,i){var o=new window.FormData;o.append("formkey",s.formkey);for(var r=Object.keys(e),a=0;a<r.length;a++)o.append(r[a],e[r[a]]);for(var c=0;c<t.length;c++)o.append("file",t[c]);o.append("nid",s.nid);var u=s.serverCallUrl.split("server_call_POST?");u&&u[1]&&o.append("post_url_suffix",u[1]),l.ajax({method:"POST",processData:!1,contentType:!1,url:d("/_/imgupload/upload_POST"),data:o,xhrFields:{withCredentials:!0},success:function(e){e.success?n(e):i(e)},error:i})},t.uploadBlob=function(e,t,n){var i=new window.FormData;i.append("formkey",s.formkey),i.append("blob",e),l.ajax({method:"POST",processData:!1,contentType:!1,url:d("/_/avupload/upload_POST"),data:i,xhrFields:{withCredentials:!0},success:function(e){e.success?t(e):n(e)},error:n})},t.uploadAudience=function(e,t,n,i){var o=new window.FormData;o.append("formkey",s.formkey),o.append("job_id",e),o.append("blob",t),l.ajax({method:"POST",processData:!1,contentType:!1,url:d("/_/ad/upload_audience_POST"),data:o,xhrFields:{withCredentials:!0},success:function(e){e.success?n(e):i(e)},error:i})},t.uploadVideoMetadata=function(e,t,n){l.ajax({method:"POST",dataType:"json",url:d("/_/avupload/metadata_POST"),data:{formkey:s.formkey,json:JSON.stringify({kwargs:e})},xhrFields:{withCredentials:!0},success:t,error:n})},t.uploadClipChunk=function(e,t,n,i,o){var r=new window.FormData;r.append("formkey",s.formkey),r.append("chunk",e),r.append("clip_id",t),r.append("file",n),l.ajax({method:"POST",dataType:"json",processData:!1,contentType:!1,url:d("/_/avupload/chunk_POST"),data:r,xhrFields:{withCredentials:!0},success:i,error:o})};var u={};t.uploadResumableVideo=function(e){u[e].resumable.upload()},t.enqueueResumableVideo=function(e,t,n){var i=new r({target:d("/_/avupload/chunk_resumablejs_POST"),testChunks:!1,withCredentials:!0,chunkSize:6291456,query:{formkey:s.formkey,clientUuid:e}});i.support&&(i.on("chunkingComplete",function(i){u[e].resumableFile=i,n(t.uniqueIdentifier,i.chunks.length)}),i.on("fileSuccess",function(t,n){o.GlobalProxy.dispatch({type:o.Types.VIDEO_UPLOAD_SUCCESS,payload:{uuid:e,message:n}}),i.removeFile(t.file),delete u[e]}),i.on("fileError",function(t,n){o.GlobalProxy.dispatch({type:o.Types.VIDEO_UPLOAD_FAILURE,payload:{uuid:e,message:n}})}),i.on("fileProgress",function(t,n){o.GlobalProxy.dispatch({type:o.Types.VIDEO_UPLOAD_PROGRESS,payload:{uuid:e,progress:t.progress()}})}),u[e]={resumable:i},i.addFile(t))};var h={success:o.Types.VIDEO_UPLOAD_SUCCESS,failure:o.Types.VIDEO_UPLOAD_FAILURE,progress:o.Types.VIDEO_UPLOAD_PROGRESS};t.onVideoUploadEvent=function(e,t,n){if(!h.hasOwnProperty(t))throw new Error("Tyring to subscribe to an invalid video event: "+t);o.GlobalProxy.subscribe(h[t],function(t){t.payload.uuid===e&&n(t.payload)})},t.pauseVideoUpload=function(e){u[e].resumable.pause()},t.resumeVideoUpload=function(e){u[e].resumable.upload()},t.retryFailedVideoUpload=function(e){u[e].resumableFile.retry()};var p=function(){return!!Object.keys(u).length};t.isVideoUploadInProgress=p,i.registerHandler(function(){if(p())return s.qtextData.unsavedVideosMsg})},"./shared/util.js":function(e,t,n){var i=n("./shared/errors.js");t.extend=function(e,t){e=e||{};for(var n=1;n<arguments.length;n++)if(arguments[n])for(var i in arguments[n])arguments[n].hasOwnProperty(i)&&(e[i]=arguments[n][i]);return e},t.documentFragmentFromString=function(e){var t=document.createElement("div");t.innerHTML=e;for(var n=document.createDocumentFragment(),i=t.firstChild,o=null;i;)o=i.nextSibling,n.appendChild(i),i=o;return n};var o=t.isPlainObject=function(e){if("[object Object]"!=Object.prototype.toString.call(e))return!1;var t=e.constructor;if("function"!=typeof t)return!1;var n=t.prototype;return"[object Object]"==Object.prototype.toString.call(n)&&!1!==n.hasOwnProperty("isPrototypeOf")},r=t.cloneObject=function(e){if(!Array.isArray(e)&&!o(e))return e;for(var t=e.constructor(),n=Object.keys(e),i=0;i<n.length;i++){var s=n[i];t[s]=r(e[s])}return t};t.firstScrollingParent=function(e){var t=null;for(e&&(t=e.parentNode);t&&t!==document.body;){var n=window.getComputedStyle(t);if(n){var i=n.getPropertyValue("overflow-y");if("scroll"==i||"auto"==i)return t}t=t.parentNode}return document.body},t.makeEnum=function(e){var t={},n=Array.isArray(e);for(var i in e)e.hasOwnProperty(i)&&(i=n?e[i]:i,t[i]=i);return t},t.once=function(e){var t,n;return function(){return n||(n=!0,t=e.apply(this,arguments)),t}};var s=0;t.randomId=function(e){return e=e||"",[e,s++,Math.floor(4294967296*Math.random())].join("-")},t.uuid4=function(){var e=Date.now();return"undefined"!=typeof window.performance&&"function"==typeof window.performance.now&&(e+=window.performance.now()),"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})},t.escapeHTML=function(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;")},t.iterItems=function(e,t){if(!o(e))return void i.logJsError("util.iterItems expects a plain object. got "+e);for(var n=Object.keys(e),r=0;r<n.length;r++)t.call(null,n[r],e[n[r]])},t.getLocation=function(e){var t=e.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return t&&{protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7]}};var a=t.jsonEqual=function(e,t){var n,i;if(e===t)return!0;if("object"!=typeof e||"object"!=typeof t)return e===t;if(null===e||e===undefined||null===t||t===undefined)return!1;if(typeof e!=typeof t)return!1;if(e instanceof Array){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(!a(e[o],t[o]))return!1;return!0}return n=Object.getOwnPropertyNames(e),i=Object.getOwnPropertyNames(t),n.length==i.length&&n.every(function(n){return a(e[n],t[n])})};t.formatBytes=function(e,t){if(0==e)return"0 Bytes";var n=1024,i=t<=0?0:t||2,o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,r)).toFixed(i))+" "+o[r]},t.utoa=function(e){return window.btoa(unescape(encodeURIComponent(e)))},t.atou=function(e){return decodeURIComponent(escape(window.atob(e)))},t.isNewTabModifierDown=function(e){var t="MacIntel"===window.navigator.platform;return t&&e.metaKey||!t&&e.ctrlKey}},"./shared/viewport.js":function(e,t,n){var i=n("./shared/dom.js"),o=n("./shared/jquery.js"),r=n("./shared/window_manager.js"),s=function(e){var t=e.getBoundingClientRect();return 0==t.bottom&&0==t.right&&0==t.top&&0==t.left},a=function(e){if(s(e))return!1;var t=Math.round(o(e).offset().top),n=e.getBoundingClientRect(),i=window.innerHeight,r=window.innerWidth,a=window.pageYOffset>=t+e.offsetHeight,l=window.pageYOffset+i<=t,d=n.left>=0&&n.right<=r;return!a&&!l&&d};t.percentInViewport=function(e){if(s(e))return 0;var t=Math.round(o(e).offset().top),n=window.innerHeight,i=Math.max(0,window.pageYOffset-t),r=Math.max(0,t+e.offsetHeight-(window.pageYOffset+n));return i>e.offsetHeight||r>e.offsetHeight?0:1-(i+r)/e.offsetHeight},t.percentScrolledPastViewport=function(e){if(!e)return 0;var t=Math.round(o(e).offset().top);return Math.max(0,window.pageYOffset-t)/e.getBoundingClientRect().height};var l=function(e){if(s(e))return!1;var t=e.getBoundingClientRect(),n=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,o=function(e,t){return document.elementFromPoint(e,t)};if(t.right<0||t.bottom<0||t.left>n||t.top>i)return!1;var r=5;return e.contains(o(t.left+r,t.top+r))||e.contains(o(t.right-r,t.top+r))||e.contains(o(t.right-r,t.bottom-r))||e.contains(o(t.left+r,t.bottom-r))};t.isElementInViewport=function(e){return!!e&&(PAGE_IS_MOBILE?a(e):l(e))};var d=null;t.siteHeaderHeight=function(){return null===d&&(d=PAGE_IS_MOBILE?o(".Header .fixed_header").height():o(".SiteHeader").height()),d},t.setPageScroll=function(e){var t=o("body"),n=o(".SiteHeader"),r=i.getScrollbarWidth();e?(t.removeClass("modal_prevent_scroll"),t.css("padding-right",0),n.css("padding-right",0)):(t.addClass("modal_prevent_scroll"),t.css("padding-right",r+"px"),n.css("padding-right",r+"px"))},t.isElementDefinitelyOutOfViewport=function(e){var t=e.getBoundingClientRect();return t.right<0||t.bottom<0||t.left>o(window).width()||t.top>o(window).height()},t.scrollToElem=function(e){e.jquery||(e=o(e)),e.length>1&&(e=e.get(0));var t=e.offset().top;t-=r.headerOffset+20,window.scroll(0,t)},t.scrolledToBottom=function(){return o(document).height()<=o(window).height()+o(window).scrollTop()+1}},"./shared/visibility_state.js":function(e,t,n){var i,o=n("./shared/client.js"),r=n("./shared/beforeunload.js"),s=n("./shared/eventemitter.js");PAGE_IS_MOBILE&&(i=n("./mobile_app2/client.js"));var a,l=new s.EventEmitter,d=t.isVisible=function(){return!(a||p())};t.onChange=function(e){l.on("change",e)};var c,u;"undefined"!=typeof document.hidden?(c="hidden",u="visibilitychange"):"undefined"!=typeof document.msHidden?(c="msHidden",u="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(c="webkitHidden",u="webkitvisibilitychange");var h=function(e){a!==e&&(a=e,l.trigger("change",[d()]))},p=function(){return document[c]};document.addEventListener(u,function(){l.trigger("change",[d()])},!1),r.registerHandler(function(){h(!0)}),PAGE_IS_MOBILE&&o.isNativeApp()?(a=!0,i.registerMessageHandler("pageHide",function(){h(!0)}),i.registerMessageHandler("pageShow",function(){h(!1)})):(window.addEventListener("pagehide",function(){h(!0)}),window.addEventListener("pageshow",function(){h(!1)}),window.addEventListener("blur",function(){h(!0)}),window.addEventListener("focus",function(){h(!1)}))},"./shared/w2.context.js":function(e,t,n){var i=n("./shared/Class.js").Class,o=n("./shared/errors.js"),r=i.extend({__init__:function(e){this.value=e,this.handlers={}},bind:function(e,t){this.handlers.hasOwnProperty(t)||(this.handlers[t]=[]),this.handlers[t].push(e)},unbind:function(e){delete this.handlers[e]},trigger:function(){var e=Array.prototype.slice.call(arguments);for(var t in this.handlers)if(this.handlers.hasOwnProperty(t))for(var n=this.handlers[t],i=0;i<n.length;i++)n[i].apply(this,e)},set:function(e){var t=this.value;this.value=e,this.trigger(t,e)},get:function(){return this.value}}),s=t.Context=i.extend({__init__:function(){var e=this.initialProperties();if(!e){var t=["Override initialProperties() in your subclasses to define a list ","of properties that this Context should listen to."].join("");return void o.logJsError("w2.context",t)}this.properties={};for(var n in e)this.properties[n]=new r(e[n])},initialProperties:function(){},on:function(e,t,n){this.assertPropertyName(e),this.properties[e].bind(t,n)},off:function(e){for(var t in this.properties)this.properties[t].unbind(e)},set:function(e,t){this.assertPropertyName(e),this.properties[e].set(t)},get:function(e){return this.assertPropertyName(e),this.properties[e].get()},assertPropertyName:function(e){if(!this.properties.hasOwnProperty(e)){var t=["Hey, you are trying to access a context property with an invalid ","property name. You can only retrieve property names that are defined ","in the Context initialProperties definition."].join("");o.logJsError("w2.context",t)}}}),a=i.extend({__init__:function(e,t){this._context=e,this._cid=t},on:function(e,t){this._context.on(e,t,this._cid)},off:function(){this._context.off(this._cid)},get:function(e){return this._context.get(e)},set:function(e,t){this._context.set(e,t)}}),l=i.extend({__init__:function(e){this.component=e;var t=this.component.contextConstructor();this._context=t?new t(this.component):null,this._contextProxies=[]},get:function(e){for(var t=0;t<this._contextProxies.length;t++)if(this._contextProxies[t]._context instanceof e)return this._contextProxies[t];for(var n=null,i=this.component;i&&"*ROOT*"!=i.cid;){var o=i.contextManager._context;if(o instanceof e){n=o;break}var r=i.parent();if(i===r)throw new Error(i+"is its own parent()");i=r}if(!n)return null;var s=new a(n,this.component.cid);return this._contextProxies.push(s),s},unload:function(){for(var e=0;e<this._contextProxies.length;e++)this._contextProxies[e].off()}});t.initComponent=function(e){var t=new l(e);e.contextManager=t,e.getContext=t.get.bind(t)},t.unloadComponent=function(e){e.contextManager&&e.contextManager.unload()},t.ActionBar=s.extend({initialProperties:function(){return{commentsElem:null,loadComments:!1,showComments:!1,updateSticky:!1,toggleRAD:!1}}}),t.CaptchaInput=s.extend({initialProperties:function(){return{present:!1,sync:null,isCaptchaFilled:!0,captchaResponse:""}}}),t.HoverMenu=s.extend({initialProperties:function(){return{isShown:!1,hidden:!0}}})},"./shared/w2.timing.js":function(e,t){var n=t.timing={requests:[]};t.getTime=function(){return Date.now()},(t.logTime=function(e,t){var i=n[e]=t===undefined?Date.now():t,o=window.log;o&&o.enabled&&"start"!=e&&o("w2.timing.logTime",e,"=",(i-n.start)/1e3,"s")})("start"),t.logRequestTime=function(e,i){var o=window.log,r={name:e===undefined?null:e,start:i,end:Date.now()};t.stopped||n.requests.push(r),o&&o.enabled&&"start"!=e&&o("w2.timing.logRequestTime",r.name,":",(r.start-n.start)/1e3,"..",(r.end-n.start)/1e3,"s")},t.stop=function(){t.stopped=!0}},"./shared/window_manager.js":function(e,t,n){var i=n("./shared/jquery.js"),o=n("./gating.js"),r=n("./shared/util.js"),s=n("./shared/client.js"),a=n("./shared/errors.js");if(PAGE_IS_MOBILE)var l=n("./mobile_app2/messages.js");t.catchRedirectCallback=null;var d=function(e){return/https?:\/\/[a-z.0-9_\.\-]*quora\.com/i.test(e)},c=t.getDomain=function(){return window.location.protocol+"//"+window.location.host+"/"};t.getPathName=function(){return decodeURI(window.location.pathname)};var u=t.getURL=function(){return decodeURI(window.location.href)},h=t.getHash=function(){return window.location.hash},p=t.replaceURL=function(e){window.history&&window.history.replaceState&&window.history.replaceState(window.history.state,null,e)};t.isInHash=function(e){var t=h();if("#"==t.substr(0,1)){t=t.replace("%23","-");for(var n=t.substring(1).split("-"),i=0;i<n.length;i++)if(n[i]==e)return!0}return!1};var f=function(e){for(var t={},n=e.split("&"),i=0;i<n.length;i++){var o=n[i],r=o.split("=");t[r[0]]=decodeURIComponent(r[1])}return t};t.parseURLParamsMulti=function(e){e||(e=window.location.search.substring(1));for(var t={},n=e.split("&"),i=0;i<n.length;i++){var o=n[i],r=o.split("=");r[0].length>0&&(r[0]in t||(t[r[0]]=[]),t[r[0]].push(decodeURIComponent(r[1])))}return t};var m=t.parseURLParams=function(e){return e||(e=window.location.search.substring(1)),0===e.length?{}:f(e)};t.parseParams=function(e){var t={};if(e){var n=e.split("?");2==n.length&&(t=f(n[1]))}return t},t.isParamInURL=function(e,t){return e in m(t)},t.addParamToURL=function(e,t,n){var i=encodeURIComponent(t)+"="+encodeURIComponent(n);i=-1==e.indexOf("?")?"?"+i:"&"+i;var o=e.indexOf("#");return-1==o?e+i:e.substring(0,o)+i+e.substring(o)},t.getURLParam=function(e){return m()[e]};var _=function(e,t,n,o,r){var s=[];if(n)for(var a in n)if(n.hasOwnProperty(a)&&null!==n[a])if(!0===r&&i.isArray(n[a]))for(var l=0;l<n[a].length;l++)s.push(a+"="+encodeURIComponent(n[a][l]));else s.push(a+"="+encodeURIComponent(n[a]));var d=s.join("&"),c=e+t;return d.length>0&&(c+="?"+d),c+=o},g=t.makeURL=function(e,t,n,i){return _(e,t,n,i,!1)},v=t.makeURLMultiParams=function(e,t,n,i){return _(e,t,n,i,!0)},b=t.makeUpdatedURL=function(e){return g(window.location.origin,window.location.pathname,r.extend(m(),e),window.location.hash)};t.updateURLParams=function(e){var t=b(e);return p(t),t},t.replaceURLParamsMulti=function(e){var t=v(window.location.origin,window.location.pathname,e,window.location.hash);return p(t),t},t.replaceURLPath=function(e){var t=v(window.location.origin,e,m(),window.location.hash);return p(t),t},t.addURLParam=function(e,n){var i=m();return i[e]=n,t.updateURLParams(i)},t.removeURLParam=function(e){var n=m();return n[e]=null,t.updateURLParams(n)},t.getTitle=function(){return document.title},t.setTitle=function(e){document.title=e},t.reload=function(){window.location.reload()};var y=!1;t.isPendingNavigation=function(){return y};var w=function(e){return-1!==e.indexOf("quora://")};t.sameDomainURL=function(e){return e&&("/"==e.charAt(0)||new RegExp("^https?://"+window.location.hostname+"/","i").test(c(e)))};var E=function(e){var t=document.createElement("div");return t.innerHTML="<a></a>",t.firstChild.href=e,t.innerHTML=t.innerHTML,t.firstChild.href},T=t.isQuoraURL=function(e){return w(e)||d(e)};t.navigateTo=function(e,t){""!==e&&"#"!==e&&e!=u()+"#"&&(e=E(e),T(e)?x(e,t):C(e,t))};var S=t.navigateToWeb=function(e,n){if(e=E(e),n)return void window.open(e);var i=!0;t.catchRedirectCallback&&(i=t.catchRedirectCallback(e)),i&&(y=!0,o.async_navigate_to_js?setTimeout(function(){window.location=e},0):window.location=e)},C=function(e,t){if(t=t||"system_browser",s.isNativeApp()){var n={url:e};"system_browser"==t?n.target="external":"app_browser"==t?n.target="browser":(a.logJsError("windowManager","invalid nav_style for external URL: "+t),n.target="external"),l.send("openURL",n)}else if(s.isMobileWeb()){var i={url:e};"system_browser"==t?i.target="external":"app_browser"==t?i.target="current":(a.logJsError("windowManager","invalid nav_style for external URL: "+t),i.target="external"),l.send("openURL",i)}else"system_browser"==t?S(e,!0):"app_browser"==t?S(e,!0):(a.logJsError("windowManager","invalid nav_style for external URL: "+t),S(e,!0))},x=function(e,t){if(t=t||"push",s.isNativeApp()){var n={url:e};"push"==t?n.target="current":"present"==t?n.target="discardable_modal":"replace"==t?n.target="reload":"modal_push"==t?n.target="modal":"modal_present"==t?n.target="modal":"system_browser"==t?n.target="external":"app_browser"==t?n.target="browser":(a.logJsError("windowManager","invalid nav_style for Quora URL: "+t),n.target="external"),l.send("openURL",n)}else if(s.isMobileWeb()){var i={url:e};"push"==t?i.target="current":"present"==t?i.target="external":"replace"==t?i.target="current":"modal_push"==t?i.target="current":"modal_present"==t?i.target="external":"system_browser"==t?i.target="external":"app_browser"==t?i.target="browser":(a.logJsError("windowManager","invalid nav_style for Quora URL: "+t),i.target="external"),l.send("openURL",i)}else"push"==t?S(e,!1):"present"==t?S(e,!0):"replace"==t?S(e,!1):"modal_push"==t?S(e,!1):"modal_present"==t?S(e,!0):"system_browser"==t?S(e,!0):"app_browser"==t?S(e,!0):(a.logJsError("windowManager","invalid nav_style for Quora URL: "+t),S(e,!0))};t.headerOffset=45,t.actionBarHeight=52,t.scrollContext=60,t.scrollAndFocus=function(e,n){e-=t.headerOffset,e=Math.max(0,Math.min(i(document).height()-i(window).height(),e));var o=Math.min(500,.5*Math.abs(e-i(document).scrollTop())),r=!1;i("html,body").animate({scrollTop:e},o,"swing",function(){if(!r&&i(n).length){var e=window.scrollX,t=window.scrollY;i(n).focus(),window.scrollTo(e,t),r=!0}})},t.scrollIntoView=function(e,n){n=n||i(e).offset().top;var o=n-i(document).scrollTop();(o<t.headerOffset||o>i(window).height())&&t.scrollAndFocus(n)}},"./shared/window_performance.js":function(e,t){var n=window&&(window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance),i=["name","initiatorType","connectStart","connectEnd","domainLookupStart","domainLookupEnd","duration","fetchStart","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","secureConnectionStart","startTime","workerStart","transferSize","encodedBodySize","decodedBodySize","entryType"];t.getResourceTimingInfo=function(){var e=[];if(n&&n.getEntriesByType)for(var t=n.getEntriesByType("resource"),o=0;o<t.length;o++){for(var r=t[o],s={},a=0;a<i.length;a++){var l=i[a];l in r&&(s[l]=r[l])}e.push(s)}return e},t.getNavigationTiming=function(){var e={};if(n&&n.timing)for(var t in n.timing){var i=n.timing[t];!isNaN(parseFloat(i))&&isFinite(i)&&(e[t]=parseFloat(i))}return e}},"./tchannel_up.js":function(e,t,n){var i=n("./shared/jquery.js"),o=n("./w2.livenode.js"),r=n("./shared/onload.js"),s=n("./shared/util.js"),a=n("./shared/beforeunload.js"),l=n("./shared/Class.js").Class,d=null,c=function(e,t,n,i){var o=window.location.protocol;return i&&(o="https:"===o?"wss:":"ws:"),e?o+"//"+e:[o,"//tch",Math.floor(1e6*Math.random())+1,".tch.",t,"/up/",n,"/updates?"].join("")},u=function(e){new Function(e).call(window)},h=l.extend({__init__:function(e,t,n,i,o,r,s){this.minSeq=e,this.channel=t,this.channelHash=n,this.boxName=i,this.baseHost=o,this.enableWebsocket=s,this.socket=null,this.targetUrl=c(r,this.baseHost,this.boxName,this.enableWebsocket),this.isConnected=!0,this.isActive=!0,this.maxBackOffTime=3e4,this.updateBackOffTime(!0),this.numActiveXhr=0,this.pendingMessages=[]},makeJsonpRequest:function(e){if(0===this.numActiveXhr){this.numActiveXhr+=1;var t={min_seq:this.minSeq,channel:this.channel,hash:this.channelHash};e&&(t.timeout=e),i.ajax({url:this.targetUrl,jsonpCallback:function(){return"jsonp"+s.uuid4()},dataType:"jsonp",method:"GET",data:t,success:this._onSuccess.bind(this),error:this._onError.bind(this),complete:this._onPollComplete.bind(this)})}},makeWebsocketRequest:function(){if(null===this.socket){var e=this.targetUrl+i.param({min_seq:this.minSeq,channel:this.channel,hash:this.channelHash});try{this.socket=new window.WebSocket(e)}catch(e){return void this._onError()}this.socket.onerror=this._onWebsocketError.bind(this),this.socket.onmessage=this._onWebsocketSuccess.bind(this),this.socket.onclose=this._onWebsocketClose.bind(this)}},closeWebsocket:function(){null!==this.socket&&(this.socket.close(),this.socket=null)},setIsConnected:function(e){this.isConnected!=e&&(e?o.reportPageRegainedConnection():o.reportPageLostConnection()),this.isConnected=e},updateBackOffTime:function(e){e&&(this.backOffTime=500),this.backOffTime=Math.min(2*this.backOffTime,this.maxBackOffTime)},_onError:function(){var e=this;setTimeout(function(){e.isActive&&!a.isUnloading()&&(e.updateBackOffTime(),e.setIsConnected(!1),e.poll())},0)},_onWebsocketError:function(e){this.closeWebsocket(),this._onError()},_onPollError:function(e,t){this._onError()},_onSuccess:function(e){if(this.isActive&&!a.isUnloading()){this.updateBackOffTime(!0),this.setIsConnected(!0);try{if(e.error)throw e.error;this.minSeq=e.min_seq;for(var t=0;t<e.messages.length;t++)u(e.messages[t])}catch(e){return void o.reportPageNeedsReload("tchannel_error")}this.poll()}},_onWebsocketSuccess:function(e){this._onSuccess(JSON.parse(e.data))},_onPollSuccess:function(e){this._onSuccess(e)},_onWebsocketClose:function(){this.closeWebsocket()},_onPollComplete:function(){this.numActiveXhr-=1},poll:function(e){this.enableWebsocket?setTimeout(this.makeWebsocketRequest.bind(this),this.backOffTime):setTimeout(this.makeJsonpRequest.bind(this,e),this.backOffTime)},start:function(){this.poll(2e3)},stop:function(){this.isActive=!1}});t.start=function(e){"WebSocket"in window||(e.enableWebsocket=!1),d=new h(e.minSeq,e.channel,e.channelHash,e.boxName,e.baseHost,e.targetUrl,e.enableWebsocket),r.execAfterLoadDelayed(function(){d.start()})},t.stop=function(){d&&d.stop()}},"./third_party/browser.js":function(e,t){/*!
  * This utility helps to detect browser type & version.
  * Modified from:
  * https://github.com/ded/bowser
  * MIT License | (c) Dustin Diaz 2015
  */
!function(t,n){void 0!==e&&e.exports?e.exports=n():"function"==typeof define&&define.amd?define(t,n):this[t]=n()}("bowser",function(){function e(e){function t(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}function n(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}var i,o=t(/(ipod|iphone|ipad)/i).toLowerCase(),r=/like android/i.test(e),a=!r&&/android/i.test(e),l=/nexus\s*[0-6]\s*/i.test(e),d=!l&&/nexus\s*[0-9]+/i.test(e),c=/CrOS/.test(e),u=/silk/i.test(e),h=/sailfish/i.test(e),p=/tizen/i.test(e),f=/(web|hpw)os/i.test(e),m=/windows phone/i.test(e),_=(/SamsungBrowser/i.test(e),!m&&/windows/i.test(e)),g=!o&&!u&&/macintosh/i.test(e),v=!a&&!h&&!p&&!f&&/linux/i.test(e),b=t(/edge\/(\d+(\.\d+)?)/i),y=t(/version\/(\d+(\.\d+)?)/i),w=/tablet/i.test(e),E=!w&&/[^-]mobi/i.test(e),T=/xbox/i.test(e);/opera/i.test(e)?i={name:"Opera",opera:s,version:y||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr|opios/i.test(e)?i={name:"Opera",opera:s,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||y}:/SamsungBrowser/i.test(e)?i={name:"Samsung Internet for Android",samsungBrowser:s,version:y||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?i={name:"Opera Coast",coast:s,version:y||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?i={name:"Yandex Browser",yandexbrowser:s,version:y||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?i={name:"UC Browser",ucbrowser:s,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?i={name:"Maxthon",maxthon:s,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?i={name:"Epiphany",epiphany:s,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?i={name:"Puffin",puffin:s,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?i={name:"Sleipnir",sleipnir:s,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?i={name:"K-Meleon",kMeleon:s,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:m?(i={name:"Windows Phone",windowsphone:s},b?(i.msedge=s,i.version=b):(i.msie=s,i.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?i={name:"Internet Explorer",msie:s,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?i={name:"Chrome",chromeos:s,chromeBook:s,chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?i={name:"Microsoft Edge",msedge:s,version:b}:/vivaldi/i.test(e)?i={name:"Vivaldi",vivaldi:s,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||y}:h?i={name:"Sailfish",sailfish:s,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?i={name:"SeaMonkey",seamonkey:s,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(i={name:"Firefox",firefox:s,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(i.firefoxos=s)):u?i={name:"Amazon Silk",silk:s,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?i={name:"PhantomJS",phantom:s,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?i={name:"SlimerJS",slimer:s,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?i={name:"BlackBerry",blackberry:s,version:y||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:f?(i={name:"WebOS",webos:s,version:y||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(i.touchpad=s)):/bada/i.test(e)?i={name:"Bada",bada:s,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:p?i={name:"Tizen",tizen:s,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||y}:/qupzilla/i.test(e)?i={name:"QupZilla",qupzilla:s,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||y}:/chromium/i.test(e)?i={name:"Chromium",chromium:s,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||y}:/chrome|crios|crmo/i.test(e)?i={name:"Chrome",chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:a?i={name:"Android",version:y}:/safari|applewebkit/i.test(e)?(i={name:"Safari",safari:s},y&&(i.version=y)):o?(i={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},y&&(i.version=y)):i=/googlebot/i.test(e)?{name:"Googlebot",googlebot:s,version:t(/googlebot\/(\d+(\.\d+))/i)||y}:{name:t(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!i.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(i.name=i.name||"Blink",i.blink=s):(i.name=i.name||"Webkit",i.webkit=s),!i.version&&y&&(i.version=y)):!i.opera&&/gecko\//i.test(e)&&(i.name=i.name||"Gecko",i.gecko=s,i.version=i.version||t(/gecko\/(\d+(\.\d+)?)/i)),i.msedge||!a&&!i.silk?o?(i[o]=s,i.ios=s):g?i.mac=s:T?i.xbox=s:_?i.windows=s:v&&(i.linux=s):i.android=s;var S="";i.windowsphone?S=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):o?(S=t(/os (\d+([_\s]\d+)*) like mac os x/i),S=S.replace(/[_\s]/g,".")):a?S=t(/android[ \/-](\d+(\.\d+)*)/i):i.webos?S=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?S=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?S=t(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(S=t(/tizen[\/\s](\d+(\.\d+)*)/i)),S&&(i.osversion=S);var C=S.split(".")[0];return w||d||"ipad"==o||a&&(3==C||C>=4&&!E)||i.silk?i.tablet=s:(E||"iphone"==o||"ipod"==o||a||l||i.blackberry||i.webos||i.bada)&&(i.mobile=s),i.msedge||i.msie&&i.version>=10||i.yandexbrowser&&i.version>=15||i.vivaldi&&i.version>=1||i.chrome&&i.version>=20||i.samsungBrowser&&i.version>=4||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1||i.chromium&&i.version>=20?i.a=s:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6||i.chromium&&i.version<20?i.c=s:i.x=s,i}function t(e){return e.split(".").length}function n(e,t){var n,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)i.push(t(e[n]));return i}function i(e){for(var i=Math.max(t(e[0]),t(e[1])),o=n(e,function(e){var o=i-t(e);return e+=new Array(o+1).join(".0"),n(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--i>=0;){if(o[0][i]>o[1][i])return 1;if(o[0][i]!==o[1][i])return-1;if(0===i)return 0}}function o(t,n,o){var r=a;"string"==typeof n&&(o=n,n=void 0),void 0===n&&(n=!1),o&&(r=e(o));var s=""+r.version;for(var l in t)if(t.hasOwnProperty(l)&&r[l])return i([s,t[l]])<0;return n}function r(e,t,n){return!o(e,t,n)}var s=!0,a=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return a.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in a)return!0}return!1},a.isUnsupportedBrowser=o,a.compareVersions=i,a.check=r,a._detect=e,a})},"./third_party/intersection-observer.js":function(e,t){!function(e,n){"use strict";function i(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||u(),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,i=this.intersectionRect,o=i.width*i.height;this.intersectionRatio=n?o/n:0}function o(e,t){var n=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=s(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function r(){return e.performance&&performance.now&&performance.now()}function s(e,t){var n=null;return function(){n||(n=setTimeout(function(){e(),n=null},t))}}function a(e,t,n,i){"function"==typeof e.addEventListener?e.addEventListener(t,n,i||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function l(e,t,n,i){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,i||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function d(e,t){var n=Math.max(e.top,t.top),i=Math.min(e.bottom,t.bottom),o=Math.max(e.left,t.left),r=Math.min(e.right,t.right),s=r-o,a=i-n;return s>=0&&a>=0&&{top:n,bottom:i,left:o,right:r,width:s,height:a}}function c(e){var t=e.getBoundingClientRect();if(t)return t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t}function u(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}var h=n.documentElement,p=[];o.prototype.THROTTLE_TIMEOUT=100,o.prototype.POLL_INTERVAL=null,o.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections()}},o.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},o.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},o.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},o.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},o.prototype._parseRootMargin=function(e){var t=e||"0px",n=t.split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return n[1]=n[1]||n[0],n[2]=n[2]||n[0],n[3]=n[3]||n[1],n},o.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this._checkForIntersections(),this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(a(e,"resize",this._checkForIntersections,!0),a(n,"scroll",this._checkForIntersections,!0),"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(n,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},o.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,l(e,"resize",this._checkForIntersections,!0),l(n,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},o.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),t=e?this._getRootRect():u();this._observationTargets.forEach(function(n){var o=n.element,s=c(o),a=this._rootContainsTarget(o),l=n.entry,d=e&&a&&this._computeTargetAndRootIntersection(o,t),u=n.entry=new i({time:r(),target:o,boundingClientRect:s,rootBounds:t,intersectionRect:d});e&&a?this._hasCrossedThreshold(l,u)&&this._queuedEntries.push(u):l&&l.isIntersecting&&this._queuedEntries.push(u)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},o.prototype._computeTargetAndRootIntersection=function(t,n){if("none"!=e.getComputedStyle(t).display){return d(n,c(t))}},o.prototype._getRootRect=function(){var e;if(this.root)e=c(this.root);else{var t=n.documentElement,i=n.body;e={top:0,left:0,right:t.clientWidth||i.clientWidth,width:t.clientWidth||i.clientWidth,bottom:t.clientHeight||i.clientHeight,height:t.clientHeight||i.clientHeight}}return this._expandRectByRootMargin(e)},o.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100}),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},o.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,i=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==i)for(var o=0;o<this.thresholds.length;o++){var r=this.thresholds[o];if(r==n||r==i||r<n!=r<i)return!0}},o.prototype._rootIsInDom=function(){return!this.root||h.contains(this.root)},o.prototype._rootContainsTarget=function(e){return(this.root||h).contains(e)},o.prototype._registerInstance=function(){p.indexOf(this)<0&&p.push(this)},o.prototype._unregisterInstance=function(){var e=p.indexOf(this);-1!=e&&p.splice(e,1)},"IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype||(e.IntersectionObserver=o,e.IntersectionObserverEntry=i),t.IntersectionObserver=o}(window,document)},"./third_party/jquery3.js":function(e,t){/*!
 * jQuery JavaScript Library v3.0.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2016-06-09T18:02Z
 */
!function(t,n){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function n(e,t){t=t||Z;var n=t.createElement("script");n.text=e,t.head.appendChild(n).parentNode.removeChild(n)}function i(e){var t=!!e&&"length"in e&&e.length,n=he.type(e);return"function"!==n&&!he.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function o(e,t,n){if(he.isFunction(t))return he.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return he.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(Ee.test(t))return he.filter(t,e,n);t=he.filter(t,e)}return he.grep(e,function(e){return oe.call(t,e)>-1!==n&&1===e.nodeType})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function s(e){var t={};return he.each(e.match(ke)||[],function(e,n){t[n]=!0}),t}function a(e){return e}function l(e){throw e}function d(e,t,n){var i;try{e&&he.isFunction(i=e.promise)?i.call(e).done(t).fail(n):e&&he.isFunction(i=e.then)?i.call(e,t,n):t.call(undefined,e)}catch(e){n.call(undefined,e)}}function c(){Z.removeEventListener("DOMContentLoaded",c),e.removeEventListener("load",c),he.ready()}function u(){this.expando=he.expando+u.uid++}function h(e,t,n){var i;if(n===undefined&&1===e.nodeType)if(i="data-"+t.replace(Ne,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Pe.test(n)?JSON.parse(n):n)}catch(e){}Me.set(e,t,n)}else n=undefined;return n}function p(e,t,n,i){var o,r=1,s=20,a=i?function(){return i.cur()}:function(){return he.css(e,t,"")},l=a(),d=n&&n[3]||(he.cssNumber[t]?"":"px"),c=(he.cssNumber[t]||"px"!==d&&+l)&&Be.exec(he.css(e,t));if(c&&c[3]!==d){d=d||c[3],n=n||[],c=+l||1;do{r=r||".5",c/=r,he.style(e,t,c+d)}while(r!==(r=a()/l)&&1!==r&&--s)}return n&&(c=+c||+l||0,o=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=d,i.start=c,i.end=o)),o}function f(e){var t,n=e.ownerDocument,i=e.nodeName,o=qe[i];return o||(t=n.body.appendChild(n.createElement(i)),o=he.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),qe[i]=o,o)}function m(e,t){for(var n,i,o=[],r=0,s=e.length;r<s;r++)i=e[r],i.style&&(n=i.style.display,t?("none"===n&&(o[r]=De.get(i,"display")||null,o[r]||(i.style.display="")),""===i.style.display&&Ue(i)&&(o[r]=f(i))):"none"!==n&&(o[r]="none",De.set(i,"display",n)));for(r=0;r<s;r++)null!=o[r]&&(e[r].style.display=o[r]);return e}function _(e,t){var n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return t===undefined||t&&he.nodeName(e,t)?he.merge([e],n):n}function g(e,t){for(var n=0,i=e.length;n<i;n++)De.set(e[n],"globalEval",!t||De.get(t[n],"globalEval"))}function v(e,t,n,i,o){for(var r,s,a,l,d,c,u=t.createDocumentFragment(),h=[],p=0,f=e.length;p<f;p++)if((r=e[p])||0===r)if("object"===he.type(r))he.merge(h,r.nodeType?[r]:r);else if(Ve.test(r)){for(s=s||u.appendChild(t.createElement("div")),a=($e.exec(r)||["",""])[1].toLowerCase(),l=Ge[a]||Ge._default,s.innerHTML=l[1]+he.htmlPrefilter(r)+l[2],c=l[0];c--;)s=s.lastChild;he.merge(h,s.childNodes),s=u.firstChild,s.textContent=""}else h.push(t.createTextNode(r));for(u.textContent="",p=0;r=h[p++];)if(i&&he.inArray(r,i)>-1)o&&o.push(r);else if(d=he.contains(r.ownerDocument,r),s=_(u.appendChild(r),"script"),d&&g(s),n)for(c=0;r=s[c++];)We.test(r.type||"")&&n.push(r);return u}function b(){return!0}function y(){return!1}function w(){try{return Z.activeElement}catch(e){}}function E(e,t,n,i,o,r){var s,a;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=undefined);for(a in t)E(e,a,n,i,t[a],r);return e}if(null==i&&null==o?(o=n,i=n=undefined):null==o&&("string"==typeof n?(o=i,i=undefined):(o=i,i=n,n=undefined)),!1===o)o=y;else if(!o)return e;return 1===r&&(s=o,o=function(e){return he().off(e),s.apply(this,arguments)},o.guid=s.guid||(s.guid=he.guid++)),e.each(function(){he.event.add(this,t,o,i,n)})}function T(e,t){return he.nodeName(e,"table")&&he.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e:e}function S(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function C(e){var t=et.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function x(e,t){var n,i,o,r,s,a,l,d;if(1===t.nodeType){if(De.hasData(e)&&(r=De.access(e),s=De.set(t,r),d=r.events)){delete s.handle,s.events={};for(o in d)for(n=0,i=d[o].length;n<i;n++)he.event.add(t,o,d[o][n])}Me.hasData(e)&&(a=Me.access(e),l=he.extend({},a),Me.set(t,l))}}function k(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Fe.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function A(e,t,i,o){t=ne.apply([],t);var r,s,a,l,d,c,u=0,h=e.length,p=h-1,f=t[0],m=he.isFunction(f);if(m||h>1&&"string"==typeof f&&!ce.checkClone&&Ze.test(f))return e.each(function(n){var r=e.eq(n);m&&(t[0]=f.call(this,n,r.html())),A(r,t,i,o)});if(h&&(r=v(t,e[0].ownerDocument,!1,e,o),s=r.firstChild,1===r.childNodes.length&&(r=s),s||o)){for(a=he.map(_(r,"script"),S),l=a.length;u<h;u++)d=r,u!==p&&(d=he.clone(d,!0,!0),l&&he.merge(a,_(d,"script"))),i.call(e[u],d,u);if(l)for(c=a[a.length-1].ownerDocument,he.map(a,C),u=0;u<l;u++)d=a[u],We.test(d.type||"")&&!De.access(d,"globalEval")&&he.contains(c,d)&&(d.src?he._evalUrl&&he._evalUrl(d.src):n(d.textContent.replace(tt,""),c))}return e}function I(e,t,n){for(var i,o=t?he.filter(t,e):e,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||he.cleanData(_(i)),i.parentNode&&(n&&he.contains(i.ownerDocument,i)&&g(_(i,"script")),i.parentNode.removeChild(i));return e}function O(e,t,n){var i,o,r,s,a=e.style;return n=n||ot(e),n&&(s=n.getPropertyValue(t)||n[t],""!==s||he.contains(e.ownerDocument,e)||(s=he.style(e,t)),!ce.pixelMarginRight()&&it.test(s)&&nt.test(t)&&(i=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=o,a.maxWidth=r)),s!==undefined?s+"":s}function L(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function D(e){if(e in dt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=lt.length;n--;)if((e=lt[n]+t)in dt)return e}function M(e,t,n){var i=Be.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function P(e,t,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,s=0;r<4;r+=2)"margin"===n&&(s+=he.css(e,n+Re[r],!0,o)),i?("content"===n&&(s-=he.css(e,"padding"+Re[r],!0,o)),"margin"!==n&&(s-=he.css(e,"border"+Re[r]+"Width",!0,o))):(s+=he.css(e,"padding"+Re[r],!0,o),"padding"!==n&&(s+=he.css(e,"border"+Re[r]+"Width",!0,o)));return s}function N(e,t,n){var i,o=!0,r=ot(e),s="border-box"===he.css(e,"boxSizing",!1,r);if(e.getClientRects().length&&(i=e.getBoundingClientRect()[t]),i<=0||null==i){if(i=O(e,t,r),(i<0||null==i)&&(i=e.style[t]),it.test(i))return i;o=s&&(ce.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+P(e,t,n||(s?"border":"content"),o,r)+"px"}function j(e,t,n,i,o){return new j.prototype.init(e,t,n,i,o)}function B(){ut&&(e.requestAnimationFrame(B),he.fx.tick())}function R(){return e.setTimeout(function(){ct=undefined}),ct=he.now()}function U(e,t){var n,i=0,o={height:e};for(t=t?1:0;i<4;i+=2-t)n=Re[i],o["margin"+n]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function H(e,t,n){for(var i,o=($.tweeners[t]||[]).concat($.tweeners["*"]),r=0,s=o.length;r<s;r++)if(i=o[r].call(n,t,e))return i}function q(e,t,n){var i,o,r,s,a,l,d,c,u="width"in t||"height"in t,h=this,p={},f=e.style,_=e.nodeType&&Ue(e),g=De.get(e,"fxshow");n.queue||(s=he._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,h.always(function(){h.always(function(){s.unqueued--,he.queue(e,"fx").length||s.empty.fire()})}));for(i in t)if(o=t[i],ht.test(o)){if(delete t[i],r=r||"toggle"===o,o===(_?"hide":"show")){if("show"!==o||!g||g[i]===undefined)continue;_=!0}p[i]=g&&g[i]||he.style(e,i)}if((l=!he.isEmptyObject(t))||!he.isEmptyObject(p)){u&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],d=g&&g.display,null==d&&(d=De.get(e,"display")),c=he.css(e,"display"),"none"===c&&(d?c=d:(m([e],!0),d=e.style.display||d,c=he.css(e,"display"),m([e]))),("inline"===c||"inline-block"===c&&null!=d)&&"none"===he.css(e,"float")&&(l||(h.done(function(){f.display=d}),null==d&&(c=f.display,d="none"===c?"":c)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),l=!1;for(i in p)l||(g?"hidden"in g&&(_=g.hidden):g=De.access(e,"fxshow",{display:d}),r&&(g.hidden=!_),_&&m([e],!0),h.done(function(){_||m([e]),De.remove(e,"fxshow");for(i in p)he.style(e,i,p[i])})),l=H(_?g[i]:0,i,h),i in g||(g[i]=l.start,_&&(l.end=l.start,l.start=0))}}function F(e,t){var n,i,o,r,s;for(n in e)if(i=he.camelCase(n),o=t[i],r=e[n],he.isArray(r)&&(o=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),(s=he.cssHooks[i])&&"expand"in s){r=s.expand(r),delete e[i];for(n in r)n in e||(e[n]=r[n],t[n]=o)}else t[i]=o}function $(e,t,n){var i,o,r=0,s=$.prefilters.length,a=he.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=ct||R(),n=Math.max(0,d.startTime+d.duration-t),i=n/d.duration||0,r=1-i,s=0,l=d.tweens.length;s<l;s++)d.tweens[s].run(r);return a.notifyWith(e,[d,r,n]),r<1&&l?n:(a.resolveWith(e,[d]),!1)},d=a.promise({elem:e,props:he.extend({},t),opts:he.extend(!0,{specialEasing:{},easing:he.easing._default},n),originalProperties:t,originalOptions:n,startTime:ct||R(),duration:n.duration,tweens:[],createTween:function(t,n){var i=he.Tween(e,d.opts,t,n,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(i),i},stop:function(t){var n=0,i=t?d.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)d.tweens[n].run(1);return t?(a.notifyWith(e,[d,1,0]),a.resolveWith(e,[d,t])):a.rejectWith(e,[d,t]),this}}),c=d.props;for(F(c,d.opts.specialEasing);r<s;r++)if(i=$.prefilters[r].call(d,e,c,d.opts))return he.isFunction(i.stop)&&(he._queueHooks(d.elem,d.opts.queue).stop=he.proxy(i.stop,i)),i;return he.map(c,H,d),he.isFunction(d.opts.start)&&d.opts.start.call(e,d),he.fx.timer(he.extend(l,{elem:e,anim:d,queue:d.opts.queue})),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always)}function W(e){return e.getAttribute&&e.getAttribute("class")||""}function G(e,t,n,i){var o;if(he.isArray(t))he.each(t,function(t,o){n||Ct.test(e)?i(e,o):G(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,i)});else if(n||"object"!==he.type(t))i(e,t);else for(o in t)G(e+"["+o+"]",t[o],n,i)}function V(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,r=t.toLowerCase().match(ke)||[];if(he.isFunction(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function Q(e,t,n,i){function o(a){var l;return r[a]=!0,he.each(e[a]||[],function(e,a){var d=a(t,n,i);return"string"!=typeof d||s||r[d]?s?!(l=d):void 0:(t.dataTypes.unshift(d),o(d),!1)}),l}var r={},s=e===Bt;return o(t.dataTypes[0])||!r["*"]&&o("*")}function z(e,t){var n,i,o=he.ajaxSettings.flatOptions||{};for(n in t)t[n]!==undefined&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&he.extend(!0,e,i),e}function J(e,t,n){for(var i,o,r,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),i===undefined&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in a)if(a[o]&&a[o].test(i)){l.unshift(o);break}if(l[0]in n)r=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){r=o;break}s||(s=o)}r=r||s}if(r)return r!==l[0]&&l.unshift(r),n[r]}function K(e,t,n,i){var o,r,s,a,l,d={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)d[s.toLowerCase()]=e.converters[s];for(r=c.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=c.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=d[l+" "+r]||d["* "+r]))for(o in d)if(a=o.split(" "),a[1]===r&&(s=d[l+" "+a[0]]||d["* "+a[0]])){!0===s?s=d[o]:!0!==d[o]&&(r=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}function X(e){return he.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Y=[],Z=e.document,ee=Object.getPrototypeOf,te=Y.slice,ne=Y.concat,ie=Y.push,oe=Y.indexOf,re={},se=re.toString,ae=re.hasOwnProperty,le=ae.toString,de=le.call(Object),ce={},ue="3.0.0",he=function(e,t){return new he.fn.init(e,t)},pe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,fe=/^-ms-/,me=/-([a-z])/g,_e=function(e,t){return t.toUpperCase()};he.fn=he.prototype={jquery:ue,constructor:he,length:0,toArray:function(){return te.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:te.call(this)},pushStack:function(e){var t=he.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return he.each(this,e)},map:function(e){return this.pushStack(he.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(te.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ie,sort:Y.sort,splice:Y.splice},he.extend=he.fn.extend=function(){var e,t,n,i,o,r,s=arguments[0]||{},a=1,l=arguments.length,d=!1;for("boolean"==typeof s&&(d=s,s=arguments[a]||{},a++),"object"==typeof s||he.isFunction(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],i=e[t],s!==i&&(d&&i&&(he.isPlainObject(i)||(o=he.isArray(i)))?(o?(o=!1,r=n&&he.isArray(n)?n:[]):r=n&&he.isPlainObject(n)?n:{},s[t]=he.extend(d,r,i)):i!==undefined&&(s[t]=i));return s},he.extend({expando:"jQuery"+(ue+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===he.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=he.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==se.call(e))&&(!(t=ee(e))||"function"==typeof(n=ae.call(t,"constructor")&&t.constructor)&&le.call(n)===de)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?re[se.call(e)]||"object":typeof e},globalEval:function(e){n(e)},camelCase:function(e){return e.replace(fe,"ms-").replace(me,_e)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,o=0;if(i(e))for(n=e.length;o<n&&!1!==t.call(e[o],o,e[o]);o++);else for(o in e)if(!1===t.call(e[o],o,e[o]))break;return e},trim:function(e){return null==e?"":(e+"").replace(pe,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?he.merge(n,"string"==typeof e?[e]:e):ie.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:oe.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;i<n;i++)e[o++]=t[i];return e.length=o,e},grep:function(e,t,n){for(var i=[],o=0,r=e.length,s=!n;o<r;o++)!t(e[o],o)!==s&&i.push(e[o]);return i},map:function(e,t,n){var o,r,s=0,a=[];if(i(e))for(o=e.length;s<o;s++)null!=(r=t(e[s],s,n))&&a.push(r);else for(s in e)null!=(r=t(e[s],s,n))&&a.push(r);return ne.apply([],a)},guid:1,proxy:function(e,t){var n,i,o;return"string"==typeof t&&(n=e[t],t=e,e=n),he.isFunction(e)?(i=te.call(arguments,2),o=function(){return e.apply(t||this,i.concat(te.call(arguments)))},o.guid=e.guid=e.guid||he.guid++,o):undefined},now:Date.now,support:ce}),"function"==typeof Symbol&&(he.fn[Symbol.iterator]=Y[Symbol.iterator]),he.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){re["[object "+t+"]"]=t.toLowerCase()});var ge=/*!
 * Sizzle CSS Selector Engine v2.3.0
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-01-04
 */
function(e){function t(e,t,n,i){var o,r,s,a,l,d,c,h=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!i&&((t?t.ownerDocument||t:q)!==M&&D(t),t=t||M,N)){if(11!==f&&(l=ge.exec(e)))if(o=l[1]){if(9===f){if(!(s=t.getElementById(o)))return n;if(s.id===o)return n.push(s),n}else if(h&&(s=h.getElementById(o))&&U(t,s)&&s.id===o)return n.push(s),n}else{if(l[2])return Y.apply(n,t.getElementsByTagName(e)),n;if((o=l[3])&&E.getElementsByClassName&&t.getElementsByClassName)return Y.apply(n,t.getElementsByClassName(o)),n}if(E.qsa&&!V[e+" "]&&(!j||!j.test(e))){if(1!==f)h=t,c=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(we,Ee):t.setAttribute("id",a=H),d=x(e),r=d.length;r--;)d[r]="#"+a+" "+p(d[r]);c=d.join(","),h=ve.test(e)&&u(t.parentNode)||t}if(c)try{return Y.apply(n,h.querySelectorAll(c)),n}catch(e){}finally{a===H&&t.removeAttribute("id")}}}return A(e.replace(ae,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>T.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[H]=!0,e}function o(e){var t=M.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var n=e.split("|"),i=n.length;i--;)T.attrHandle[n[i]]=t}function s(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function d(e){return function(t){return"label"in t&&t.disabled===e||"form"in t&&t.disabled===e||"form"in t&&!1===t.disabled&&(t.isDisabled===e||t.isDisabled!==!e&&("label"in t||!Se(t))!==e)}}function c(e){return i(function(t){return t=+t,i(function(n,i){for(var o,r=e([],n.length,t),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function u(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function h(){}function p(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,o=t.next,r=o||i,s=n&&"parentNode"===r,a=$++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||s)return e(t,n,o)}:function(t,n,l){var d,c,u,h=[F,a];if(l){for(;t=t[i];)if((1===t.nodeType||s)&&e(t,n,l))return!0}else for(;t=t[i];)if(1===t.nodeType||s)if(u=t[H]||(t[H]={}),c=u[t.uniqueID]||(u[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[i]||t;else{if((d=c[r])&&d[0]===F&&d[1]===a)return h[2]=d[2];if(c[r]=h,h[2]=e(t,n,l))return!0}}}function m(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function _(e,n,i){for(var o=0,r=n.length;o<r;o++)t(e,n[o],i);return i}function g(e,t,n,i,o){for(var r,s=[],a=0,l=e.length,d=null!=t;a<l;a++)(r=e[a])&&(n&&!n(r,i,o)||(s.push(r),d&&t.push(a)));return s}function v(e,t,n,o,r,s){return o&&!o[H]&&(o=v(o)),r&&!r[H]&&(r=v(r,s)),i(function(i,s,a,l){var d,c,u,h=[],p=[],f=s.length,m=i||_(t||"*",a.nodeType?[a]:a,[]),v=!e||!i&&t?m:g(m,h,e,a,l),b=n?r||(i?e:f||o)?[]:s:v;if(n&&n(v,b,a,l),o)for(d=g(b,p),o(d,[],a,l),c=d.length;c--;)(u=d[c])&&(b[p[c]]=!(v[p[c]]=u));if(i){if(r||e){if(r){for(d=[],c=b.length;c--;)(u=b[c])&&d.push(v[c]=u);r(null,b=[],d,l)}for(c=b.length;c--;)(u=b[c])&&(d=r?ee(i,u):h[c])>-1&&(i[d]=!(s[d]=u))}}else b=g(b===s?b.splice(f,b.length):b),r?r(null,s,b,l):Y.apply(s,b)})}function b(e){for(var t,n,i,o=e.length,r=T.relative[e[0].type],s=r||T.relative[" "],a=r?1:0,l=f(function(e){return e===t},s,!0),d=f(function(e){return ee(t,e)>-1},s,!0),c=[function(e,n,i){var o=!r&&(i||n!==I)||((t=n).nodeType?l(e,n,i):d(e,n,i));return t=null,o}];a<o;a++)if(n=T.relative[e[a].type])c=[f(m(c),n)];else{if(n=T.filter[e[a].type].apply(null,e[a].matches),n[H]){for(i=++a;i<o&&!T.relative[e[i].type];i++);return v(a>1&&m(c),a>1&&p(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ae,"$1"),n,a<i&&b(e.slice(a,i)),i<o&&b(e=e.slice(i)),i<o&&p(e))}c.push(n)}return m(c)}function y(e,n){var o=n.length>0,r=e.length>0,s=function(i,s,a,l,d){var c,u,h,p=0,f="0",m=i&&[],_=[],v=I,b=i||r&&T.find.TAG("*",d),y=F+=null==v?1:Math.random()||.1,w=b.length;for(d&&(I=s===M||s||d);f!==w&&null!=(c=b[f]);f++){if(r&&c){for(u=0,s||c.ownerDocument===M||(D(c),a=!N);h=e[u++];)if(h(c,s||M,a)){l.push(c);break}d&&(F=y)}o&&((c=!h&&c)&&p--,i&&m.push(c))}if(p+=f,o&&f!==p){for(u=0;h=n[u++];)h(m,_,s,a);if(i){if(p>0)for(;f--;)m[f]||_[f]||(_[f]=K.call(l));_=g(_)}Y.apply(l,_),d&&!i&&_.length>0&&p+n.length>1&&t.uniqueSort(l)}return d&&(F=y,I=v),m};return o?i(s):s}var w,E,T,S,C,x,k,A,I,O,L,D,M,P,N,j,B,R,U,H="sizzle"+1*new Date,q=e.document,F=0,$=0,W=n(),G=n(),V=n(),Q=function(e,t){return e===t&&(L=!0),0},z={}.hasOwnProperty,J=[],K=J.pop,X=J.push,Y=J.push,Z=J.slice,ee=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",oe="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",re=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),ae=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),de=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),ue=new RegExp(re),he=new RegExp("^"+ie+"$"),pe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,_e=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,be=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),ye=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},we=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,Ee=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},Te=function(){D()},Se=f(function(e){return!0===e.disabled},{dir:"parentNode",next:"legend"});try{Y.apply(J=Z.call(q.childNodes),q.childNodes),J[q.childNodes.length].nodeType}catch(e){Y={apply:J.length?function(e,t){X.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}E=t.support={},C=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},D=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:q;return i!==M&&9===i.nodeType&&i.documentElement?(M=i,P=M.documentElement,N=!C(M),q!==M&&(n=M.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Te,!1):n.attachEvent&&n.attachEvent("onunload",Te)),E.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),E.getElementsByTagName=o(function(e){return e.appendChild(M.createComment("")),!e.getElementsByTagName("*").length}),E.getElementsByClassName=_e.test(M.getElementsByClassName),E.getById=o(function(e){return P.appendChild(e).id=H,!M.getElementsByName||!M.getElementsByName(H).length}),E.getById?(T.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&N){var n=t.getElementById(e);return n?[n]:[]}},T.filter.ID=function(e){var t=e.replace(be,ye);return function(e){return e.getAttribute("id")===t}}):(delete T.find.ID,T.filter.ID=function(e){var t=e.replace(be,ye);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),T.find.TAG=E.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):E.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},T.find.CLASS=E.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&N)return t.getElementsByClassName(e)},B=[],j=[],(E.qsa=_e.test(M.querySelectorAll))&&(o(function(e){P.appendChild(e).innerHTML="<a id='"+H+"'></a><select id='"+H+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&j.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||j.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+H+"-]").length||j.push("~="),e.querySelectorAll(":checked").length||j.push(":checked"),e.querySelectorAll("a#"+H+"+*").length||j.push(".#.+[+~]")}),o(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=M.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&j.push("name"+ne+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&j.push(":enabled",":disabled"),P.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&j.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),j.push(",.*:")})),(E.matchesSelector=_e.test(R=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&o(function(e){E.disconnectedMatch=R.call(e,"*"),R.call(e,"[s!='']:x"),B.push("!=",re)}),j=j.length&&new RegExp(j.join("|")),B=B.length&&new RegExp(B.join("|")),t=_e.test(P.compareDocumentPosition),U=t||_e.test(P.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Q=t?function(e,t){if(e===t)return L=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!E.sortDetached&&t.compareDocumentPosition(e)===n?e===M||e.ownerDocument===q&&U(q,e)?-1:t===M||t.ownerDocument===q&&U(q,t)?1:O?ee(O,e)-ee(O,t):0:4&n?-1:1)}:function(e,t){if(e===t)return L=!0,0;var n,i=0,o=e.parentNode,r=t.parentNode,a=[e],l=[t];if(!o||!r)return e===M?-1:t===M?1:o?-1:r?1:O?ee(O,e)-ee(O,t):0;if(o===r)return s(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;a[i]===l[i];)i++;return i?s(a[i],l[i]):a[i]===q?-1:l[i]===q?1:0},M):M},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==M&&D(e),n=n.replace(ce,"='$1']"),E.matchesSelector&&N&&!V[n+" "]&&(!B||!B.test(n))&&(!j||!j.test(n)))try{var i=R.call(e,n);if(i||E.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return t(n,M,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==M&&D(e),U(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==M&&D(e);var n=T.attrHandle[t.toLowerCase()],i=n&&z.call(T.attrHandle,t.toLowerCase())?n(e,t,!N):undefined;return i!==undefined?i:E.attributes||!N?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.escape=function(e){return(e+"").replace(we,Ee)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,o=0;if(L=!E.detectDuplicates,O=!E.sortStable&&e.slice(0),e.sort(Q),L){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return O=null,e},S=t.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=S(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=S(t);return n},T=t.selectors={cacheLength:50,createPseudo:i,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,ye),e[3]=(e[3]||e[4]||e[5]||"").replace(be,ye),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ue.test(n)&&(t=x(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,ye).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(o){var r=t.attr(o,e);return null==r?"!="===n:!n||(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r.replace(se," ")+" ").indexOf(i)>-1:"|="===n&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var d,c,u,h,p,f,m=r!==s?"nextSibling":"previousSibling",_=t.parentNode,g=a&&t.nodeName.toLowerCase(),v=!l&&!a,b=!1;if(_){if(r){for(;m;){for(h=t;h=h[m];)if(a?h.nodeName.toLowerCase()===g:1===h.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?_.firstChild:_.lastChild],s&&v){for(h=_,u=h[H]||(h[H]={}),c=u[h.uniqueID]||(u[h.uniqueID]={}),d=c[e]||[],p=d[0]===F&&d[1],b=p&&d[2],h=p&&_.childNodes[p];h=++p&&h&&h[m]||(b=p=0)||f.pop();)if(1===h.nodeType&&++b&&h===t){c[e]=[F,p,b];break}}else if(v&&(h=t,u=h[H]||(h[H]={}),c=u[h.uniqueID]||(u[h.uniqueID]={}),d=c[e]||[],p=d[0]===F&&d[1],b=p),!1===b)for(;(h=++p&&h&&h[m]||(b=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==g:1!==h.nodeType)||!++b||(v&&(u=h[H]||(h[H]={}),c=u[h.uniqueID]||(u[h.uniqueID]={}),c[e]=[F,b]),h!==t)););return(b-=o)===i||b%i==0&&b/i>=0}}},PSEUDO:function(e,n){var o,r=T.pseudos[e]||T.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return r[H]?r(n):r.length>1?(o=[e,e,"",n],T.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,o=r(e,n),s=o.length;s--;)i=ee(e,o[s]),e[i]=!(t[i]=o[s])}):function(e){return r(e,0,o)}):r}},pseudos:{not:i(function(e){var t=[],n=[],o=k(e.replace(ae,"$1"));return o[H]?i(function(e,t,n,i){for(var r,s=o(e,null,i,[]),a=e.length;a--;)(r=s[a])&&(e[a]=!(t[a]=r))}):function(e,i,r){return t[0]=e,o(t,null,r,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(be,ye),function(t){return(t.textContent||t.innerText||S(t)).indexOf(e)>-1}}),lang:i(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,ye).toLowerCase(),function(t){var n;do{if(n=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===P},focus:function(e){return e===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:d(!1),disabled:d(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[n<0?n+t:n]}),even:c(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}},T.pseudos.nth=T.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[w]=a(w);for(w in{submit:!0,reset:!0})T.pseudos[w]=l(w);return h.prototype=T.filters=T.pseudos,T.setFilters=new h,x=t.tokenize=function(e,n){var i,o,r,s,a,l,d,c=G[e+" "];if(c)return n?0:c.slice(0);for(a=e,l=[],d=T.preFilter;a;){i&&!(o=le.exec(a))||(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),i=!1,(o=de.exec(a))&&(i=o.shift(),r.push({value:i,type:o[0].replace(ae," ")}),a=a.slice(i.length));for(s in T.filter)!(o=pe[s].exec(a))||d[s]&&!(o=d[s](o))||(i=o.shift(),r.push({value:i,type:s,matches:o}),a=a.slice(i.length));if(!i)break}return n?a.length:a?t.error(e):G(e,l).slice(0)},k=t.compile=function(e,t){var n,i=[],o=[],r=V[e+" "];if(!r){for(t||(t=x(e)),n=t.length;n--;)r=b(t[n]),r[H]?i.push(r):o.push(r);r=V(e,y(o,i)),r.selector=e}return r},A=t.select=function(e,t,n,i){var o,r,s,a,l,d="function"==typeof e&&e,c=!i&&x(e=d.selector||e);if(n=n||[],1===c.length){if(r=c[0]=c[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&E.getById&&9===t.nodeType&&N&&T.relative[r[1].type]){if(!(t=(T.find.ID(s.matches[0].replace(be,ye),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(o=pe.needsContext.test(e)?0:r.length;o--&&(s=r[o],!T.relative[a=s.type]);)if((l=T.find[a])&&(i=l(s.matches[0].replace(be,ye),ve.test(r[0].type)&&u(t.parentNode)||t))){if(r.splice(o,1),!(e=i.length&&p(r)))return Y.apply(n,i),n;break}}return(d||k(e,c))(i,t,!N,n,!t||ve.test(e)&&u(t.parentNode)||t),n},E.sortStable=H.split("").sort(Q).join("")===H,E.detectDuplicates=!!L,D(),E.sortDetached=o(function(e){return 1&e.compareDocumentPosition(M.createElement("fieldset"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),E.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||r(te,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);he.find=ge,he.expr=ge.selectors,he.expr[":"]=he.expr.pseudos,he.uniqueSort=he.unique=ge.uniqueSort,he.text=ge.getText,he.isXMLDoc=ge.isXML,he.contains=ge.contains,he.escapeSelector=ge.escape;var ve=function(e,t,n){for(var i=[],o=n!==undefined;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&he(e).is(n))break;i.push(e)}return i},be=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},ye=he.expr.match.needsContext,we=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,Ee=/^.[^:#\[\.,]*$/;he.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?he.find.matchesSelector(i,e)?[i]:[]:he.find.matches(e,he.grep(t,function(e){return 1===e.nodeType}))},he.fn.extend({find:function(e){var t,n,i=this.length,o=this;if("string"!=typeof e)return this.pushStack(he(e).filter(function(){for(t=0;t<i;t++)if(he.contains(o[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)he.find(e,o[t],n);return i>1?he.uniqueSort(n):n},filter:function(e){return this.pushStack(o(this,e||[],!1))},not:function(e){return this.pushStack(o(this,e||[],!0))},is:function(e){return!!o(this,"string"==typeof e&&ye.test(e)?he(e):e||[],!1).length}});var Te,Se=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(he.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||Te,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Se.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof he?t[0]:t,he.merge(this,he.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:Z,!0)),we.test(i[1])&&he.isPlainObject(t))for(i in t)he.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return o=Z.getElementById(i[2]),o&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):he.isFunction(e)?n.ready!==undefined?n.ready(e):e(he):he.makeArray(e,this)}).prototype=he.fn,Te=he(Z);var Ce=/^(?:parents|prev(?:Until|All))/,xe={children:!0,contents:!0,next:!0,prev:!0};he.fn.extend({has:function(e){var t=he(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(he.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,o=this.length,r=[],s="string"!=typeof e&&he(e);if(!ye.test(e))for(;i<o;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&he.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(r.length>1?he.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?oe.call(he(e),this[0]):oe.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(he.uniqueSort(he.merge(this.get(),he(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),he.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ve(e,"parentNode")},parentsUntil:function(e,t,n){return ve(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return ve(e,"nextSibling")},prevAll:function(e){return ve(e,"previousSibling")},nextUntil:function(e,t,n){return ve(e,"nextSibling",n)},prevUntil:function(e,t,n){return ve(e,"previousSibling",n)},siblings:function(e){return be((e.parentNode||{}).firstChild,e)},children:function(e){return be(e.firstChild)},contents:function(e){return e.contentDocument||he.merge([],e.childNodes)}},function(e,t){he.fn[e]=function(n,i){var o=he.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=he.filter(i,o)),this.length>1&&(xe[e]||he.uniqueSort(o),Ce.test(e)&&o.reverse()),this.pushStack(o)}});var ke=/\S+/g;he.Callbacks=function(e){e="string"==typeof e?s(e):he.extend({},e);var t,n,i,o,r=[],a=[],l=-1,d=function(){for(o=e.once,i=t=!0;a.length;l=-1)for(n=a.shift();++l<r.length;)!1===r[l].apply(n[0],n[1])&&e.stopOnFalse&&(l=r.length,n=!1);e.memory||(n=!1),t=!1,o&&(r=n?[]:"")},c={add:function(){return r&&(n&&!t&&(l=r.length-1,a.push(n)),function t(n){he.each(n,function(n,i){he.isFunction(i)?e.unique&&c.has(i)||r.push(i):i&&i.length&&"string"!==he.type(i)&&t(i)})}(arguments),n&&!t&&d()),this},remove:function(){return he.each(arguments,function(e,t){for(var n;(n=he.inArray(t,r,n))>-1;)r.splice(n,1),n<=l&&l--}),this},has:function(e){return e?he.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=a=[],r=n="",this},disabled:function(){return!r},lock:function(){return o=a=[],n||t||(r=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||d()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},he.extend({Deferred:function(t){var n=[["notify","progress",he.Callbacks("memory"),he.Callbacks("memory"),2],["resolve","done",he.Callbacks("once memory"),he.Callbacks("once memory"),0,"resolved"],["reject","fail",he.Callbacks("once memory"),he.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},"catch":function(e){return o.then(null,e)},pipe:function(){var e=arguments;return he.Deferred(function(t){he.each(n,function(n,i){var o=he.isFunction(e[i[4]])&&e[i[4]];r[i[1]](function(){var e=o&&o.apply(this,arguments);e&&he.isFunction(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[i[0]+"With"](this,o?[e]:arguments)})}),e=null}).promise()},then:function(t,i,o){function r(t,n,i,o){return function(){var d=this,c=arguments,u=function(){var e,u;if(!(t<s)){if((e=i.apply(d,c))===n.promise())throw new TypeError("Thenable self-resolution");u=e&&("object"==typeof e||"function"==typeof e)&&e.then,he.isFunction(u)?o?u.call(e,r(s,n,a,o),r(s,n,l,o)):(s++,u.call(e,r(s,n,a,o),r(s,n,l,o),r(s,n,a,n.notifyWith))):(i!==a&&(d=undefined,c=[e]),(o||n.resolveWith)(d,c))}},h=o?u:function(){try{u()}catch(e){he.Deferred.exceptionHook&&he.Deferred.exceptionHook(e,h.stackTrace),t+1>=s&&(i!==l&&(d=undefined,c=[e]),n.rejectWith(d,c))}};t?h():(he.Deferred.getStackHook&&(h.stackTrace=he.Deferred.getStackHook()),e.setTimeout(h))}}var s=0;return he.Deferred(function(e){n[0][3].add(r(0,e,he.isFunction(o)?o:a,e.notifyWith)),n[1][3].add(r(0,e,he.isFunction(t)?t:a)),n[2][3].add(r(0,e,he.isFunction(i)?i:l))}).promise()},promise:function(e){return null!=e?he.extend(e,o):o}},r={};return he.each(n,function(e,t){var s=t[2],a=t[5];o[t[1]]=s.add,a&&s.add(function(){i=a},n[3-e][2].disable,n[0][2].lock),s.add(t[3].fire),r[t[0]]=function(){return r[t[0]+"With"](this===r?undefined:this,arguments),this},r[t[0]+"With"]=s.fireWith}),o.promise(r),t&&t.call(r,r),r},when:function(e){var t=arguments.length,n=t,i=Array(n),o=te.call(arguments),r=he.Deferred(),s=function(e){return function(n){i[e]=this,o[e]=arguments.length>1?te.call(arguments):n,--t||r.resolveWith(i,o)}};if(t<=1&&(d(e,r.done(s(n)).resolve,r.reject),"pending"===r.state()||he.isFunction(o[n]&&o[n].then)))return r.then();for(;n--;)d(o[n],s(n),r.reject);return r.promise()}});var Ae=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;he.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&Ae.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)};var Ie=he.Deferred();he.fn.ready=function(e){return Ie.then(e),this},he.extend({isReady:!1,readyWait:1,holdReady:function(e){e?he.readyWait++:he.ready(!0)},ready:function(e){(!0===e?--he.readyWait:he.isReady)||(he.isReady=!0,!0!==e&&--he.readyWait>0||Ie.resolveWith(Z,[he]))}}),he.ready.then=Ie.then,"complete"===Z.readyState||"loading"!==Z.readyState&&!Z.documentElement.doScroll?e.setTimeout(he.ready):(Z.addEventListener("DOMContentLoaded",c),e.addEventListener("load",c));var Oe=function(e,t,n,i,o,r,s){var a=0,l=e.length,d=null==n;if("object"===he.type(n)){o=!0;for(a in n)Oe(e,t,a,n[a],!0,r,s)}else if(i!==undefined&&(o=!0,he.isFunction(i)||(s=!0),d&&(s?(t.call(e,i),t=null):(d=t,t=function(e,t,n){return d.call(he(e),n)})),t))for(;a<l;a++)t(e[a],n,s?i:i.call(e[a],a,t(e[a],n)));return o?e:d?t.call(e):l?t(e[0],n):r},Le=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};u.uid=1,u.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Le(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,o=this.cache(e);if("string"==typeof t)o[he.camelCase(t)]=n;else for(i in t)o[he.camelCase(i)]=t[i];return o},get:function(e,t){return t===undefined?this.cache(e):e[this.expando]&&e[this.expando][he.camelCase(t)]},access:function(e,t,n){return t===undefined||t&&"string"==typeof t&&n===undefined?this.get(e,t):(this.set(e,t,n),n!==undefined?n:t)},remove:function(e,t){var n,i=e[this.expando];if(i!==undefined){if(t!==undefined){he.isArray(t)?t=t.map(he.camelCase):(t=he.camelCase(t),t=t in i?[t]:t.match(ke)||[]),n=t.length;for(;n--;)delete i[t[n]]}(t===undefined||he.isEmptyObject(i))&&(e.nodeType?e[this.expando]=undefined:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return t!==undefined&&!he.isEmptyObject(t)}};var De=new u,Me=new u,Pe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ne=/[A-Z]/g;he.extend({hasData:function(e){return Me.hasData(e)||De.hasData(e)},data:function(e,t,n){return Me.access(e,t,n)},removeData:function(e,t){Me.remove(e,t)},_data:function(e,t,n){return De.access(e,t,n)},_removeData:function(e,t){De.remove(e,t)}}),he.fn.extend({data:function(e,t){var n,i,o,r=this[0],s=r&&r.attributes;if(e===undefined){if(this.length&&(o=Me.get(r),1===r.nodeType&&!De.get(r,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=he.camelCase(i.slice(5)),h(r,i,o[i])));De.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){Me.set(this,e)}):Oe(this,function(t){var n;if(r&&t===undefined){if((n=Me.get(r,e))!==undefined)return n;if((n=h(r,e))!==undefined)return n}else this.each(function(){Me.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Me.remove(this,e)})}}),he.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=De.get(e,t),n&&(!i||he.isArray(n)?i=De.access(e,t,he.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=he.queue(e,t),i=n.length,o=n.shift(),r=he._queueHooks(e,t),s=function(){he.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,s,r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return De.get(e,n)||De.access(e,n,{empty:he.Callbacks("once memory").add(function(){De.remove(e,[t+"queue",n])})})}}),he.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?he.queue(this[0],e):t===undefined?this:this.each(function(){var n=he.queue(this,e,t);he._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&he.dequeue(this,e)})},dequeue:function(e){return this.each(function(){he.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=he.Deferred(),r=this,s=this.length,a=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=undefined),e=e||"fx";s--;)(n=De.get(r[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),o.promise(t)}});var je=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Be=new RegExp("^(?:([+-])=|)("+je+")([a-z%]*)$","i"),Re=["Top","Right","Bottom","Left"],Ue=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&he.contains(e.ownerDocument,e)&&"none"===he.css(e,"display")},He=function(e,t,n,i){var o,r,s={};for(r in t)s[r]=e.style[r],e.style[r]=t[r];o=n.apply(e,i||[]);for(r in t)e.style[r]=s[r];return o},qe={};he.fn.extend({show:function(){return m(this,!0)},hide:function(){return m(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ue(this)?he(this).show():he(this).hide()})}});var Fe=/^(?:checkbox|radio)$/i,$e=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,We=/^$|\/(?:java|ecma)script/i,Ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ge.optgroup=Ge.option,Ge.tbody=Ge.tfoot=Ge.colgroup=Ge.caption=Ge.thead,Ge.th=Ge.td;var Ve=/<|&#?\w+;/;!function(){var e=Z.createDocumentFragment(),t=e.appendChild(Z.createElement("div")),n=Z.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),ce.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ce.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Qe=Z.documentElement,ze=/^key/,Je=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ke=/^([^.]*)(?:\.(.+)|)/;he.event={global:{},add:function(e,t,n,i,o){var r,s,a,l,d,c,u,h,p,f,m,_=De.get(e);if(_)for(n.handler&&(r=n,n=r.handler,o=r.selector),o&&he.find.matchesSelector(Qe,o),n.guid||(n.guid=he.guid++),(l=_.events)||(l=_.events={}),(s=_.handle)||(s=_.handle=function(t){return void 0!==he&&he.event.triggered!==t.type?he.event.dispatch.apply(e,arguments):undefined}),t=(t||"").match(ke)||[""],d=t.length;d--;)a=Ke.exec(t[d])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p&&(u=he.event.special[p]||{},p=(o?u.delegateType:u.bindType)||p,u=he.event.special[p]||{},c=he.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&he.expr.match.needsContext.test(o),namespace:f.join(".")},r),(h=l[p])||(h=l[p]=[],h.delegateCount=0,u.setup&&!1!==u.setup.call(e,i,f,s)||e.addEventListener&&e.addEventListener(p,s)),u.add&&(u.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,c):h.push(c),he.event.global[p]=!0)},remove:function(e,t,n,i,o){var r,s,a,l,d,c,u,h,p,f,m,_=De.hasData(e)&&De.get(e);if(_&&(l=_.events)){for(t=(t||"").match(ke)||[""],d=t.length;d--;)if(a=Ke.exec(t[d])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(u=he.event.special[p]||{},p=(i?u.delegateType:u.bindType)||p,h=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=h.length;r--;)c=h[r],!o&&m!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(h.splice(r,1),c.selector&&h.delegateCount--,u.remove&&u.remove.call(e,c));s&&!h.length&&(u.teardown&&!1!==u.teardown.call(e,f,_.handle)||he.removeEvent(e,p,_.handle),delete l[p])}else for(p in l)he.event.remove(e,p+t[d],n,i,!0);he.isEmptyObject(l)&&De.remove(e,"handle events")}},dispatch:function(e){var t,n,i,o,r,s,a=he.event.fix(e),l=new Array(arguments.length),d=(De.get(this,"events")||{})[a.type]||[],c=he.event.special[a.type]||{};for(l[0]=a,t=1;t<arguments.length;t++)l[t]=arguments[t];if(a.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,a)){for(s=he.event.handlers.call(this,a,d),t=0;(o=s[t++])&&!a.isPropagationStopped();)for(a.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(r.namespace)||(a.handleObj=r,a.data=r.data,(i=((he.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,l))!==undefined&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,a),a.result}},handlers:function(e,t){var n,i,o,r,s=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(i=[],n=0;n<a;n++)r=t[n],o=r.selector+" ",i[o]===undefined&&(i[o]=r.needsContext?he(o,this).index(l)>-1:he.find(o,this,null,[l]).length),i[o]&&i.push(r);i.length&&s.push({elem:l,handlers:i})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},addProp:function(e,t){Object.defineProperty(he.Event.prototype,e,{enumerable:!0,configurable:!0,get:he.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[he.expando]?e:new he.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==w()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===w()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&he.nodeName(this,"input"))return this.click(),!1},_default:function(e){return he.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},he.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},he.Event=function(e,t){if(!(this instanceof he.Event))return new he.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&!1===e.returnValue?b:y,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&he.extend(this,t),this.timeStamp=e&&e.timeStamp||he.now(),this[he.expando]=!0},he.Event.prototype={constructor:he.Event,isDefaultPrevented:y,isPropagationStopped:y,isImmediatePropagationStopped:y,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=b,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=b,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=b,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},he.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&ze.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&t!==undefined&&Je.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},he.event.addProp),he.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){he.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,r=e.handleObj;return o&&(o===i||he.contains(i,o))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),he.fn.extend({on:function(e,t,n,i){return E(this,e,t,n,i)},one:function(e,t,n,i){return E(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,he(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=undefined),!1===n&&(n=y),this.each(function(){he.event.remove(this,e,n,t)})}});var Xe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ye=/<script|<style|<link/i,Ze=/checked\s*(?:[^=]|=\s*.checked.)/i,et=/^true\/(.*)/,tt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;he.extend({htmlPrefilter:function(e){return e.replace(Xe,"<$1></$2>")},clone:function(e,t,n){var i,o,r,s,a=e.cloneNode(!0),l=he.contains(e.ownerDocument,e);if(!(ce.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||he.isXMLDoc(e)))for(s=_(a),r=_(e),i=0,o=r.length;i<o;i++)k(r[i],s[i]);if(t)if(n)for(r=r||_(e),s=s||_(a),i=0,o=r.length;i<o;i++)x(r[i],s[i]);else x(e,a);return s=_(a,"script"),s.length>0&&g(s,!l&&_(e,"script")),a},cleanData:function(e){for(var t,n,i,o=he.event.special,r=0;(n=e[r])!==undefined;r++)if(Le(n)){if(t=n[De.expando]){if(t.events)for(i in t.events)o[i]?he.event.remove(n,i):he.removeEvent(n,i,t.handle);n[De.expando]=undefined}n[Me.expando]&&(n[Me.expando]=undefined)}}}),he.fn.extend({detach:function(e){return I(this,e,!0)},remove:function(e){return I(this,e)},text:function(e){return Oe(this,function(e){return e===undefined?he.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return A(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){T(this,e).appendChild(e)}})},prepend:function(){return A(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=T(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return A(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return A(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(he.cleanData(_(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return he.clone(this,e,t)})},html:function(e){return Oe(this,function(e){var t=this[0]||{},n=0,i=this.length;if(e===undefined&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ye.test(e)&&!Ge[($e.exec(e)||["",""])[1].toLowerCase()]){e=he.htmlPrefilter(e);try{for(;n<i;n++)t=this[n]||{},1===t.nodeType&&(he.cleanData(_(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return A(this,arguments,function(t){var n=this.parentNode;he.inArray(this,e)<0&&(he.cleanData(_(this)),n&&n.replaceChild(t,this))},e)}}),he.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){he.fn[e]=function(e){for(var n,i=[],o=he(e),r=o.length-1,s=0;s<=r;s++)n=s===r?this:this.clone(!0),he(o[s])[t](n),ie.apply(i,n.get());return this.pushStack(i)}});var nt=/^margin/,it=new RegExp("^("+je+")(?!px)[a-z%]+$","i"),ot=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)};!function(){function t(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Qe.appendChild(s);var t=e.getComputedStyle(a);n="1%"!==t.top,r="2px"===t.marginLeft,i="4px"===t.width,a.style.marginRight="50%",o="4px"===t.marginRight,Qe.removeChild(s),a=null}}var n,i,o,r,s=Z.createElement("div"),a=Z.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",ce.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(a),he.extend(ce,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return t(),i},pixelMarginRight:function(){return t(),o},reliableMarginLeft:function(){return t(),r}}))}();var rt=/^(none|table(?!-c[ea]).+)/,st={position:"absolute",visibility:"hidden",display:"block"},at={letterSpacing:"0",fontWeight:"400"},lt=["Webkit","Moz","ms"],dt=Z.createElement("div").style;he.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=O(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,s,a=he.camelCase(t),l=e.style;if(t=he.cssProps[a]||(he.cssProps[a]=D(a)||a),s=he.cssHooks[t]||he.cssHooks[a],n===undefined)return s&&"get"in s&&(o=s.get(e,!1,i))!==undefined?o:l[t];r=typeof n,"string"===r&&(o=Be.exec(n))&&o[1]&&(n=p(e,t,o),r="number"),null!=n&&n===n&&("number"===r&&(n+=o&&o[3]||(he.cssNumber[a]?"":"px")),ce.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&(n=s.set(e,n,i))===undefined||(l[t]=n))}},css:function(e,t,n,i){var o,r,s,a=he.camelCase(t);return t=he.cssProps[a]||(he.cssProps[a]=D(a)||a),s=he.cssHooks[t]||he.cssHooks[a],s&&"get"in s&&(o=s.get(e,!0,n)),o===undefined&&(o=O(e,t,i)),"normal"===o&&t in at&&(o=at[t]),""===n||n?(r=parseFloat(o),!0===n||isFinite(r)?r||0:o):o}}),he.each(["height","width"],function(e,t){he.cssHooks[t]={get:function(e,n,i){if(n)return!rt.test(he.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?N(e,t,i):He(e,st,function(){return N(e,t,i)})},set:function(e,n,i){var o,r=i&&ot(e),s=i&&P(e,t,i,"border-box"===he.css(e,"boxSizing",!1,r),r);return s&&(o=Be.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=he.css(e,t)),M(e,n,s)}}}),he.cssHooks.marginLeft=L(ce.reliableMarginLeft,function(e,t){if(t)return(parseFloat(O(e,"marginLeft"))||e.getBoundingClientRect().left-He(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),he.each({margin:"",padding:"",border:"Width"},function(e,t){he.cssHooks[e+t]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];i<4;i++)o[e+Re[i]+t]=r[i]||r[i-2]||r[0];return o}},nt.test(e)||(he.cssHooks[e+t].set=M)}),he.fn.extend({css:function(e,t){return Oe(this,function(e,t,n){var i,o,r={},s=0;if(he.isArray(t)){for(i=ot(e),o=t.length;s<o;s++)r[t[s]]=he.css(e,t[s],!1,i);return r}return n!==undefined?he.style(e,t,n):he.css(e,t)},e,t,arguments.length>1)}}),he.Tween=j,j.prototype={constructor:j,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||he.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(he.cssNumber[n]?"":"px")},cur:function(){var e=j.propHooks[this.prop];return e&&e.get?e.get(this):j.propHooks._default.get(this)},run:function(e){var t,n=j.propHooks[this.prop];return this.options.duration?this.pos=t=he.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):j.propHooks._default.set(this),this}},j.prototype.init.prototype=j.prototype,j.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=he.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){he.fx.step[e.prop]?he.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[he.cssProps[e.prop]]&&!he.cssHooks[e.prop]?e.elem[e.prop]=e.now:he.style(e.elem,e.prop,e.now+e.unit)}}},j.propHooks.scrollTop=j.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},he.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},he.fx=j.prototype.init,he.fx.step={};var ct,ut,ht=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;he.Animation=he.extend($,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return p(n.elem,e,Be.exec(t),n),n}]},tweener:function(e,t){he.isFunction(e)?(t=e,e=["*"]):e=e.match(ke);for(var n,i=0,o=e.length;i<o;i++)n=e[i],$.tweeners[n]=$.tweeners[n]||[],$.tweeners[n].unshift(t)},prefilters:[q],prefilter:function(e,t){t?$.prefilters.unshift(e):$.prefilters.push(e)}}),he.speed=function(e,t,n){var i=e&&"object"==typeof e?he.extend({},e):{complete:n||!n&&t||he.isFunction(e)&&e,duration:e,easing:n&&t||t&&!he.isFunction(t)&&t};return he.fx.off||Z.hidden?i.duration=0:i.duration="number"==typeof i.duration?i.duration:i.duration in he.fx.speeds?he.fx.speeds[i.duration]:he.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){he.isFunction(i.old)&&i.old.call(this),i.queue&&he.dequeue(this,i.queue)},i},he.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Ue).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=he.isEmptyObject(e),r=he.speed(t,n,i),s=function(){var t=$(this,he.extend({},e),r);(o||De.get(this,"finish"))&&t.stop(!0)};return s.finish=s,o||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=undefined),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",r=he.timers,s=De.get(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&pt.test(o)&&i(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(n),t=!1,r.splice(o,1));!t&&n||he.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=De.get(this),i=n[e+"queue"],o=n[e+"queueHooks"],r=he.timers,s=i?i.length:0;for(n.finish=!0,he.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),he.each(["toggle","show","hide"],function(e,t){var n=he.fn[t];he.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(U(t,!0),e,i,o)}}),he.each({slideDown:U("show"),slideUp:U("hide"),slideToggle:U("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){he.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),he.timers=[],he.fx.tick=function(){var e,t=0,n=he.timers;for(ct=he.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||he.fx.stop(),ct=undefined},he.fx.timer=function(e){he.timers.push(e),e()?he.fx.start():he.timers.pop()},he.fx.interval=13,he.fx.start=function(){ut||(ut=e.requestAnimationFrame?e.requestAnimationFrame(B):e.setInterval(he.fx.tick,he.fx.interval))},he.fx.stop=function(){e.cancelAnimationFrame?e.cancelAnimationFrame(ut):e.clearInterval(ut),ut=null},he.fx.speeds={slow:600,fast:200,_default:400},he.fn.delay=function(t,n){return t=he.fx?he.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,i){var o=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(o)}})},function(){var e=Z.createElement("input"),t=Z.createElement("select"),n=t.appendChild(Z.createElement("option"));e.type="checkbox",ce.checkOn=""!==e.value,ce.optSelected=n.selected,e=Z.createElement("input"),e.value="t",e.type="radio",ce.radioValue="t"===e.value}();var ft,mt=he.expr.attrHandle;he.fn.extend({attr:function(e,t){return Oe(this,he.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){he.removeAttr(this,e)})}}),he.extend({attr:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return"undefined"==typeof e.getAttribute?he.prop(e,t,n):(1===r&&he.isXMLDoc(e)||(o=he.attrHooks[t.toLowerCase()]||(he.expr.match.bool.test(t)?ft:undefined)),n!==undefined?null===n?void he.removeAttr(e,t):o&&"set"in o&&(i=o.set(e,n,t))!==undefined?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:(i=he.find.attr(e,t),null==i?undefined:i))},attrHooks:{type:{set:function(e,t){if(!ce.radioValue&&"radio"===t&&he.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,o=t&&t.match(ke);if(o&&1===e.nodeType)for(;n=o[i++];)e.removeAttribute(n)}}),ft={set:function(e,t,n){return!1===t?he.removeAttr(e,n):e.setAttribute(n,n),n}},he.each(he.expr.match.bool.source.match(/\w+/g),function(e,t){var n=mt[t]||he.find.attr;mt[t]=function(e,t,i){var o,r,s=t.toLowerCase();return i||(r=mt[s],mt[s]=o,o=null!=n(e,t,i)?s:null,mt[s]=r),o}});var _t=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;he.fn.extend({prop:function(e,t){return Oe(this,he.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[he.propFix[e]||e]})}}),he.extend({prop:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&he.isXMLDoc(e)||(t=he.propFix[t]||t,o=he.propHooks[t]),n!==undefined?o&&"set"in o&&(i=o.set(e,n,t))!==undefined?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=he.find.attr(e,"tabindex");return t?parseInt(t,10):_t.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ce.optSelected||(he.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),he.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){he.propFix[this.toLowerCase()]=this});var vt=/[\t\r\n\f]/g;he.fn.extend({addClass:function(e){var t,n,i,o,r,s,a,l=0;if(he.isFunction(e))return this.each(function(t){he(this).addClass(e.call(this,t,W(this)))});if("string"==typeof e&&e)for(t=e.match(ke)||[];n=this[l++];)if(o=W(n),i=1===n.nodeType&&(" "+o+" ").replace(vt," ")){for(s=0;r=t[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=he.trim(i),o!==a&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,i,o,r,s,a,l=0;if(he.isFunction(e))return this.each(function(t){he(this).removeClass(e.call(this,t,W(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(ke)||[];n=this[l++];)if(o=W(n),i=1===n.nodeType&&(" "+o+" ").replace(vt," ")){for(s=0;r=t[s++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");a=he.trim(i),o!==a&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):he.isFunction(e)?this.each(function(n){he(this).toggleClass(e.call(this,n,W(this),t),t)}):this.each(function(){var t,i,o,r;if("string"===n)for(i=0,o=he(this),r=e.match(ke)||[];t=r[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else e!==undefined&&"boolean"!==n||(t=W(this),t&&De.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":De.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+W(n)+" ").replace(vt," ").indexOf(t)>-1)return!0;return!1}});var bt=/\r/g,yt=/[\x20\t\r\n\f]+/g;he.fn.extend({val:function(e){var t,n,i,o=this[0];{if(arguments.length)return i=he.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=i?e.call(this,n,he(this).val()):e,null==o?o="":"number"==typeof o?o+="":he.isArray(o)&&(o=he.map(o,function(e){return null==e?"":e+""})),(t=he.valHooks[this.type]||he.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&t.set(this,o,"value")!==undefined||(this.value=o))});if(o)return(t=he.valHooks[o.type]||he.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&(n=t.get(o,"value"))!==undefined?n:(n=o.value,"string"==typeof n?n.replace(bt,""):null==n?"":n)}}}),he.extend({valHooks:{option:{get:function(e){var t=he.find.attr(e,"value");return null!=t?t:he.trim(he.text(e)).replace(yt," ")}},select:{get:function(e){for(var t,n,i=e.options,o=e.selectedIndex,r="select-one"===e.type,s=r?null:[],a=r?o+1:i.length,l=o<0?a:r?o:0;l<a;l++)if(n=i[l],(n.selected||l===o)&&!n.disabled&&(!n.parentNode.disabled||!he.nodeName(n.parentNode,"optgroup"))){if(t=he(n).val(),r)return t;s.push(t)}return s},set:function(e,t){for(var n,i,o=e.options,r=he.makeArray(t),s=o.length;s--;)i=o[s],(i.selected=he.inArray(he.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(e.selectedIndex=-1),r}}}}),he.each(["radio","checkbox"],function(){he.valHooks[this]={set:function(e,t){if(he.isArray(t))return e.checked=he.inArray(he(e).val(),t)>-1}},ce.checkOn||(he.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var wt=/^(?:focusinfocus|focusoutblur)$/;he.extend(he.event,{trigger:function(t,n,i,o){var r,s,a,l,d,c,u,h=[i||Z],p=ae.call(t,"type")?t.type:t,f=ae.call(t,"namespace")?t.namespace.split("."):[];if(s=a=i=i||Z,3!==i.nodeType&&8!==i.nodeType&&!wt.test(p+he.event.triggered)&&(p.indexOf(".")>-1&&(f=p.split("."),p=f.shift(),f.sort()),d=p.indexOf(":")<0&&"on"+p,t=t[he.expando]?t:new he.Event(p,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=i),n=null==n?[t]:he.makeArray(n,[t]),u=he.event.special[p]||{},o||!u.trigger||!1!==u.trigger.apply(i,n))){if(!o&&!u.noBubble&&!he.isWindow(i)){for(l=u.delegateType||p,wt.test(l+p)||(s=s.parentNode);s;s=s.parentNode)h.push(s),a=s;a===(i.ownerDocument||Z)&&h.push(a.defaultView||a.parentWindow||e)}for(r=0;(s=h[r++])&&!t.isPropagationStopped();)t.type=r>1?l:u.bindType||p,c=(De.get(s,"events")||{})[t.type]&&De.get(s,"handle"),c&&c.apply(s,n),(c=d&&s[d])&&c.apply&&Le(s)&&(t.result=c.apply(s,n),!1===t.result&&t.preventDefault());return t.type=p,o||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(h.pop(),n)||!Le(i)||d&&he.isFunction(i[p])&&!he.isWindow(i)&&(a=i[d],a&&(i[d]=null),he.event.triggered=p,i[p](),he.event.triggered=undefined,a&&(i[d]=a)),t.result}},simulate:function(e,t,n){var i=he.extend(new he.Event,n,{type:e,isSimulated:!0});he.event.trigger(i,null,t)}}),he.fn.extend({trigger:function(e,t){return this.each(function(){he.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return he.event.trigger(e,t,n,!0)}}),he.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){he.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),he.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ce.focusin="onfocusin"in e,ce.focusin||he.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){he.event.simulate(t,e.target,he.event.fix(e))};he.event.special[t]={setup:function(){var i=this.ownerDocument||this,o=De.access(i,t);o||i.addEventListener(e,n,!0),De.access(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=De.access(i,t)-1;o?De.access(i,t,o):(i.removeEventListener(e,n,!0),De.remove(i,t))}}});var Et=e.location,Tt=he.now(),St=/\?/;he.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=undefined}return n&&!n.getElementsByTagName("parsererror").length||he.error("Invalid XML: "+t),n};var Ct=/\[\]$/,xt=/\r?\n/g,kt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;he.param=function(e,t){var n,i=[],o=function(e,t){var n=he.isFunction(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(he.isArray(e)||e.jquery&&!he.isPlainObject(e))he.each(e,function(){o(this.name,this.value)});else for(n in e)G(n,e[n],t,o);return i.join("&")},he.fn.extend({serialize:function(){return he.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=he.prop(this,"elements");return e?he.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!he(this).is(":disabled")&&At.test(this.nodeName)&&!kt.test(e)&&(this.checked||!Fe.test(e))}).map(function(e,t){var n=he(this).val();return null==n?null:he.isArray(n)?he.map(n,function(e){return{name:t.name,value:e.replace(xt,"\r\n")}}):{name:t.name,value:n.replace(xt,"\r\n")}}).get()}});var It=/%20/g,Ot=/#.*$/,Lt=/([?&])_=[^&]*/,Dt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Mt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Pt=/^(?:GET|HEAD)$/,Nt=/^\/\//,jt={},Bt={},Rt="*/".concat("*"),Ut=Z.createElement("a");Ut.href=Et.href,he.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:Mt.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":he.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?z(z(e,he.ajaxSettings),t):z(he.ajaxSettings,e)},ajaxPrefilter:V(jt),ajaxTransport:V(Bt),ajax:function(t,n){function i(t,n,i,a){var d,h,p,y,w,E=n;c||(c=!0,l&&e.clearTimeout(l),o=undefined,s=a||"",T.readyState=t>0?4:0,d=t>=200&&t<300||304===t,i&&(y=J(f,T,i)),y=K(f,y,T,d),d?(f.ifModified&&(w=T.getResponseHeader("Last-Modified"),w&&(he.lastModified[r]=w),(w=T.getResponseHeader("etag"))&&(he.etag[r]=w)),204===t||"HEAD"===f.type?E="nocontent":304===t?E="notmodified":(E=y.state,h=y.data,p=y.error,d=!p)):(p=E,!t&&E||(E="error",t<0&&(t=0))),T.status=t,T.statusText=(n||E)+"",d?g.resolveWith(m,[h,E,T]):g.rejectWith(m,[T,E,p]),T.statusCode(b),b=undefined,u&&_.trigger(d?"ajaxSuccess":"ajaxError",[T,f,d?h:p]),v.fireWith(m,[T,E]),u&&(_.trigger("ajaxComplete",[T,f]),--he.active||he.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=undefined),n=n||{};var o,r,s,a,l,d,c,u,h,p,f=he.ajaxSetup({},n),m=f.context||f,_=f.context&&(m.nodeType||m.jquery)?he(m):he.event,g=he.Deferred(),v=he.Callbacks("once memory"),b=f.statusCode||{},y={},w={},E="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(c){if(!a)for(a={};t=Dt.exec(s);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?s:null},setRequestHeader:function(e,t){return null==c&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,y[e]=t),this},overrideMimeType:function(e){return null==c&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)T.always(e[T.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||E;return o&&o.abort(t),i(0,t),this}};if(g.promise(T),f.url=((t||f.url||Et.href)+"").replace(Nt,Et.protocol+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(ke)||[""],null==f.crossDomain){d=Z.createElement("a");try{d.href=f.url,d.href=d.href,f.crossDomain=Ut.protocol+"//"+Ut.host!=d.protocol+"//"+d.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=he.param(f.data,f.traditional)),Q(jt,f,n,T),c)return T;u=he.event&&f.global,u&&0==he.active++&&he.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Pt.test(f.type),r=f.url.replace(Ot,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(It,"+")):(p=f.url.slice(r.length),f.data&&(r+=(St.test(r)?"&":"?")+f.data,delete f.data),!1===f.cache&&(r=r.replace(Lt,""),p=(St.test(r)?"&":"?")+"_="+Tt+++p),f.url=r+p),f.ifModified&&(he.lastModified[r]&&T.setRequestHeader("If-Modified-Since",he.lastModified[r]),he.etag[r]&&T.setRequestHeader("If-None-Match",he.etag[r])),(f.data&&f.hasContent&&!1!==f.contentType||n.contentType)&&T.setRequestHeader("Content-Type",f.contentType),T.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Rt+"; q=0.01":""):f.accepts["*"]);for(h in f.headers)T.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(m,T,f)||c))return T.abort();if(E="abort",v.add(f.complete),T.done(f.success),T.fail(f.error),o=Q(Bt,f,n,T)){if(T.readyState=1,u&&_.trigger("ajaxSend",[T,f]),c)return T;f.async&&f.timeout>0&&(l=e.setTimeout(function(){T.abort("timeout")},f.timeout));try{c=!1,o.send(y,i)}catch(e){if(c)throw e;i(-1,e)}}else i(-1,"No Transport");return T},getJSON:function(e,t,n){return he.get(e,t,n,"json")},getScript:function(e,t){return he.get(e,undefined,t,"script")}}),he.each(["get","post"],function(e,t){he[t]=function(e,n,i,o){return he.isFunction(n)&&(o=o||i,i=n,n=undefined),he.ajax(he.extend({url:e,type:t,dataType:o,data:n,success:i},he.isPlainObject(e)&&e))}}),he._evalUrl=function(e){return he.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},he.fn.extend({wrapAll:function(e){var t;return this[0]&&(he.isFunction(e)&&(e=e.call(this[0])),t=he(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return he.isFunction(e)?this.each(function(t){he(this).wrapInner(e.call(this,t))}):this.each(function(){var t=he(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=he.isFunction(e);return this.each(function(n){he(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){he(this).replaceWith(this.childNodes)}),this}}),he.expr.pseudos.hidden=function(e){return!he.expr.pseudos.visible(e)},he.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},he.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Ht={0:200,1223:204},qt=he.ajaxSettings.xhr();ce.cors=!!qt&&"withCredentials"in qt,ce.ajax=qt=!!qt,he.ajaxTransport(function(t){var n,i;if(ce.cors||qt&&!t.crossDomain)return{send:function(o,r){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");for(s in o)a.setRequestHeader(s,o[s]);n=function(e){return function(){n&&(n=i=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(Ht[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),i=a.onerror=n("error"),a.onabort!==undefined?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{a.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),he.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),he.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return he.globalEval(e),e}}}),he.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),he.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,o){t=he("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),Z.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Ft=[],$t=/(=)\?(?=&|$)|\?\?/;he.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ft.pop()||he.expando+"_"+Tt++;return this[e]=!0,e}}),he.ajaxPrefilter("json jsonp",function(t,n,i){var o,r,s,a=!1!==t.jsonp&&($t.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&$t.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=he.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace($t,"$1"+o):!1!==t.jsonp&&(t.url+=(St.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return s||he.error(o+" was not called"),s[0]},t.dataTypes[0]="json",r=e[o],e[o]=function(){s=arguments},i.always(function(){r===undefined?he(e).removeProp(o):e[o]=r,t[o]&&(t.jsonpCallback=n.jsonpCallback,Ft.push(o)),s&&he.isFunction(r)&&r(s[0]),s=r=undefined}),"script"}),ce.createHTMLDocument=function(){var e=Z.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),he.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var i,o,r;return t||(ce.createHTMLDocument?(t=Z.implementation.createHTMLDocument(""),i=t.createElement("base"),i.href=Z.location.href,t.head.appendChild(i)):t=Z),o=we.exec(e),r=!n&&[],o?[t.createElement(o[1])]:(o=v([e],t,r),r&&r.length&&he(r).remove(),he.merge([],o.childNodes))},he.fn.load=function(e,t,n){var i,o,r,s=this,a=e.indexOf(" ");return a>-1&&(i=he.trim(e.slice(a)),e=e.slice(0,a)),he.isFunction(t)?(n=t,t=undefined):t&&"object"==typeof t&&(o="POST"),s.length>0&&he.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){r=arguments,s.html(i?he("<div>").append(he.parseHTML(e)).find(i):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,r||[e.responseText,t,e])})}),this},he.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){he.fn[t]=function(e){return this.on(t,e)}}),he.expr.pseudos.animated=function(e){return he.grep(he.timers,function(t){return e===t.elem}).length},he.offset={setOffset:function(e,t,n){var i,o,r,s,a,l,d,c=he.css(e,"position"),u=he(e),h={};"static"===c&&(e.style.position="relative"),a=u.offset(),r=he.css(e,"top"),l=he.css(e,"left"),d=("absolute"===c||"fixed"===c)&&(r+l).indexOf("auto")>-1,d?(i=u.position(),s=i.top,o=i.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),he.isFunction(t)&&(t=t.call(e,n,he.extend({},a))),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+o),"using"in t?t.using.call(e,h):u.css(h)}},he.fn.extend({offset:function(e){if(arguments.length)return e===undefined?this:this.each(function(t){he.offset.setOffset(this,e,t)});var t,n,i,o,r=this[0];if(r)return r.getClientRects().length?(i=r.getBoundingClientRect(),i.width||i.height?(o=r.ownerDocument,n=X(o),t=o.documentElement,{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i):{top:0,left:0}},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===he.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),he.nodeName(e[0],"html")||(i=e.offset()),i={top:i.top+he.css(e[0],"borderTopWidth",!0),left:i.left+he.css(e[0],"borderLeftWidth",!0)}),{top:t.top-i.top-he.css(n,"marginTop",!0),left:t.left-i.left-he.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===he.css(e,"position");)e=e.offsetParent;return e||Qe})}}),he.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;he.fn[e]=function(i){return Oe(this,function(e,i,o){var r=X(e);if(o===undefined)return r?r[t]:e[i];r?r.scrollTo(n?r.pageXOffset:o,n?o:r.pageYOffset):e[i]=o},e,i,arguments.length)}}),he.each(["top","left"],function(e,t){he.cssHooks[t]=L(ce.pixelPosition,function(e,n){if(n)return n=O(e,t),it.test(n)?he(e).position()[t]+"px":n})}),he.each({Height:"height",Width:"width"},function(e,t){he.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){he.fn[i]=function(o,r){var s=arguments.length&&(n||"boolean"!=typeof o),a=n||(!0===o||!0===r?"margin":"border");return Oe(this,function(t,n,o){var r;return he.isWindow(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):o===undefined?he.css(t,n,a):he.style(t,n,o,a)},t,s?o:undefined,s)}})}),he.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),he.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return he});var Wt=e.jQuery,Gt=e.$;return he.noConflict=function(t){return e.$===he&&(e.$=Gt),t&&e.jQuery===he&&(e.jQuery=Wt),he},t||(e.jQuery=e.$=he),he})},"./third_party/resumable.js":function(e,t){!function(){"use strict";var t=function(e){function n(e,t,n,i){var r;return e.isFile?e.file(function(e){e.relativePath=t+e.name,n.push(e),i()}):(e.isDirectory?r=e:e instanceof File&&n.push(e),"function"==typeof e.webkitGetAsEntry&&(r=e.webkitGetAsEntry()),r&&r.isDirectory?o(r,t+r.name+"/",n,i):("function"==typeof e.getAsFile&&(e=e.getAsFile())instanceof File&&(e.relativePath=t+e.name,n.push(e)),void i()))}function i(e,t){if(!e||0===e.length)return t();e[0](function(){i(e.slice(1),t)})}function o(e,t,o,r){function s(){a.readEntries(function(e){if(e.length)return l=l.concat(e),s();i(l.map(function(e){return n.bind(null,e,t,o)}),r)})}var a=e.createReader(),l=[];s()}function r(e,t){if(e.length){l.fire("beforeAdd");var o=[];i(Array.prototype.map.call(e,function(e){var t=e;return"function"==typeof e.webkitGetAsEntry&&(t=e.webkitGetAsEntry()),n.bind(null,t,"",o)}),function(){o.length&&p(o,t)})}}function s(e,t,n){var i=this;i.opts={},i.getOpt=e.getOpt,i._prevProgress=0,i.resumableObj=e,i.file=t,i.fileName=t.fileName||t.name,i.size=t.size,i.relativePath=t.relativePath||t.webkitRelativePath||i.fileName,i.uniqueIdentifier=n,i._pause=!1,i.container="",i.preprocessState=0;var o=n!==undefined,r=function(e,t){switch(e){case"progress":i.resumableObj.fire("fileProgress",i,t);break;case"error":i.abort(),o=!0,i.chunks=[],i.resumableObj.fire("fileError",i,t);break;case"success":if(o)return;i.resumableObj.fire("fileProgress",i,t),i.isComplete()&&i.resumableObj.fire("fileSuccess",i,t);break;case"retry":i.resumableObj.fire("fileRetry",i)}};return i.chunks=[],i.abort=function(){var e=0;d.each(i.chunks,function(t){"uploading"==t.status()&&(t.abort(),e++)}),e>0&&i.resumableObj.fire("fileProgress",i)},i.cancel=function(){var e=i.chunks;i.chunks=[],d.each(e,function(e){"uploading"==e.status()&&(e.abort(),i.resumableObj.uploadNextChunk())}),i.resumableObj.removeFile(i),i.resumableObj.fire("fileProgress",i)},i.retry=function(){i.bootstrap();var e=!1;i.resumableObj.on("chunkingComplete",function(){e||i.resumableObj.upload(),e=!0})},i.bootstrap=function(){i.abort(),o=!1,i.chunks=[],i._prevProgress=0;for(var e=i.getOpt("forceChunkSize")?Math.ceil:Math.floor,t=Math.max(e(i.file.size/i.getOpt("chunkSize")),1),n=0;n<t;n++)!function(e){window.setTimeout(function(){i.chunks.push(new a(i.resumableObj,i,e,r)),i.resumableObj.fire("chunkingProgress",i,e/t)},0)}(n);window.setTimeout(function(){i.resumableObj.fire("chunkingComplete",i)},0)},i.progress=function(){if(o)return 1;var e=0,t=!1;return d.each(i.chunks,function(n){"error"==n.status()&&(t=!0),e+=n.progress(!0)}),e=t?1:e>.99999?1:e,e=Math.max(i._prevProgress,e),i._prevProgress=e,e},i.isUploading=function(){var e=!1;return d.each(i.chunks,function(t){if("uploading"==t.status())return e=!0,!1}),e},i.isComplete=function(){var e=!1;return 1!==i.preprocessState&&(d.each(i.chunks,function(t){var n=t.status();if("pending"==n||"uploading"==n||1===t.preprocessState)return e=!0,!1}),!e)},i.pause=function(e){i._pause=void 0===e?!i._pause:e},i.isPaused=function(){return i._pause},i.preprocessFinished=function(){i.preprocessState=2,i.upload()},i.upload=function(){var e=!1;if(!1===i.isPaused()){var t=i.getOpt("preprocessFile");if("function"==typeof t)switch(i.preprocessState){case 0:return i.preprocessState=1,t(i),!0;case 1:return!0}d.each(i.chunks,function(t){if("pending"==t.status()&&1!==t.preprocessState)return t.send(),e=!0,!1})}return e},i.markChunksCompleted=function(e){if(i.chunks&&!(i.chunks.length<=e))for(var t=0;t<e;t++)i.chunks[t].markComplete=!0},i.resumableObj.fire("chunkingStart",i),i.bootstrap(),this}function a(e,t,n,i){var o=this;o.opts={},o.getOpt=e.getOpt,o.resumableObj=e,o.fileObj=t,o.fileObjSize=t.size,o.fileObjType=t.file.type,o.offset=n,o.callback=i,o.lastProgressCallback=new Date,o.tested=!1,o.retries=0,o.pendingRetry=!1,o.preprocessState=0,o.markComplete=!1;var r=o.getOpt("chunkSize");return o.loaded=0,o.startByte=o.offset*r,o.endByte=Math.min(o.fileObjSize,(o.offset+1)*r),o.fileObjSize-o.endByte<r&&!o.getOpt("forceChunkSize")&&(o.endByte=o.fileObjSize),o.xhr=null,o.test=function(){o.xhr=new XMLHttpRequest;var e=function(e){o.tested=!0;var t=o.status();"success"==t?(o.callback(t,o.message()),o.resumableObj.uploadNextChunk()):o.send()};o.xhr.addEventListener("load",e,!1),o.xhr.addEventListener("error",e,!1),o.xhr.addEventListener("timeout",e,!1);var t=[],n=o.getOpt("parameterNamespace"),i=o.getOpt("query");"function"==typeof i&&(i=i(o.fileObj,o)),d.each(i,function(e,i){t.push([encodeURIComponent(n+e),encodeURIComponent(i)].join("="))}),t=t.concat([["chunkNumberParameterName",o.offset+1],["chunkSizeParameterName",o.getOpt("chunkSize")],["currentChunkSizeParameterName",o.endByte-o.startByte],["totalSizeParameterName",o.fileObjSize],["typeParameterName",o.fileObjType],["identifierParameterName",o.fileObj.uniqueIdentifier],["fileNameParameterName",o.fileObj.fileName],["relativePathParameterName",o.fileObj.relativePath],["totalChunksParameterName",o.fileObj.chunks.length]].filter(function(e){return o.getOpt(e[0])}).map(function(e){return[n+o.getOpt(e[0]),encodeURIComponent(e[1])].join("=")})),o.xhr.open(o.getOpt("testMethod"),d.getTarget("test",t)),o.xhr.timeout=o.getOpt("xhrTimeout"),o.xhr.withCredentials=o.getOpt("withCredentials");var r=o.getOpt("headers");"function"==typeof r&&(r=r(o.fileObj,o)),d.each(r,function(e,t){o.xhr.setRequestHeader(e,t)}),o.xhr.send(null)},o.preprocessFinished=function(){o.preprocessState=2,o.send()},o.send=function(){var e=o.getOpt("preprocess");if("function"==typeof e)switch(o.preprocessState){case 0:return o.preprocessState=1,void e(o);case 1:return}if(o.getOpt("testChunks")&&!o.tested)return void o.test();o.xhr=new XMLHttpRequest,o.xhr.upload.addEventListener("progress",function(e){new Date-o.lastProgressCallback>1e3*o.getOpt("throttleProgressCallbacks")&&(o.callback("progress"),o.lastProgressCallback=new Date),o.loaded=e.loaded||0},!1),o.loaded=0,o.pendingRetry=!1,o.callback("progress");var t=function(e){var t=o.status();if("success"==t||"error"==t)o.callback(t,o.message()),o.resumableObj.uploadNextChunk();else{o.callback("retry",o.message()),o.abort(),o.retries++;var n=o.getOpt("chunkRetryInterval");n!==undefined?(o.pendingRetry=!0,setTimeout(o.send,n)):o.send()}};o.xhr.addEventListener("load",t,!1),o.xhr.addEventListener("error",t,!1),o.xhr.addEventListener("timeout",t,!1);var n=[["chunkNumberParameterName",o.offset+1],["chunkSizeParameterName",o.getOpt("chunkSize")],["currentChunkSizeParameterName",o.endByte-o.startByte],["totalSizeParameterName",o.fileObjSize],["typeParameterName",o.fileObjType],["identifierParameterName",o.fileObj.uniqueIdentifier],["fileNameParameterName",o.fileObj.fileName],["relativePathParameterName",o.fileObj.relativePath],["totalChunksParameterName",o.fileObj.chunks.length]].filter(function(e){return o.getOpt(e[0])}).reduce(function(e,t){return e[o.getOpt(t[0])]=t[1],e},{}),i=o.getOpt("query");"function"==typeof i&&(i=i(o.fileObj,o)),d.each(i,function(e,t){n[e]=t});var r=o.fileObj.file.slice?"slice":o.fileObj.file.mozSlice?"mozSlice":o.fileObj.file.webkitSlice?"webkitSlice":"slice",s=o.fileObj.file[r](o.startByte,o.endByte,o.getOpt("setChunkTypeFromFile")?o.fileObj.file.type:""),a=null,l=[],c=o.getOpt("parameterNamespace");if("octet"===o.getOpt("method"))a=s,d.each(n,function(e,t){l.push([encodeURIComponent(c+e),encodeURIComponent(t)].join("="))});else if(a=new FormData,d.each(n,function(e,t){a.append(c+e,t),l.push([encodeURIComponent(c+e),encodeURIComponent(t)].join("="))}),"blob"==o.getOpt("chunkFormat"))a.append(c+o.getOpt("fileParameterName"),s,o.fileObj.fileName);else if("base64"==o.getOpt("chunkFormat")){var u=new FileReader;u.onload=function(e){a.append(c+o.getOpt("fileParameterName"),u.result),o.xhr.send(a)},u.readAsDataURL(s)}var h=d.getTarget("upload",l),p=o.getOpt("uploadMethod");o.xhr.open(p,h),"octet"===o.getOpt("method")&&o.xhr.setRequestHeader("Content-Type","application/octet-stream"),o.xhr.timeout=o.getOpt("xhrTimeout"),o.xhr.withCredentials=o.getOpt("withCredentials");var f=o.getOpt("headers");"function"==typeof f&&(f=f(o.fileObj,o)),d.each(f,function(e,t){o.xhr.setRequestHeader(e,t)}),"blob"==o.getOpt("chunkFormat")&&o.xhr.send(a)},o.abort=function(){o.xhr&&o.xhr.abort(),o.xhr=null},o.status=function(){return o.pendingRetry?"uploading":o.markComplete?"success":o.xhr?o.xhr.readyState<4?"uploading":200==o.xhr.status||201==o.xhr.status?"success":d.contains(o.getOpt("permanentErrors"),o.xhr.status)||o.retries>=o.getOpt("maxChunkRetries")?"error":(o.abort(),"pending"):"pending"},o.message=function(){return o.xhr?o.xhr.responseText:""},o.progress=function(e){void 0===e&&(e=!1);var t=e?(o.endByte-o.startByte)/o.fileObjSize:1;if(o.pendingRetry)return 0;switch(o.xhr&&o.xhr.status||o.markComplete||(t*=.95),o.status()){case"success":case"error":return 1*t;case"pending":return 0*t;default:return o.loaded/(o.endByte-o.startByte)*t}},this}if(!(this instanceof t))return new t(e);if(this.version=1,this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice&&!Blob.prototype.slice),!this.support)return!1;var l=this;l.files=[],l.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,fileParameterName:"file",chunkNumberParameterName:"resumableChunkNumber",chunkSizeParameterName:"resumableChunkSize",currentChunkSizeParameterName:"resumableCurrentChunkSize",totalSizeParameterName:"resumableTotalSize",typeParameterName:"resumableType",identifierParameterName:"resumableIdentifier",fileNameParameterName:"resumableFilename",relativePathParameterName:"resumableRelativePath",totalChunksParameterName:"resumableTotalChunks",dragOverClass:"dragover",throttleProgressCallbacks:.5,query:{},headers:{},preprocess:null,preprocessFile:null,method:"multipart",uploadMethod:"POST",testMethod:"GET",prioritizeFirstAndLastChunk:!1,target:"/",testTarget:null,parameterNamespace:"",testChunks:!0,generateUniqueIdentifier:null,getTarget:null,maxChunkRetries:100,chunkRetryInterval:undefined,permanentErrors:[400,401,403,404,409,415,500,501],maxFiles:undefined,withCredentials:!1,xhrTimeout:0,clearInput:!0,chunkFormat:"blob",setChunkTypeFromFile:!1,maxFilesErrorCallback:function(e,t){var n=l.getOpt("maxFiles");alert("Please upload no more than "+n+" file"+(1===n?"":"s")+" at a time.")},minFileSize:1,minFileSizeErrorCallback:function(e,t){alert(e.fileName||e.name+" is too small, please upload files larger than "+d.formatSize(l.getOpt("minFileSize"))+".")},maxFileSize:undefined,maxFileSizeErrorCallback:function(e,t){alert(e.fileName||e.name+" is too large, please upload files less than "+d.formatSize(l.getOpt("maxFileSize"))+".")},fileType:[],fileTypeErrorCallback:function(e,t){alert(e.fileName||e.name+" has type not allowed, please upload files of type "+l.getOpt("fileType")+".")}},l.opts=e||{},l.getOpt=function(e){var n=this;if(e instanceof Array){var i={};return d.each(e,function(e){i[e]=n.getOpt(e)}),i}if(n instanceof a){if("undefined"!=typeof n.opts[e])return n.opts[e];n=n.fileObj}if(n instanceof s){if("undefined"!=typeof n.opts[e])return n.opts[e];n=n.resumableObj}if(n instanceof t)return"undefined"!=typeof n.opts[e]?n.opts[e]:n.defaults[e]},l.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},l.events=[],l.on=function(e,t){l.events.push(e.toLowerCase(),t)},l.fire=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);for(var n=e[0].toLowerCase(),t=0;t<=l.events.length;t+=2)l.events[t]==n&&l.events[t+1].apply(l,e.slice(1)),"catchall"==l.events[t]&&l.events[t+1].apply(null,e);"fileerror"==n&&l.fire("error",e[2],e[1]),"fileprogress"==n&&l.fire("progress")};var d={stopEvent:function(e){e.stopPropagation(),e.preventDefault()},each:function(e,t){if("undefined"!=typeof e.length){for(var n=0;n<e.length;n++)if(!1===t(e[n]))return}else for(n in e)if(!1===t(n,e[n]))return},generateUniqueIdentifier:function(e,t){var n=l.getOpt("generateUniqueIdentifier");if("function"==typeof n)return n(e,t);var i=e.webkitRelativePath||e.relativePath||e.fileName||e.name;return e.size+"-"+i.replace(/[^0-9a-zA-Z_-]/gim,"")},contains:function(e,t){var n=!1;return d.each(e,function(e){return e!=t||(n=!0,!1)}),n},formatSize:function(e){return e<1024?e+" bytes":e<1048576?(e/1024).toFixed(0)+" KB":e<1073741824?(e/1024/1024).toFixed(1)+" MB":(e/1024/1024/1024).toFixed(1)+" GB"},getTarget:function(e,t){var n=l.getOpt("target");if("test"===e&&l.getOpt("testTarget")&&(n="/"===l.getOpt("testTarget")?l.getOpt("target"):l.getOpt("testTarget")),"function"==typeof n)return n(t);var i=n.indexOf("?")<0?"?":"&",o=t.join("&");return o&&(n=n+i+o),n}},c=function(e){e.currentTarget.classList.remove(l.getOpt("dragOverClass")),d.stopEvent(e),e.dataTransfer&&e.dataTransfer.items?r(e.dataTransfer.items,event):e.dataTransfer&&e.dataTransfer.files&&r(e.dataTransfer.files,event)},u=function(e){e.currentTarget.classList.remove(l.getOpt("dragOverClass"))},h=function(e){e.preventDefault();var t=e.dataTransfer;l.indexOf(t.types,"Files")>=0?(e.stopPropagation(),t.dropEffect="copy",t.effectAllowed="copy",e.currentTarget.classList.add(l.getOpt("dragOverClass"))):(t.dropEffect="none",t.effectAllowed="none")},p=function(e,t){var n=0,i=l.getOpt(["maxFiles","minFileSize","maxFileSize","maxFilesErrorCallback","minFileSizeErrorCallback","maxFileSizeErrorCallback","fileType","fileTypeErrorCallback"]);if("undefined"!=typeof i.maxFiles&&i.maxFiles<e.length+l.files.length){if(1!==i.maxFiles||1!==l.files.length||1!==e.length)return i.maxFilesErrorCallback(e,n++),!1;l.removeFile(l.files[0])}var o=[],r=[],a=e.length,c=function(){if(!--a){if(!o.length&&!r.length)return;window.setTimeout(function(){l.fire("filesAdded",o,r)},0)}};d.each(e,function(e){function a(n){l.getFromUniqueIdentifier(n)?r.push(e):function(){e.uniqueIdentifier=n;var i=new s(l,e,n);l.files.push(i),o.push(i),i.container=void 0!==t?t.srcElement:null,window.setTimeout(function(){l.fire("fileAdded",i,t)},0)}(),c()}var u=e.name,h=e.type;if(i.fileType.length>0){var p=!1;for(var f in i.fileType){i.fileType[f]=i.fileType[f].replace(/\s/g,"").toLowerCase();var m=(i.fileType[f].match(/^[^.][^\/]+$/)?".":"")+i.fileType[f];if(u.substr(-1*m.length).toLowerCase()===m||-1!==m.indexOf("/")&&(-1!==m.indexOf("*")&&h.substr(0,m.indexOf("*"))===m.substr(0,m.indexOf("*"))||h===m)){p=!0;break}}if(!p)return i.fileTypeErrorCallback(e,n++),!0}if("undefined"!=typeof i.minFileSize&&e.size<i.minFileSize)return i.minFileSizeErrorCallback(e,n++),!0;if("undefined"!=typeof i.maxFileSize&&e.size>i.maxFileSize)return i.maxFileSizeErrorCallback(e,n++),!0;var _=d.generateUniqueIdentifier(e,t);_&&"function"==typeof _.then?_.then(function(e){a(e)},function(){c()}):a(_)})};return l.uploadNextChunk=function(){var e=!1;if(l.getOpt("prioritizeFirstAndLastChunk")&&(d.each(l.files,function(t){return t.chunks.length&&"pending"==t.chunks[0].status()&&0===t.chunks[0].preprocessState?(t.chunks[0].send(),e=!0,!1):t.chunks.length>1&&"pending"==t.chunks[t.chunks.length-1].status()&&0===t.chunks[t.chunks.length-1].preprocessState?(t.chunks[t.chunks.length-1].send(),e=!0,!1):void 0}),e))return!0;if(d.each(l.files,function(t){if(e=t.upload())return!1}),e)return!0;var t=!1;return d.each(l.files,function(e){if(!e.isComplete())return t=!0,!1}),t||l.fire("complete"),!1},l.assignBrowse=function(e,t){"undefined"==typeof e.length&&(e=[e]),d.each(e,function(e){var n;"INPUT"===e.tagName&&"file"===e.type?n=e:(n=document.createElement("input"),n.setAttribute("type","file"),n.style.display="none",e.addEventListener("click",function(){n.style.opacity=0,n.style.display="block",n.focus(),n.click(),n.style.display="none"},!1),e.appendChild(n));var i=l.getOpt("maxFiles");void 0===i||1!=i?n.setAttribute("multiple","multiple"):n.removeAttribute("multiple"),t?n.setAttribute("webkitdirectory","webkitdirectory"):n.removeAttribute("webkitdirectory");var o=l.getOpt("fileType");void 0!==o&&o.length>=1?n.setAttribute("accept",o.map(function(e){return e=e.replace(/\s/g,"").toLowerCase(),e.match(/^[^.][^\/]+$/)&&(e="."+e),e}).join(",")):n.removeAttribute("accept"),n.addEventListener("change",function(e){p(e.target.files,e),l.getOpt("clearInput")&&(e.target.value="")},!1)})},l.assignDrop=function(e){"undefined"==typeof e.length&&(e=[e]),d.each(e,function(e){e.addEventListener("dragover",h,!1),e.addEventListener("dragenter",h,!1),e.addEventListener("dragleave",u,!1),e.addEventListener("drop",c,!1)})},l.unAssignDrop=function(e){"undefined"==typeof e.length&&(e=[e]),d.each(e,function(e){e.removeEventListener("dragover",h),e.removeEventListener("dragenter",h),e.removeEventListener("dragleave",u),e.removeEventListener("drop",c)})},l.isUploading=function(){var e=!1;return d.each(l.files,function(t){if(t.isUploading())return e=!0,!1}),e},l.upload=function(){if(!l.isUploading()){l.fire("uploadStart");for(var e=1;e<=l.getOpt("simultaneousUploads");e++)l.uploadNextChunk()}},l.pause=function(){d.each(l.files,function(e){e.abort()}),l.fire("pause")},l.cancel=function(){l.fire("beforeCancel");for(var e=l.files.length-1;e>=0;e--)l.files[e].cancel();l.fire("cancel")},l.progress=function(){var e=0,t=0;return d.each(l.files,function(n){e+=n.progress()*n.size,t+=n.size}),t>0?e/t:0},l.addFile=function(e,t){p([e],t)},l.addFiles=function(e,t){p(e,t)},l.removeFile=function(e){for(var t=l.files.length-1;t>=0;t--)l.files[t]===e&&l.files.splice(t,1)},l.getFromUniqueIdentifier=function(e){var t=!1;return d.each(l.files,function(n){n.uniqueIdentifier==e&&(t=n)}),t},l.getSize=function(){var e=0;return d.each(l.files,function(t){e+=t.size}),e},l.handleDropEvent=function(e){c(e)},l.handleChangeEvent=function(e){p(e.target.files,e),e.target.value=""},l.updateQuery=function(e){l.opts.query=e},this};void 0!==e?(e.exports=t,e.exports.Resumable=t):"function"==typeof define&&define.amd?define(function(){return t}):window.Resumable=t}()},"./third_party/rum-speedindex.js":function(e,t){var n=t.getFirstPaint=function(){var e,t,n=window,i=n.document;try{t=n.performance.timing.navigationStart;for(var o=n.performance.getEntriesByType("paint"),r=0;r<o.length;r++)if("first-paint"==o[r].name){t=n.performance.getEntriesByType("navigation")[0].startTime,e=o[r].startTime-t;break}if(e===undefined&&"msFirstPaint"in n.performance.timing&&(e=n.performance.timing.msFirstPaint-t),e===undefined&&"chrome"in n&&"loadTimes"in n.chrome){var s=n.chrome.loadTimes();if("firstPaintTime"in s&&s.firstPaintTime>0){var a=s.startLoadTime;"requestTime"in s&&(a=s.requestTime),s.firstPaintTime>=a&&(e=1e3*(s.firstPaintTime-a))}}if(e===undefined||e<0||e>12e4){e=n.performance.timing.responseStart-t;for(var l={},d=i.getElementsByTagName("head")[0].children,r=0;r<d.length;r++){var c=d[r];"SCRIPT"==c.tagName&&c.src&&!c.async&&(l[c.src]=!0),"LINK"==c.tagName&&"stylesheet"==c.rel&&c.href&&(l[c.href]=!0)}for(var u=n.performance.getEntriesByType("resource"),h=!1,p=0;p<u.length;p++)if(h||!l[u[p].name]||"script"!=u[p].initiatorType&&"link"!=u[p].initiatorType)h=!0;else{var f=u[p].responseEnd;(e===undefined||f>e)&&(e=f)}}}catch(e){}return e=Math.max(e,0)};t.getSpeedIndex=function(){var e,t,i=window,o=i.document,r=function(e){var t=!1;if(e.getBoundingClientRect){var n=e.getBoundingClientRect();t={top:Math.max(n.top,0),left:Math.max(n.left,0),bottom:Math.min(n.bottom,i.innerHeight||o.documentElement.clientHeight),right:Math.min(n.right,i.innerWidth||o.documentElement.clientWidth)},t.bottom<=t.top||t.right<=t.left?t=!1:t.area=(t.bottom-t.top)*(t.right-t.left)}return t},s=function(e,t){if(t){var n=r(e);n&&u.push({url:t,area:n.area,rect:n})}},a=function(){for(var e=o.getElementsByTagName("*"),t=/url\(.*(http.*)\)/gi,n=0;n<e.length;n++){var a=e[n],l=i.getComputedStyle(a);if("IMG"==a.tagName&&s(a,a.src),l["background-image"]){t.lastIndex=0;var d=t.exec(l["background-image"]);d&&d.length>1&&s(a,d[1].replace('"',""))}if("IFRAME"==a.tagName)try{var c=r(a);if(c){var h=RUMSpeedIndex(a.contentWindow);h&&u.push({tm:h,area:c.area,rect:c})}}catch(e){}}},l=function(){for(var e={},t=i.performance.getEntriesByType("resource"),n=0;n<t.length;n++)e[t[n].name]=t[n].responseEnd;for(var o=0;o<u.length;o++)"tm"in u[o]||(u[o].tm=e[u[o].url]!==undefined?e[u[o].url]:0)},d=function(){for(var t={0:0},n=0,r=0;r<u.length;r++){var s=e;"tm"in u[r]&&u[r].tm>e&&(s=u[r].tm),t[s]===undefined&&(t[s]=0),t[s]+=u[r].area,n+=u[r].area}var a=Math.max(o.documentElement.clientWidth,i.innerWidth||0)*Math.max(o.documentElement.clientHeight,i.innerHeight||0);if(a>0&&(a=Math.max(a-n,0)*p,t[e]===undefined&&(t[e]=0),t[e]+=a,n+=a),n){for(var l in t)t.hasOwnProperty(l)&&h.push({tm:l,area:t[l]});h.sort(function(e,t){return e.tm-t.tm});for(var d=0,c=0;c<h.length;c++)d+=h[c].area,h[c].progress=d/n}},c=function(){if(h.length){t=0;for(var n=0,i=0,o=0;o<h.length;o++){var r=h[o].tm-n;r>0&&i<1&&(t+=(1-i)*r),n=h[o].tm,i=h[o].progress}}else t=e},u=[],h=[],p=.1;try{i.performance.timing.navigationStart;a(),l(),e=n(),d(),c()}catch(e){}return t}},"./third_party/tracekit.js":function(e,t){/**
 * https://github.com/csnover/TraceKit
 * @license MIT
 * @namespace TraceKit
 */
!function(t,n){function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function o(e){return void 0===e}if(t){var r={},s=t.TraceKit,a=[].slice,l="?";r.noConflict=function(){return t.TraceKit=s,r},r.wrap=function(e){function t(){try{return e.apply(this,arguments)}catch(e){throw r.report(e),e}}return t},r.report=function(){function e(e){l(),p.push(e)}function n(e){for(var t=p.length-1;t>=0;--t)p[t]===e&&p.splice(t,1)}function o(e,t){var n=null;if(!t||r.collectWindowErrors){for(var o in p)if(i(p,o))try{p[o].apply(null,[e].concat(a.call(arguments,2)))}catch(e){n=e}if(n)throw n}}function s(e,t,n,i,s){var a=null;if(_)r.computeStackTrace.augmentStackTraceWithInitialElement(_,t,n,e),d();else if(s)a=r.computeStackTrace(s),o(a,!0);else{var l={url:t,line:n,column:i};l.func=r.computeStackTrace.guessFunctionName(l.url,l.line),l.context=r.computeStackTrace.gatherContext(l.url,l.line),a={mode:"onerror",message:e,stack:[l]},o(a,!0)}return!!u&&u.apply(this,arguments)}function l(){!0!==h&&(u=t.onerror,t.onerror=s,h=!0)}function d(){var e=_,t=f;f=null,_=null,m=null,o.apply(null,[e,!1].concat(t))}function c(e){if(_){if(m===e)return;d()}var n=r.computeStackTrace(e);throw _=n,m=e,f=a.call(arguments,1),t.setTimeout(function(){m===e&&d()},n.incomplete?2e3:0),e}var u,h,p=[],f=null,m=null,_=null;return c.subscribe=e,c.unsubscribe=n,c}(),r.computeStackTrace=function(){function e(e){if(!r.remoteFetching)return"";try{var n=function(){try{return new t.XMLHttpRequest}catch(e){return new t.ActiveXObject("Microsoft.XMLHTTP")}},i=n();return i.open("GET",e,!1),i.send(""),i.responseText}catch(e){return""}}function n(n){if("string"!=typeof n)return[];if(!i(E,n)){var o="",r="";try{r=t.document.domain}catch(e){}var s=/(.*)\:\/\/([^:\/]+)([:\d]*)\/{0,1}([\s\S]*)/.exec(n);s&&s[2]===r&&(o=e(n)),E[n]=o?o.split("\n"):[]}return E[n]}function s(e,t){var i,r=/function ([^(]*)\(([^)]*)\)/,s=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,a="",d=10,c=n(e);if(!c.length)return l;for(var u=0;u<d;++u)if(a=c[t-u]+a,!o(a)){if(i=s.exec(a))return i[1];if(i=r.exec(a))return i[1]}return l}function a(e,t){var i=n(e);if(!i.length)return null;var s=[],a=Math.floor(r.linesOfContext/2),l=a+r.linesOfContext%2,d=Math.max(0,t-a-1),c=Math.min(i.length,t+l-1);t-=1;for(var u=d;u<c;++u)o(i[u])||s.push(i[u]);return s.length>0?s:null}function d(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function c(e){return d(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function u(e,t){for(var i,o,r=0,s=t.length;r<s;++r)if((i=n(t[r])).length&&(i=i.join("\n"),o=e.exec(i)))return{url:t[r],line:i.substring(0,o.index).split("\n").length,column:o.index-i.lastIndexOf("\n",o.index)-1};return null}function h(e,t,i){var o,r=n(t),s=new RegExp("\\b"+d(e)+"\\b");return i-=1,r&&r.length>i&&(o=s.exec(r[i]))?o.index:null}function p(e){if(!o(t&&t.document)){for(var n,i,r,s,a=[t.location.href],l=t.document.getElementsByTagName("script"),h=""+e,p=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,f=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,m=0;m<l.length;++m){var _=l[m];_.src&&a.push(_.src)}if(r=p.exec(h)){var g=r[1]?"\\s+"+r[1]:"",v=r[2].split(",").join("\\s*,\\s*");n=d(r[3]).replace(/;$/,";?"),i=new RegExp("function"+g+"\\s*\\(\\s*"+v+"\\s*\\)\\s*{\\s*"+n+"\\s*}")}else i=new RegExp(d(h).replace(/\s+/g,"\\s+"));if(s=u(i,a))return s;if(r=f.exec(h)){var b=r[1];if(n=c(r[2]),i=new RegExp("on"+b+"=[\\'\"]\\s*"+n+"\\s*[\\'\"]","i"),s=u(i,a[0]))return s;if(i=new RegExp(n),s=u(i,a))return s}return null}}function f(e){if(!e.stack)return null;for(var t,n,i=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,r=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,d=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:ms-appx|https?|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,c=e.stack.split("\n"),u=[],p=/^(.*) is undefined$/.exec(e.message),f=0,m=c.length;f<m;++f){if(t=i.exec(c[f])){var _=t[2]&&-1!==t[2].indexOf("native");n={url:_?null:t[2],func:t[1]||l,args:_?[t[2]]:[],line:t[3]?+t[3]:null,column:t[4]?+t[4]:null}}else if(t=d.exec(c[f]))n={url:t[2],func:t[1]||l,args:[],line:+t[3],column:t[4]?+t[4]:null};else{if(!(t=r.exec(c[f])))continue;n={url:t[3],func:t[1]||l,args:t[2]?t[2].split(","):[],line:t[4]?+t[4]:null,column:t[5]?+t[5]:null}}!n.func&&n.line&&(n.func=s(n.url,n.line)),n.line&&(n.context=a(n.url,n.line)),u.push(n)}return u.length?(u[0]&&u[0].line&&!u[0].column&&p?u[0].column=h(p[1],u[0].url,u[0].line):u[0].column||o(e.columnNumber)||(u[0].column=e.columnNumber+1),{mode:"stack",name:e.name,message:e.message,stack:u}):null}function m(e){var t=e.stacktrace;if(t){for(var n,i=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,o=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,r=t.split("\n"),l=[],d=0;d<r.length;d+=2){var c=null;if((n=i.exec(r[d]))?c={url:n[2],line:+n[1],column:null,func:n[3],args:[]}:(n=o.exec(r[d]))&&(c={url:n[6],line:+n[1],column:+n[2],func:n[3]||n[4],args:n[5]?n[5].split(","):[]}),c){if(!c.func&&c.line&&(c.func=s(c.url,c.line)),c.line)try{c.context=a(c.url,c.line)}catch(e){}c.context||(c.context=[r[d+1]]),l.push(c)}}return l.length?{mode:"stacktrace",name:e.name,message:e.message,stack:l}:null}}function _(e){var o=e.message.split("\n");if(o.length<4)return null;var r,l=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,d=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,h=/^\s*Line (\d+) of function script\s*$/i,p=[],f=t&&t.document&&t.document.getElementsByTagName("script"),m=[];for(var _ in f)i(f,_)&&!f[_].src&&m.push(f[_]);for(var g=2;g<o.length;g+=2){var v=null;if(r=l.exec(o[g]))v={url:r[2],func:r[3],args:[],line:+r[1],column:null};else if(r=d.exec(o[g])){v={url:r[3],func:r[4],args:[],line:+r[1],column:null};var b=+r[1],y=m[r[2]-1];if(y){var w=n(v.url);if(w){w=w.join("\n");var E=w.indexOf(y.innerText);E>=0&&(v.line=b+w.substring(0,E).split("\n").length)}}}else if(r=h.exec(o[g])){var T=t.location.href.replace(/#.*$/,""),S=new RegExp(c(o[g+1])),C=u(S,[T]);v={url:T,func:"",args:[],line:C?C.line:r[1],column:null}}if(v){v.func||(v.func=s(v.url,v.line));var x=a(v.url,v.line),k=x?x[Math.floor(x.length/2)]:null;x&&k.replace(/^\s*/,"")===o[g+1].replace(/^\s*/,"")?v.context=x:v.context=[o[g+1]],p.push(v)}}return p.length?{mode:"multiline",name:e.name,message:o[0],stack:p}:null}function g(e,t,n,i){var o={url:t,line:n};if(o.url&&o.line){e.incomplete=!1,o.func||(o.func=s(o.url,o.line)),o.context||(o.context=a(o.url,o.line));var r=/ '([^']+)' /.exec(i);if(r&&(o.column=h(r[1],o.url,o.line)),e.stack.length>0&&e.stack[0].url===o.url){if(e.stack[0].line===o.line)return!1;if(!e.stack[0].line&&e.stack[0].func===o.func)return e.stack[0].line=o.line,e.stack[0].context=o.context,!1}return e.stack.unshift(o),e.partial=!0,!0}return e.incomplete=!0,!1}function v(e,t){for(var n,i,o,a=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,d=[],c={},u=!1,f=v.caller;f&&!u;f=f.caller)if(f!==b&&f!==r.report){if(i={url:null,func:l,args:[],line:null,column:null},f.name?i.func=f.name:(n=a.exec(f.toString()))&&(i.func=n[1]),"undefined"==typeof i.func)try{i.func=n.input.substring(0,n.input.indexOf("{"))}catch(e){}if(o=p(f)){i.url=o.url,i.line=o.line,i.func===l&&(i.func=s(i.url,i.line));var m=/ '([^']+)' /.exec(e.message||e.description);m&&(i.column=h(m[1],o.url,o.line))}c[""+f]?u=!0:c[""+f]=!0,d.push(i)}t&&d.splice(0,t);var _={mode:"callers",name:e.name,message:e.message,stack:d};return g(_,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),_}function b(e,t){var n=null;t=null==t?0:+t;try{if(n=m(e))return n}catch(e){if(w)throw e}try{if(n=f(e))return n}catch(e){if(w)throw e}try{if(n=_(e))return n}catch(e){if(w)throw e}try{if(n=v(e,t+1))return n}catch(e){if(w)throw e}return{mode:"failed"}}function y(e){e=1+(null==e?0:+e);try{throw new Error}catch(t){return b(t,e+1)}}var w=!1,E={};return b.augmentStackTraceWithInitialElement=g,b.guessFunctionName=s,b.gatherContext=a,b.ofCaller=y,b.getSource=n,b}(),r.extendToAsynchronousCallbacks=function(){var e=function(e){var n=t[e];t[e]=function(){var e=a.call(arguments),t=e[0];return"function"==typeof t&&(e[0]=r.wrap(t)),n.apply?n.apply(this,e):n(e[0],e[1])}};e("setTimeout"),e("setInterval")},r.remoteFetching||(r.remoteFetching=!0),r.collectWindowErrors||(r.collectWindowErrors=!0),(!r.linesOfContext||r.linesOfContext<1)&&(r.linesOfContext=11),void 0!==e&&e.exports&&t.module!==e?e.exports=r:"function"==typeof define&&define.amd?define("TraceKit",[],r):t.TraceKit=r}}("undefined"!=typeof window?window:global)},"./ui/popovers/base.js":function(e,t,n){var i=n("./shared/core/component.js").Component;if(PAGE_IS_MOBILE)var o=n("./mobile_app2/client.js");else var r=n("./view/hover_menu.js");t.PopOverMenuItem=i.extend({onLoad:function(){this.isSelected=this.is_selected,PAGE_IS_MOBILE||this.desktopOnLoad()},desktopOnLoad:function(){this.$id("@pop_over_menu_item").on("click",this.selectItem.bind(this))},onSelectAction:function(){var e=this;e.beforeServerCall(),e.serverCall("selected").success(e.onSuccess.bind(e)).error(e.onError.bind(e)).send()},selectItem:function(e){return e&&e.preventDefault(),this.onSelectAction(),this.close_on_click},beforeServerCall:function(){},onSuccess:function(e){},onError:function(e){},registerCallback:function(e){this._callback=e},getActionSheetItemData:function(){var e=this.translated_label;return this.isSelected&&this.mobile_unicode_icon&&(e=this.mobile_unicode_icon+e+"  "),{index:this.index,label:e}}}),t.PopOverMenu=i.extend({onLoad:function(){var e=this;PAGE_IS_MOBILE?e.getLinkElem().on("click",function(t){t.stopPropagation(),e.showMenuMobile()}):e.setupMenuDesktop()},getLinkElem:function(){return this.$id("@pop_over_link")},getMenuElem:function(){return this.$id("@pop_over_menu")},setupMenuDesktop:function(){this.overflowMenu=new r.ToggleableMenu({$linkElem:this.getLinkElem(),$menuElem:this.getMenuElem(),loadFunction:this.loadOverflowMenu.bind(this),onHideShowFunction:this.onHideShowFunction.bind(this),alignment:this.alignment||"right",clickOpen:!0,shouldAttachToBody:!1})},showMenuMobile:function(){for(var e=[],t=[],n=this.getActionSheetItemsData(),i=0;i<n.length;i++){var r=n[i];e[r.index]=r.label,t[r.index]=r.sublabel}o.showActionSheet({title:this.translated_mobile_title,buttonTitles:e,buttonSubtitles:t,destructiveButtonIndex:-1,callback:this.onSelectItemMobile.bind(this)})},onSelectItemMobile:function(e){if(!(e<0))for(var t=this.children(),n=0;n<t.length;n++){var i=t[n];if(i.getActionSheetItemData){var o=i.getActionSheetItemData();if(o.index==e)return i.selectItem()}}},getActionSheetItemsData:function(){for(var e=this.children(),t=[],n=0;n<e.length;n++){var i=e[n];i.getActionSheetItemData&&t.push(i.getActionSheetItemData())}return t},loadOverflowMenu:function(){},onHideShowFunction:function(e){}}),t.PopOverMenuToggleable=t.PopOverMenuItem.extend({desktopOnLoad:function(){var e=this;this._super.apply(this,arguments),e.is_checkable&&e.child("toggle_button").$id("@checkbox").on("click",function(t){t.stopPropagation(),e.selectItem()})},_update:function(e){this.isSelected=e,this.is_checkable?PAGE_IS_MOBILE||(this.child("toggle_button").$id("@checkbox")[0].checked=e):this.$id("@contents").toggleClass(this.selected_css,e)},onToggledOff:function(){this.one_way||(this._update(!1),this.with_server_call&&this.makeServerCall("on_toggled_off",!1))},onToggledOn:function(){this._update(!0),this.with_server_call&&this.makeServerCall("on_toggled_on",!0)},makeServerCall:function(e,t){var n=this;n.serverCall(e).liveMutate({optimisticUpdate:!0}).success(n.onSuccess.bind(n)).error(n.onError.bind(n)).send()},onSelectAction:function(){this.isSelected?this.onToggledOff():this.onToggledOn(),this._callback&&this._callback()}})},"./unified_view/button/base.js":function(e,t,n){var i=n("./shared/core/component.js").Component,o=n("./shared/client.js"),r=n("./shared/perf.js");if(PAGE_IS_MOBILE)var s=n("./mobile_app2/messages.js");t.ButtonBase=i.extend({onLoad:function(){var e=this;this.actionButton=this.child("action_button"),this._userPerceivedAction=null,this.actionButton&&"function"==typeof this.actionButton.onPressed&&this.actionButton.onPressed(function(t){e.onPressed(t)}),this.actionButton&&"function"==typeof this.actionButton.onUnpressed&&this.actionButton.onUnpressed(function(t){e.onUnpressed(t)})},setDisabled:function(e){this.actionButton.setDisabled(e)},updateLabel:function(e){this.actionButton.updateLabel(e)},setUserPerceivedAction:function(e){this._userPerceivedAction||(this._userPerceivedAction=r.startUserPerceived({hmac:this.getHmac(),method:e}))},endUserPerceivedAction:function(){this._userPerceivedAction&&(r.finishAction(this._userPerceivedAction),this._userPerceivedAction=null)},dirtyURL:function(){var e=this;PAGE_IS_MOBILE&&e.url_to_dirty&&o.isNativeApp()&&s.send("removeURLFromCache",{url:e.url_to_dirty})},shouldBroadcastReload:function(e){return!this.has_animation||!!e},onPressedKwargs:function(){return{}},onPressed:function(e){var t=this;this.setUserPerceivedAction("press");var n=this.onPressedKwargs();this.use_default_servercall&&this.serverCall("press").disableDefaultUserPerceivedLogging().liveMutate({optimisticUpdate:!0}).kwargs(n).except("question_follow_rate_limiting",function(){t.actionButton.switchState(!1)}).error(function(){t.actionButton.switchState(!1)}).success(this.onPressedSuccess.bind(this)).send(),this.endUserPerceivedAction()},onUnpressed:function(e){var t=this;this.setUserPerceivedAction("unpress"),this.use_default_servercall&&this.serverCall("unpress").disableDefaultUserPerceivedLogging().liveMutate({optimisticUpdate:!0}).error(function(){t.actionButton.switchState(!0)}).success(this.onUnpressedSuccess.bind(this)).send(),this.endUserPerceivedAction()},onPressedSuccess:function(){},onUnpressedSuccess:function(){}})},"./unified_view/button/multi_state_button.js":function(e,t,n){var i=n("./ui/popovers/base.js").PopOverMenu,o=n("./ui/popovers/base.js").PopOverMenuItem,r=n("./unified_view/modal.js").ModalBase,s=n("./shared/events/index.js");t.MultiStateMenuItem=o.extend({onLoad:function(){this._super.apply(this,arguments),this.isSelected=this.is_selected},_update:function(e){this.index==e?(this.isSelected=!0,this.$id("@contents").addClass(this.selected_css)):(this.isSelected=!1,this.$id("@contents").removeClass(this.selected_css))},onSelectAction:function(e){var t=this;this._update(e),this._callback&&setTimeout(function(){t._callback(e)},100)},getActionSheetItemData:function(){var e=this.translated_label,t=this.translated_sublabel;return this.isSelected&&this.mobile_unicode_icon&&(e=e+"  "+this.mobile_unicode_icon),{index:this.index,label:e,sublabel:t}}}),t.MultiStateMenu=i.extend({onLoad:function(){this._super.apply(this,arguments),this.currentIndex=this.selected_index;for(var e=0;e<this.states.length;e++)this.child("menu_item_"+e).registerCallback(this.onSelect.bind(this,e))},onSelect:function(e){var t=this,n=t.currentIndex;e>=t.states.length||(t._update(e),t.serverCall("on_select").kwargs({selected_state:t.states[e]}).success(function(){t._onSelectCallback&&t._onSelectCallback(e)}).error(function(){t._update(n)}).send())},_update:function(e){this.currentIndex=e;for(var t=this.children(),n=0;n<t.length;n++){var i=t[n];i._update&&i._update(e)}this.$id("@button_"+e).removeClass("hidden").siblings().addClass("hidden")},registerOnSelectCallback:function(e){this._onSelectCallback=e}}),t.MultiSelectMenu=i.extend({onLoad:function(){this._super.apply(this,arguments);for(var e=0;e<this.states.length;e++)this.child("menu_item_"+e).registerCallback(this.onSelect.bind(this,e))},onSelect:function(e){},showMenuMobile:function(){var e=this;e.handleEvent(s.Types.MULTI_SELECT_MODAL_SUBMIT,function(t){for(var n=t.payload.selectedStates,i=e.children(),o=0;o<i.length;o++){var r=i[o];r._update&&(r.isSelected=n.indexOf(r.state)>=0)}e.close(n)}),e.createModal("load_inner").kwargs({state_tuples:e.state_tuples,selected_states:e.getSelectedStates(),translated_mobile_title:e.translated_mobile_title,selection_needed_for_submit:e.selection_needed_for_submit}).show()},onHideShowFunction:function(e){e||this.onHide()},getSelectedStates:function(){for(var e=[],t=this.children(),n=0;n<t.length;n++){var i=t[n];!0===i.isSelected&&e.push(this.states[i.index])}return e},getSelectedIndexes:function(){for(var e=[],t=this.children(),n=0;n<t.length;n++){var i=t[n];!0===i.isSelected&&e.push(i.index)}return e},onHide:function(){this.close(this.getSelectedStates())},close:function(e){this.serverCall("on_close").liveMutate().kwargs({selected_states:e}).send()}}),t.MultiSelectModal=r.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.selectionSection=e.child("selection_section"),e.selection_needed_for_submit&&e.selectionSection.onToggleCell(function(t){for(var n=e.children(),i=0;i<n.length;i++){var o=n[i];o._update&&o.index===t&&o._update(!o.isSelected)}e.getSelectedStates().length>0?e.setMobileDoneButtonDisabled(!1):e.setMobileDoneButtonDisabled(!0)})},getSelectedStates:function(){for(var e=[],t=this.children(),n=0;n<t.length;n++){var i=t[n];!0===i.isSelected&&e.push(this.states[i.index])}return e},getSelectedIndexes:function(){for(var e=[],t=this.children(),n=0;n<t.length;n++){var i=t[n];!0===i.isSelected&&e.push(i.index)}return e},onSubmit:function(e){var t=this;t.emitEvent({type:s.Types.MULTI_SELECT_MODAL_SUBMIT,payload:{selectedStates:t.getSelectedStates()},scope:s.scope.GLOBAL}),t.close()}})},"./unified_view/live_paged_list.js":function(e,t,n){var i=n("./shared/util.js"),o=n("./shared/viewport.js"),r=n("./shared/core/component.js"),s=n("./shared/perf.js"),a=n("./shared/core/component.js").Component,l=n("./shared/jquery.js"),d=n("./shared/core/webnode.js");if(PAGE_IS_MOBILE)var c=n("./mobile_app2/client.js"),u=n("./mobile_app2/messages.js");else var h=n("./shared/loading.js");t.EMPTY_HASH="empty";var p=n("./shared/Class.js").Class.extend({__init__:function(e){this.map={},this.arr=e;for(var t=0;t<e.length;t++)this.map[e[t]]=!0},add_hash:function(e,t){if(this.map.hasOwnProperty(e)&&this.map[e])throw new Error("Something tried to insert the same hash multiple times");this.map[e]=!0,t?this.arr.unshift(e):this.arr.push(e)},append_multi:function(e){for(var t=0;t<e.length;t++)this.add_hash(e[t],!1)},prepend_multi:function(e){for(var t=e.length-1;t>=0;--t)this.add_hash(e[t],!0)}});t.PagedList=a.extend({onLoad:function(e){var t=this;if(t.hashes=new p(t.hashes),t.waitingForNewPage=!1,t.waitingForUpdates=!1,t.fetch_callback=null,t.preloadedData=null,t.preloadingFailed=!1,t.userPerceivedAction=null,t.initNewStoriesTimer(),t.more_button_last_check_time=0,t.more_button_rate_limiter_ms=250,t.tickCallback=function(){t.maybeHideSpinner(),t.shouldAutoPage()&&t.requestNewPage()},t.wrapper=r.getLiveDomElement(t.cid),t.has_more){if(t.bindMoreButton(),t.auto_paged){if(t.setAutoPageHeight(),PAGE_IS_MOBILE)c.registerMessageHandler("tick",t.tickCallback);else{var n=function(){setTimeout(t.tickCallback.bind(t,!1),125)};this._mousemove_handler=n,this._keypress_handler=n,this._scroll_handler=n,document.addEventListener("mousemove",this._mousemove_handler),document.addEventListener("keypress",this._keypress_handler),document.addEventListener("scroll",this._scroll_handler)}this.enable_mobile_hide_content&&t.mapOverNodesBelowWrapper(function(e){l(e).addClass("paged_list_hidden_footer")}),!t.aggressively_load_2nd_page||PAGE_IS_MOBILE&&c.appInBackground||t.requestNewPage()}}else t.pagingDone(!1)},onUnload:function(){var e=this;PAGE_IS_MOBILE&&c.removeMessageHandler("tick",e.tickCallback)},bindMoreButton:function(){var e=this,t=e.child("more_button");e.moreButton=t&&t.$id("@paged_list_more_button")[0],e.moreButton&&!e.auto_paged&&(e.moreButtonOriginalText=e.moreButton.innerText,l(e.moreButton).on("click",function(){PAGE_IS_MOBILE&&(e.moreButton.innerText=e.loading_text),e.requestNewPage()}))},requestNewPage:function(){var e=this;if(!e.waitingForNewPage)return e.waitingForUpdates?void e.setFetchCallback(e.requestNewPage.bind(e)):void(e.has_more&&(e.autoPageHeight=null,e.waitingForNewPage=!0,e.serverCall("update_list").disableDefaultUserPerceivedLogging().kwargs({paged_list_parent_cid:e.parent().cid,filter_hashes:e.hashes.arr,extra_data:e.extra_data,force_cid:e.cid,new_page:!0}).success(function(t){e.appendNewPage(t),e.finishUserPerceivedAction(e),e.waitingForNewPage=!1,e.execFetchCallback()}).error(function(t){e.pagingDone(!0),e.finishUserPerceivedAction(e),e.waitingForNewPage=!1,e.execFetchCallback()}).send()))},updateList:function(){var e=this;if(e.waitingForUpdates||e.waitingForNewPage)return void e.setFetchCallback(e.updateList.bind(e));e.waitingForUpdates=!0,e.serverCall("update_list").kwargs({paged_list_parent_cid:e.parent().cid,filter_hashes:e.hashes.arr,extra_data:e.extra_data,force_cid:e.cid,new_page:!1}).success(function(t){e.processListUpdates(t),e.waitingForUpdates=!1,e.execFetchCallback()}).error(function(t){e.waitingForUpdates=!1,e.execFetchCallback()}).send()},setFetchCallback:function(e){this.fetch_callback=e},execFetchCallback:function(){this.fetch_callback&&(this.fetch_callback(),this.fetch_callback=null)},startUserPerceivedAction:function(e){e.userPerceivedAction||(e.userPerceivedAction=s.startUserPerceived({hmac:e.getHmac(),method:"update_list"}))},finishUserPerceivedAction:function(e){e.startUserPerceivedAction(e),s.finishAction(e.userPerceivedAction),e.userPerceivedAction=null},initNewStoriesTimer:function(){},setAutoPageHeight:function(){var e=this.getDocumentHeight(),t=this.getBottomOfViewport(),n=.1*(e-t)+t,i=e-4e3;this.autoPageHeight=Math.max(n,i)},disableAutoPaging:function(){this.auto_paged=!1,this.autoPageHeight=null,this.pagingDone(!1)},isHidden:function(){return!PAGE_IS_MOBILE&&!o.isElementInViewport(this.wrapper)},maybeHideSpinner:function(){if(!this.isHidden()&&this.has_more)if(PAGE_IS_MOBILE)c.showNextPageIndicator();else if(this.moreButton&&this.auto_paged&&!this.crawler){var e=this.child("more_button").$id("@loading");this.spinner||(this.spinner=h.createDots(),e.append(this.spinner)),e.show()}else this.moreButton&&this.moreButton.$id("@loading").show();else if(PAGE_IS_MOBILE)c.hideNextPageIndicator();else{var t=this.child("more_button");if(!t)return;t.$id("@loading").hide()}},shouldAutoPage:function(){if(PAGE_IS_MOBILE){if(c.appInBackground)return!1;if(this.getBottomOfViewport()+100>this.getDocumentHeight()&&this.startUserPerceivedAction(this),null===this.autoPageHeight)return!1;if(this.isHidden())return!1;var e=this.getDocumentHeight()-this.auto_paged_offset,t=this.getBottomOfViewport();return this.autoPageHeight>=e||t>this.autoPageHeight}var n=+new Date;if(!(n<this.more_button_last_check_time+this.more_button_rate_limiter_ms)){if(this.more_button_last_check_time=n,!this.auto_paged)return!1;var i=this.child("more_button");if(i){var r=i.$id("@sentinel");if(o.isElementInViewport(r.get(0)))return!0;return!(l(window).height()+l(window).scrollTop()<=l(r).offset().top-l(window).height())||void 0}}},getDocumentHeight:function(){var e=document.height;return e||(e=document.body.scrollHeight),e},getBottomOfViewport:function(){return window.innerHeight+window.pageYOffset},appendNewPage:function(e){this.has_more=e.has_more,this.hashes.append_multi(e.hashes),this.extra_data=e.extra_data;var t=i.documentFragmentFromString(e.html);this.moreButton?(this.wrapper.insertBefore(t,this.moreButton.parentNode),PAGE_IS_MOBILE&&(this.moreButton.innerText=this.moreButtonOriginalText)):this.wrapper.appendChild(t),d.evaluateContentJS(e),this.has_more?this.setAutoPageHeight():this.pagingDone(!1)},processListUpdates:function(e){var t=this,n=0;if(this.hashes.arr.forEach(function(i,o){if(-1==e.hashes.indexOf(i)){var s=t.wrapper.children[o-n],a=r.getComponentFromElement(s);t.wrapper.removeChild(s),r.unloadComponent(a.cid),n++}}),e.html){var o=i.documentFragmentFromString(e.html);e.hashes.forEach(function(e,n){if(-1==t.hashes.arr.indexOf(e)){var i=o.children[0];n<t.wrapper.children.length?t.wrapper.insertBefore(i,t.wrapper.children[n]):this.moreButton&&!t.auto_paged?(t.wrapper.insertBefore(i,t.moreButton.parentNode),PAGE_IS_MOBILE&&(t.moreButton.innerText=t.moreButtonOriginalText)):t.wrapper.appendChild(i)}}),d.evaluateContentJS(e)}this.hashes=new p(e.hashes)},pagingDone:function(e){if(this.moreButton&&!this.auto_paged&&this.moreButton.parentNode.parentNode.removeChild(this.moreButton.parentNode),this.enable_mobile_hide_content&&this.mapOverNodesBelowWrapper(function(e){l(e).removeClass("paged_list_hidden_footer")}),!0===e&&this.error_text){var t=document.createElement("div");t.className="paged_list_fail_message",t.innerHTML=this.error_text,this.wrapper.appendChild(t),PAGE_IS_MOBILE&&l(t).on("click",function(){u.send("reload")})}},mapOverNodesBelowWrapper:function(e){for(var t=this.wrapper;t;){if(t.nextSibling)t=t.nextSibling;else{if(!t.parentNode||"main_page_wrapper"==t.parentNode.id)break;t=t.parentNode.nextSibling}e(t)}},firstHash:function(){return this.hashes.arr&&this.hashes.arr.length?this.hashes.arr[0]:t.EMPTY_HASH}})},"./unified_view/mobile_overlays.js":function(e,t,n){var i,o,r=n("./shared/core/component.js").Component,s=n("./shared/core/component.js"),a=n("./shared/core/webnode.js"),l=n("./shared/client.js"),d=n("./shared/errors.js"),c=n("./shared/jquery.js");PAGE_IS_MOBILE&&(i=n("./mobile_app2/messages.js"),o=n("./mobile_app2/client.js"));var u,h=r.extend({$getContainer:function(){return this.$id("@container")},$getContent:function(){return this.$id("@content")},show:function(){var e=this;if(!this.isShown){this.isShown=!0,this._closeListener=this.close.bind(this),i.send("addHash",{hash:this._getHashName(),onRemove:this._closeListener}),window.onpopstate=function(t){var n=document.location.hash.substr(1);n&&n.length>0&&n!=e._getHashName()&&"action_sheet"!=n&&e.close()},this.modalBackground=document.createElement("div"),this.modalBackground.className="modal_bg";var t=this.$getContainer().css("z-index");this.modalBackground.style.zIndex=t-1,document.body.insertBefore(this.modalBackground,document.body.firstChild),c(this.modalBackground).on("click",function(){window.history.back()}),this.$getContainer().removeClass("hidden"),this.$getContainer().addClass(this._getOpenAnimation()),this.$getContent().scrollTop(0),this._fixHeight(),l.isIOSMobileWeb()?this._lockScrollOnIOS():document.body.style.overflowY="hidden",this._resizeListener=this._fixHeight.bind(this),window.addEventListener("resize",this._resizeListener)}},close:function(){if(this.isShown){if(this.isShown=!1,this.$getContainer().addClass("hidden"),window.removeEventListener("popstate",this._closeListener),window.removeEventListener("resize",this._resizeListener),l.isIOSMobileWeb()){var e=this.$getContent().get(0);e.removeEventListener("touchstart",this._handleTouchStart),e.removeEventListener("touchmove",this._handleTouchMove),window.removeEventListener("scroll",this._iOSScrollHack),document.body.removeEventListener("touchmove",this._cancelTouch)}else document.body.style.overflowY="scroll";document.body.removeChild(this.modalBackground),this.onClose&&this.onClose(),this._clearPageAction()}},setOnClose:function(e){this.onClose=e},setRightTextButton:function(e){var t=this.$id("@navigation_button");t.removeClass("hidden"),t.removeClass("has_badge"),t.toggleClass("is_disabled",e.disabled),t.text(e.title);var n=this.$id("@header_action_buttons");n&&n.addClass("hidden");var i=e.callback;t.on("click",function(){i()})},setRightIconButtons:function(e){this.hideRightButtons(),this.$id("@header_action_buttons").removeClass("hidden");for(var t=0;t<e.length;t++){var n=e[t],i="@right_icon_button_"+t,r=this.$id(i);r.removeClass("hidden"),r.toggleClass("is_disabled",n.disabled),r.text(o.getIconChar(n.iconName));var s=n.callback;r.on("click",function(){s()})}},hideRightButtons:function(){this.$id("@navigation_button").toggleClass("hidden",!0);for(var e=0;e<2;e++){var t="@right_icon_button_"+e;this.$id(t).addClass("hidden")}},_fixHeight:function(){var e;e=!this._height||this._height>window.innerHeight?window.innerHeight:this._height;var t=this.$id("@action_view_header").outerHeight();this.$getContainer().height(e),this.$getContent().height(e-t);var n=window.scrollY+(window.innerHeight-e);this.$getContainer().css("top",n+"px")},_lockScrollOnIOS:function(){var e=this.$getContent().get(0),t=this;t.startScroll=window.scrollY,this._handleTouchStart=function(e){t.allowUp=this.scrollTop>0,t.allowDown=this.scrollTop<this.scrollHeight-this.clientHeight,t.slideBeginY=e.pageY},e.addEventListener("touchstart",this._handleTouchStart),this._handleTouchMove=function(e){var n=e.pageY>t.slideBeginY,i=e.pageY<t.slideBeginY;t.slideBeginY=e.pageY,n&&t.allowUp||i&&t.allowDown?e.stopPropagation():e.preventDefault()},e.addEventListener("touchmove",this._handleTouchMove),this._cancelTouch=function(e){e.preventDefault()},document.body.addEventListener("touchmove",this._cancelTouch),this._iOSScrollHack=function(e){window.scrollTo(window.scrollX,t.startScroll)},window.addEventListener("scroll",this._iOSScrollHack)}});t.ActionViewOverlay=h.extend({onLoad:function(){var e=this;u=e,e.$id("@close_button").on("click",function(){window.history.back()})},_clearPageAction:function(){this.hideRightButtons(),this.setTitle("")},_getOpenAnimation:function(){return"action-view-slide-in"},_getHashName:function(){return"actionView"},setTitle:function(e){this.$id("@title").text(e)},setHeight:function(e){this._height=e,this._fixHeight()}}),t.getActionViewOverlay=function(){return u},t.isOverlayShown=function(){var e=!1;return[u].forEach(function(t){e|=t&&t.isShown}),e};var p=t.setPageAction=function(e){if(m[_]=e,u.isShown){var t=u;e.title&&t.setTitle(e.title),e.rightTextButton&&t.setRightTextButton(e.rightTextButton),e.rightIconButtons&&t.setRightIconButtons(e.rightIconButtons)}},f=0;t.moveElementToDiv=function(e,t){var n=document.createElement("div"),i="_movedElement_"+f++;n.id=i,e.parentElement&&e.parentElement.replaceChild(n,e),t.appendChild(e),e.setAttribute("_markerId",i)},t.moveElementBack=function(e){var t=e.getAttribute("_markerId"),n=document.getElementById(t);n?(n.parentElement.replaceChild(e,n),e.setAttribute("_markerId",undefined)):e.parentElement.removeChild(e)};var m={},_=-1,g=function(e){for(var t={},n=[e];n.length;){var i=n.pop();t[i]=!0;var o=s._allChildren[i];o&&Array.prototype.push.apply(n,o)}return delete t[e],Object.keys(t)};t.executeOnLoadForPrefetchedContent=function(e){var t=e.cid,n=g(t);if(_=t,e.getDvar("disableOnload")){e.setDvar("disableOnload",undefined);try{a.onLoadComponents(n,!1)}catch(e){d.report(e)}}else{var i=m[t];i&&p(i)}}},"./unified_view/modal.js":function(e,t,n){var i,o,r,s=n("./shared/core/component.js").Component,a=n("./shared/modal.js"),l=n("./shared/util.js"),d=n("./shared/client.js");PAGE_IS_MOBILE?(o=n("./mobile_app2/client.js"),r=n("./mobile_app2/messages.js")):i=n("./w2.modal.js"),t.ModalBase=s.extend({onLoad:function(){var e=this;this.$id("@close").on("click",function(t){t.preventDefault(),e.onClose()}),this.$id("@cancel").on("click",function(t){t.preventDefault(),e.onClose()}),this.$id("@submit").on("click",function(t){t.preventDefault(),e.onSubmit()}),PAGE_IS_MOBILE?this.onLoadMobile():this.onLoadWeb()},onLoadWeb:function(){var e=i.Modal.modalFor(this);if(e){this._originalClose=e.close.bind(e);var t=this;e.close=l.once(function(){e._isOpen&&t.onClose()})}},onLoadMobile:function(){this._initMobileDoneButton(!1),this._initMobileCancelButton()},_initMobileDoneButton:function(e){this.mobile_done_button&&(d.isNativeApp()?this.nativeSetPageAction(e):(this.$nav=this.$id("@nav"),this.$nav.text(this.done_text),this.$nav.addClass("is_done"),this.$nav.removeClass("hidden"),this.$nav.on("click",this._mobileOnSubmit.bind(this))),this.setMobileDoneButtonDisabled(e))},_initMobileCancelButton:function(){d.isNativeApp()&&o.registerOneTimeMessageHandler("closeNavigationButtonPressed",this.onClose.bind(this))},_mobileOnSubmit:function(){this._mobileDisabled||this.onSubmit()},setMobileDoneButtonDisabled:function(e){this._mobileDisabled=e,d.isNativeApp()?this.nativeSetPageAction(e):this.$nav.toggleClass("is_disabled",e)},nativeSetPageAction:function(e){d.isNativeApp()&&r&&r.send("setPageAction",{title:this.title_text,rightTextButton:{title:this.done_text,disabled:e,callback:this._mobileOnSubmit.bind(this)}})},close:function(){this._originalClose&&this._originalClose(),a.handleClose(this)},onClose:function(){this.close()},submit:function(e){a.handleSubmit(this,e)},onSubmit:function(e){this.submit(e),this.close()}}),t.FormModal=t.ModalBase.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.child("form").registerOnSubmitSuccess(function(){e.registerOnFormSubmitSuccessExtra(),e.submit(),e.close()})},registerOnFormSubmitSuccessExtra:function(){},onSubmit:function(){this.child("form").submitForm()}}),t.ModalNavItem=s.extend({onLoad:function(){var e=this;e.$tab=e.$id("@tab"),e.$tab.on("click",function(t){t.preventDefault(),e.triggerSwitchTab()}),e.handleSwitchTab()},triggerSwitchTab:function(){},handleSwitchTab:function(){}})},"./unified_view/multimodal.js":function(e,t,n){var i,o,r,s,a,l=n("./shared/core/component.js"),d=l.Component,c=n("./shared/util.js"),u=n("./shared/client.js"),h=n("./shared/util.js"),p=n("./shared/events/index.js"),f=n("./shared/jquery.js"),m=n("./shared/loading.js"),_=n("./shared/history_stack.js"),g=n("./shared/viewport.js"),v=n("./shared/Class.js").Class,b=n("./shared/visibility_state.js"),y=n("./settings.js"),w=n("./shared/window_manager.js"),E=n("./shared/client_log.js"),T=n("./shared/toast.js");PAGE_IS_MOBILE?(a=n("./mobile_app2/messages.js"),i=n("./mobile_app2/modals.js"),o=n("./mobile_app2/action_view.js"),r=n("./mobile_app2/view/page_wrapper.js")):s=n("./webnode2.js");var S=!0;u.isNativeApp()&&(S=!1,b.onChange(function(){S||(S=!0)})),t.redirectToDiscardableModal=function(e){PAGE_IS_MOBILE?window.setTimeout(function(){a.send("openURL",{url:e,target:"discardable_modal"})},500):w.navigateTo(e)};var C=t.redirectTo=function(e,t){PAGE_IS_MOBILE?window.setTimeout(function(){o.showFromUrl(e,t)},500):w.navigateTo(e)};t.openSingleModalStep=function(e,t){e.manager=new O(e,function(t){e.manager.popStep(),t.redirect&&C(t.redirect)}),e.manager.pushStep("single_step",t)};var x,k=t.Step=d.extend({__init__:function(){this._super.apply(this,arguments),this.data.prefetch_for_cloner&&!y.isClonedPage&&this.setDvar("disableOnload",!0)},onLoad:function(){var e=this;PAGE_IS_MOBILE&&u.isAndroidApp()&&this.handleEvent(p.Types.MULTIMODAL_DISMISS,function(t){t.payload.manager_id===e.manager_id&&a.send("dismissModal")}),PAGE_IS_MOBILE&&u.isNativeApp()&&this.handleEvent(p.Types.MULTIMODAL_NATIVE_BACK,function(t){t.payload.manager_id===e.manager_id&&e.back()}),u.isNativeApp()?(b.onChange(function(t){t&&e._onShow()}),e._onShow()):(PAGE_IS_MOBILE?(e.$submitButton=e.$id("@nav"),e.$backButton=e.$id("@back"),e.$submitButton.text(e.done_text),e.$submitButton.addClass("is_done"),e.$submitButton.removeClass("hidden"),e.data.noBack||e.$backButton.removeClass("hidden")):(e.$submitButton=e.$id("@submit"),e.$backButton=e.$id("@cancel"),e.$id("@close").on("click",function(t){t.preventDefault(),e.dismiss()})),e.$submitButton.on("click",function(t){t.preventDefault(),e.submit()}),e.$backButton.on("click",function(t){t.preventDefault(),e.data&&e.data.noBack?e.dismiss():e.back()})),l.registerAfterOnLoadCallback(function(){e.reportedLoad||(e.reportedLoad=!0,p.GlobalProxy.dispatch({type:p.Types.MULTIMODAL_LOADED,payload:{manager_id:e.manager_id,stepName:e.step_name,noBack:e.data.noBack,persistent:e.data.persistent}}))}),e.handleEvent(p.Types.MULTIMODAL_SHOW,function(t){t.payload.step_name===e.step_name&&t.payload.manager_id===e.manager_id&&e._onShow()})},onShow:function(){},_onShow:function(){this.submitManuallyDisabled||this._enableSubmit(),this.onShow()},disableSubmit:function(){this.submitManuallyDisabled=!0,this._disableSubmit()},_disableSubmit:function(){u.isNativeApp()?a.send("setPageAction",{title:this.title_text,rightTextButton:{title:this.done_text,disabled:!0}}):this.$submitButton.addClass("u-disabled"),this.submitDisabled=!0},enableSubmit:function(){this.submitManuallyDisabled=!1,this._enableSubmit()},_enableSubmit:function(){if(u.isNativeApp()){var e={title:this.title_text};this.show_mobile_done_button&&(e.rightTextButton={title:this.done_text,disabled:!1,callback:this.submit.bind(this)}),a.send("setPageAction",e)}else this.$submitButton.removeClass("u-disabled");this.submitDisabled=!1},submit:function(e){if(!this.submitDisabled){var t=this.getSubmitData();h.isPlainObject(e)&&(t=h.extend({},t,e)),p.GlobalProxy.dispatch({type:p.Types.MULTIMODAL_DONE,payload:{manager_id:this.manager_id,current_step:this.step_name,data:t}}),this._disableSubmit()}},back:function(){this.data.noBack||(u.isNativeApp()?b.isVisible()&&a.send("dismiss"):_.popState())},dismiss:function(){p.GlobalProxy.dispatch({type:p.Types.MULTIMODAL_DISMISS,payload:{manager_id:this.manager_id}})},getSubmitData:function(){return{}}});u.isNativeApp()||(x={stack:[],current:function(){return this.stack[this.stack.length-1]},push:function(e){if(0===this.stack.length)if(PAGE_IS_MOBILE)r.showPageWrapper("modal_page_wrapper");else{g.setPageScroll(!1);var t=I();t.removeClass("hidden"),t.on("click",this.overlayClick.bind(this))}else this.current().$currentWebStepWrapper().addClass("hidden"),this.removeExtraOverlayClasses(this.current());this.stack.push(e),this.addExtraOverlayClasses(this.current())},pop:function(){if(0!==this.stack.length)if(this.removeExtraOverlayClasses(this.current()),this.stack.pop(),0===this.stack.length)if(PAGE_IS_MOBILE)r.showPageWrapper("main_page_wrapper");else{g.setPageScroll(!0);var e=I();e.addClass("hidden"),e.off("click")}else this.addExtraOverlayClasses(this.current()),this.current().$currentWebStepWrapper().removeClass("hidden")},overlayClick:function(e){var t,n,i=I();if(e.target==i.get(0))for(n=this.stack.length-1;n>=0;n--){if(t=this.stack[n],!t.easyDismissEnabled)return;t.dismiss()}},addExtraOverlayClasses:function(e){var t=I(),n=e.extraOverlayClasses;n&&t.addClass(n)},removeExtraOverlayClasses:function(e){var t=I(),n=e.extraOverlayClasses;n&&t.removeClass(n)}});var A,I=function(){if(!A)if(PAGE_IS_MOBILE&&!u.isNativeApp())A=f("#modal_page_wrapper");else{var e=f("<div>");e.addClass("hidden modal_overlay"),A=e,PAGE_IS_MOBILE?f("#page_wrapper").after(e):f("#__w2_modal_container_").after(e)}return A},O=t.Manager=v.extend({easyDismissEnabled:!0,nativeDismissButtonEnabled:!0,extraOverlayClasses:"",dismissCallback:null,height:0,__init__:function(e,t,n){var i=this;i.component=e,i.transition=t,i.manager_id=n||c.randomId(),i.showNext=null,i.replaceNext=!1,i.isActionViewPresented=!1,i.loadedSteps={},i.pushedSteps=[],p.GlobalProxy.subscribe(p.Types.MULTIMODAL_DONE,function(e){e.payload.manager_id===i.manager_id&&i.transition(i,e.payload.current_step,e.payload.data)}),p.GlobalProxy.subscribe(p.Types.MULTIMODAL_LOAD,function(e){e.payload.manager_id===i.manager_id&&i.loadStep(e.payload.step,e.payload.data)}),p.GlobalProxy.subscribe(p.Types.MULTIMODAL_LOADED,function(e){e.payload.manager_id===i.manager_id&&i.onStepLoaded(e.payload)}),p.GlobalProxy.subscribe(p.Types.MULTIMODAL_DISMISS,function(e){e.payload.manager_id===i.manager_id&&i.onDismiss()}),!u.isNativeApp()&&x&&(p.GlobalProxy.subscribe(p.Types.MULTIMODAL_HIDE_ACTIVE_STEP,function(){i.manager_id===x.current().manager_id&&i.hideActiveStep()}),p.GlobalProxy.subscribe(p.Types.MULTIMODAL_UNHIDE_ACTIVE_STEP,function(){i.manager_id===x.current().manager_id&&i.unhideActiveStep()})),u.isNativeApp()&&!y.supportsPresentInNewContainer&&b.onChange(function(e){e&&i.onActionViewDismiss()})},onActionViewDismiss:function(){this.isActionViewPresented&&(this.isActionViewPresented=!1,this.dismissCallback&&this.dismissCallback())},onStepLoaded:function(e){var t=e.stepName,n=this.loadedSteps[t];n&&(n.noBack=e.noBack,n.persistent=e.persistent,u.isNativeApp()||t!==this.showNext||(this.hideLoading(),this._showStep(t),this.replaceNext&&this._removePreviousStep(),this.showNext=null,this.replaceNext=!1))},currentStepState:function(){return this.pushedSteps[this.pushedSteps.length-1]},$newStepWrapper:function(){var e=I(),t=f("<div>");t.addClass("modal_wrapper normal hidden"),e.append(t);var n=c.randomId();t.attr("id",n);var i=l.getLiveParent(this.component.cid);return E.associateParentChildDomIds(n,i),t},$currentWebStepWrapper:function(){return this.currentStepState().$div},loadStep:function(e,t){var n=this;if(!n.loadedSteps[e]){var i="load_step",o={manager_id:n.manager_id,step:e,data:t||{}};u.isNativeApp()&&(o.data.prefetch_for_cloner=!0);var r=n.$newStepWrapper();n.loadedSteps[e]={$div:r,stepName:e};var s={useLoadingSpinner:!1};u.isNativeApp()||(s.parentCid="*ROOT*"),n.component.serverCall(i).kwargs(o).contentFor(r,s).success(function(){n.loadedSteps[e].loadComplete=!0}).send()}},loadStepFromInline:function(e,t){var n=this.$newStepWrapper();n.append(t.children()),this.loadedSteps[e]={$div:n,stepName:e,loadComplete:!0}},_getStepComponent:function(e){var t,n,i=this.component.children();for(n=0;n<i.length;n++)if(t=i[n],t.step_name===e)return t;return null},isModalCurrentlyPresented:function(){return y.supportsPresentInNewContainer?this.isActionViewPresented:S&&!b.isVisible()},_pushStep:function(e,t,n){if(u.isNativeApp()){n&&(u.isAndroidApp()||y.buildNumber<1350)&&p.GlobalProxy.dispatch({type:p.Types.MULTIMODAL_PROXY_HACK,payload:{manager_id:this.manager_id,messageName:"hideAskToolbar",messageData:{}}});var r,s="load_step",l={manager_id:this.manager_id,step:e,data:t||{}},d=i.modalUrl(this.component.getHmac(),s,l,this.component),c=this.loadedSteps[e];r=c&&c.loadComplete?o.dataFromComponent(c.$div.children().get(0),this._getStepComponent(e),null,d):{url:d};var h="showActionView";n&&this.isModalCurrentlyPresented()?(r.target="reload",delete r.title,delete r.height,h="openURL"):(r.dragToDismiss=this.easyDismissEnabled,r.dismissable=this.nativeDismissButtonEnabled,r.tapBackgroundToDismiss=this.nativeDismissButtonEnabled,this.height&&(r.height=this.height)),this.isModalCurrentlyPresented()?p.GlobalProxy.dispatch({type:p.Types.MULTIMODAL_PROXY_HACK,payload:{manager_id:this.manager_id,messageName:h,messageData:r}}):(y.supportsPresentInNewContainer&&a.send("presentInNewContainer"),a.send(h,r,this.onActionViewDismiss.bind(this)),this.isActionViewPresented=!0)}else this.loadStep(e,t),this.loadedSteps[e].loadComplete?(this._showStep(e),n&&this._removePreviousStep()):(this.showLoading(),this.showNext=e,this.replaceNext=n)},pushStep:function(e,t){var n=t&&!!t.noBack;this._pushStep(e,t,n)},replaceStep:function(e,t){this._pushStep(e,t,!0)},alertStepShown:function(e){p.GlobalProxy.dispatch({type:p.Types.MULTIMODAL_SHOW,payload:{step_name:e,manager_id:this.manager_id}})},hideActiveStep:function(){this.pushedSteps.length>0&&this.currentStepState().$div.addClass("hidden")},unhideActiveStep:function(){this.pushedSteps.length>0&&this.currentStepState().$div.removeClass("hidden")},_showStep:function(e){if(this.pushedSteps.length>0){this.currentStepState().$div.addClass("hidden")}else x.push(this);var t=this.loadedSteps[e];t.$div.removeClass("hidden"),this.pushedSteps.push(t),_.pushState(this.popStep.bind(this)),this.alertStepShown(e)},showLoading:function(){if(PAGE_IS_MOBILE)a.send("showLoadingView");else{if(this.$desktopLoading)return;this.$desktopLoading=f("<div>"),this.$desktopLoading.addClass("multimodal_loading_overlay"),this.$desktopLoading.append(m.createDots()),0===this.pushedSteps.length?f(document.body).append(this.$desktopLoading):this.currentStepState().$div.append(this.$desktopLoading)}},hideLoading:function(){var e=this;if(PAGE_IS_MOBILE)a.send("hideLoadingView");else{if(!e.$desktopLoading)return;e.$desktopLoading.addClass("animate_out"),setTimeout(function(){e.$desktopLoading.remove(),delete e.$desktopLoading},200)}},popStep:function(){if(u.isNativeApp())p.GlobalProxy.dispatch({type:p.Types.MULTIMODAL_NATIVE_BACK,payload:{manager_id:this.manager_id}});else{if(!this.currentStepState()||this.currentStepState().noBack)return;this.hideLoading();var e=this.currentStepState();if(e.$div.addClass("hidden"),this.pushedSteps.pop(),0===this.pushedSteps.length)return void this.dismiss();var t=this.currentStepState();this.alertStepShown(t.stepName),t.$div&&t.$div.removeClass("hidden"),e.persistent||this.unloadStep(e.stepName)}},_removePreviousStep:function(){var e=this.pushedSteps.length-2,t=this.pushedSteps[e];t&&(this.pushedSteps.splice(e,1),t.persistent||this.unloadStep(t.stepName))},unloadStep:function(e){var t=this.loadedSteps[e],n=t.$div;PAGE_IS_MOBILE||s.forgetContents(n);var i=l.getLiveParent(this.component.cid);E.removeParentChildAssociation(n.attr("id"),i);var o=this._getStepComponent(e);o&&o.cid&&l.unloadComponent(o.cid),n.remove(),delete this.loadedSteps[e]},dismiss:function(){p.GlobalProxy.dispatch({type:p.Types.MULTIMODAL_DISMISS,payload:{manager_id:this.manager_id}})},onDismiss:function(){if(PAGE_IS_MOBILE&&u.isNativeApp())u.isAndroidApp()||a.send("dismissModal");else{this.dismissCallback&&this.dismissCallback(),this.pushedSteps.length>0&&this.currentStepState().$div.addClass("hidden"),x.pop(),_.skipBack(this.pushedSteps.length),this.pushedSteps=[];for(var e in this.loadedSteps)this.loadedSteps[e].persistent||this.unloadStep(e)}}});t.Demo=d.extend({onLoad:function(){var e=this,t=new O(e,function(e,t,n){"1"===t?e.pushStep("2",{}):"2"===t&&e.dismiss()});t.dismissCallback=function(){T.show(t.manager_id+" dismissed!")},e.child("load").$id("@cell").on("click",function(){t.loadStep("1",{})}),e.child("present").$id("@cell").on("click",function(){t.pushStep("1",{})})}}),t.InlineDemo=d.extend({onLoad:function(){var e=this,t=new O(e,function(e,t,n){"1"===t?e.pushStep("2",{}):"2"===t&&e.dismiss()},"inlinedemo");t.loadStepFromInline("1",e.$id("@content")),e.child("present").$id("@cell").on("click",function(){t.pushStep("1",{}),t.loadStep("2",{})})}}),t.NUXDemo=d.extend({onLoad:function(){new O(this,function(e,t,n){"1"===t?e.pushStep("2",{}):"2"===t&&w.navigateTo("https://www.google.com")},"inlinedemo").loadStep("2",{})}}),t.SlowDemo=d.extend({onLoad:function(){var e=this,t=new O(e,function(e,t,n){"1"===t?e.pushStep("2",{slow:!0}):"2"===t&&e.dismiss()});e.child("present").$id("@cell").on("click",function(){t.pushStep("1",{slow:!0})})}}),t.IntermediateStepDemo=d.extend({onLoad:function(){var e=this,t=new O(e,function(e,t,n){"1"===t?e.pushStep("2",{}):"2"===t?e.replaceStep("3",{}):"3"===t&&e.dismiss()});t.easyDismissEnabled=!1,e.child("present").$id("@cell").on("click",function(){t.pushStep("1",{})})}}),t.DemoStep1=k.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.child("load").$id("@cell").on("click",function(){p.GlobalProxy.dispatch({type:p.Types.MULTIMODAL_LOAD,payload:{manager_id:e.manager_id,step:"2",data:{}}})})}}),t.DemoStep2=k.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.child("back").$id("@cell").on("click",function(){e.back()})}}),t.ServerCallStep=k.extend({submit:function(){var e=this;this._super.apply(this,arguments),setTimeout(function(){e.$id("@hidden_message").removeClass("hidden")},3e3)}})},"./unified_view/paged_list.js":function(module,exports,__webpack_require__){var Component=__webpack_require__("./shared/core/component.js").Component,coreComponent=__webpack_require__("./shared/core/component.js"),$=__webpack_require__("./shared/jquery.js"),debounce=__webpack_require__("./shared/debounce.js").debounce,events=__webpack_require__("./shared/events/index.js"),scrollAnimationHandler=__webpack_require__("./shared/scroll_animation_handler.js"),loading=__webpack_require__("./shared/loading.js"),perf=__webpack_require__("./shared/perf.js"),util=__webpack_require__("./shared/util.js"),context=__webpack_require__("./shared/w2.context.js"),viewport=__webpack_require__("./shared/viewport.js"),fx=__webpack_require__("./shared/fx.js"),webnode=__webpack_require__("./shared/core/webnode.js"),messages,client,mwebPageWrapper;PAGE_IS_MOBILE&&(messages=__webpack_require__("./mobile_app2/messages.js"),client=__webpack_require__("./mobile_app2/client.js"),mwebPageWrapper=__webpack_require__("./mobile_app2/view/page_wrapper.js")),exports.PagedList=Component.extend({spinner:null,resyncIndex:null,updatedHashesDuringResync:null,elementsToDelete:null,scrollHandler:null,pagingInProgress:!1,onLoad:function(){var e=this;this.loaded=!0,this.$paged_list=this.$id("@paged_list"),this.$wrapper=this.$id("@paged_list_wrapper"),this.$container=this.$getContainer(),this.$spinnerDisplayArea=this.$id("@spinner"),this.$resyncButton=this.$id("@resync"),this.$resyncButtonWrapper=this.$id("@resync_wrapper"),this.$resyncButton.on("click",this.resyncButtonPressed.bind(this)),this.$moreButton=this.$id("@more"),this.$moreButton.on("click",this.moreButtonPressed.bind(this));var t=this.getContext(context.HoverMenu);t?(this.inHoverMenu=!0,t.on("isShown",this.onContextVisiblityChange.bind(this)),this.contextIsVisible=t.get("isShown")):(this.contextIsVisible=!0,this.inHoverMenu=!1),this.setupPaging(),this.maybeRetargetLinks(),this.has_more&&this.enable_mobile_hide_content&&this.mapOverNodesBelowList(function(e){$(e).addClass("paged_list_hidden_footer")}),PAGE_IS_MOBILE&&(client.registerMessageHandler("newStoriesButtonTapped",this.resyncButtonPressed.bind(this)),mwebPageWrapper.onChange(function(t){"main_page_wrapper"===t&&e.pagingInProgress?e.showLoading():"modal_page_wrapper"===t&&e.hideLoading()})),this.debug_show_resync&&this.showResyncButton()},onContextVisiblityChange:function(e,t){this.contextIsVisible=t,this.contextIsVisible||null===this.resyncIndex||this.performResync(),this.scrollHandler&&this.scrollHandler()},isVisible:function(){return this.aggressively_page_and_stop_when_hidden?viewport.isElementInViewport(this.$wrapper.get(0)):this.contextIsVisible},$getContainer:function(){var e=util.firstScrollingParent(this.$wrapper.get(0));return e===document.body&&(e=window),$(e)},getContainerBottom:function(){return this.$container.height()+this.$container.scrollTop()},setScrollHandler:function(e){null!==this.scrollHandler&&this.$container.off("scroll",this.scrollHandler),null!==e&&this.$container.on("scroll",e),this.scrollHandler=e},setupPaging:function(){this.has_more?this.auto_paged?(this.bindAutoPaging(),this.$moreButton.addClass("hidden"),this.showLoading()):(this.hideLoading(),this.$moreButton.removeClass("hidden")):this.onPagingDone()},calculateAutoPageHeight:function(){var e=this.getContainerBottom(),t=this.$wrapper.height(),n=.1*(t-e)+e-100,i=t-4e3;return this.aggressively_page_and_stop_when_hidden?t-3e3:Math.max(n,i)},bindAutoPaging:function(){var e=this,t=function(){var t=e.calculateAutoPageHeight();e.getContainerBottom()>=t&&e.isVisible()&&(e.setScrollHandler(null),e.bindAutoPagePerfLogging(),e.requestNextPage())},n=debounce(t,200,{leading:!0,maxWait:500});e.setScrollHandler(n),t()},bindAutoPagePerfLogging:function(){var e=this,t=debounce(function(){e.getContainerBottom()>e.$wrapper.height()&&(e.setScrollHandler(null),e.startUserPerceivedAction())},50,{leading:!0});e.setScrollHandler(t),t()},requestNextPage:function(e){var t=this;if(!t.pagingInProgress){if(t.replacementInProgress)return t.pageRequestWaiting=!0,void(t.highlightOnAppend=e);t.pageRequestWaiting=!1,t.pagingInProgress=!0,t.serverCall("get_updates").kwargs({paged_list_parent_cid:t.parent().cid,client_hashes:t.hashes,force_cid:t.cid,domids_to_remove:t.domIdsToDelete(),replacement:!1}).success(function(n){t.pagingInProgress=!1,t.appendPage(n,e),t.checkForUpdateWaiting()}).error(function(){t.pagingInProgress=!1,t.onPagingDone(!0),t.checkForUpdateWaiting()}).send()}},checkForUpdateWaiting:function(){this.replacementWaiting?this.requestReplacement():this.pageRequestWaiting&&this.requestNextPage(this.highlightOnAppend)},requestReplacement:function(){var e=this;if(e.pagingInProgress||e.replacementInProgress)return void(e.replacementWaiting=!0);e.replacementWaiting=!1,e.replacementInProgress=!0,e.serverCall("get_updates").kwargs({paged_list_parent_cid:e.parent().cid,client_hashes:e.hashes,force_cid:e.cid,domids_to_remove:e.domIdsToDelete(),replacement:!0}).success(function(t){e.replacementInProgress=!1,e.replaceNodes(t),e.checkForUpdateWaiting()}).error(function(){e.replacementInProgress=!1,e.checkForUpdateWaiting()}).send()},domIdsToDelete:function(){for(var e=[],t=this.elementsToDelete||[],n=0;n<t.length;n++)e.push(t[n].id);return e},startUserPerceivedAction:function(){this.userPerceivedAction||(this.userPerceivedAction=perf.startUserPerceived({hmac:this.getHmac(),method:"get_next_page"}))},finishUserPerceivedAction:function(){this.startUserPerceivedAction(),perf.finishAction(this.userPerceivedAction),this.userPerceivedAction=null},replaceNodes:function(e){var t=this,n=0,i=this.$wrapper.get(0);if(this.hashes.forEach(function(t,o){if(-1==e.hashes.indexOf(t)){var r=i.children[o-n],s=coreComponent.getComponentFromElement(r);i.removeChild(r),coreComponent.unloadComponent(s.cid),n++}}),e.html){var o=util.documentFragmentFromString(e.html);e.hashes.forEach(function(e,n){if(-1==t.hashes.indexOf(e)){var r=o.children[0];n<i.children.length?i.insertBefore(r,i.children[n]):i.appendChild(r)}}),t.replaceUpdater(o.children[o.children.length-1]),webnode.evaluateContentJS(e)}this.hashes=e.hashes,!0===e.has_more&&!1===this.has_more&&(this.has_more=!0,this.setupPaging())},replaceUpdater:function(e){var t=this.child("invisible_updater");coreComponent.unloadComponent(t.cid);var n=this.$id("@invisible_updater_wrapper").get(0);n.removeChild(n.children[0]),n.appendChild(e)},appendPage:function(data,highlight){if(this.loaded){var fragment=util.documentFragmentFromString(data.html),originalNumItems=this.hashes.length,W2,item;if(this.auto_update){var newUpdater=fragment.children[fragment.children.length-1];fragment.removeChild(newUpdater),this.replaceUpdater(newUpdater)}this.has_more=data.has_more,this.hashes=this.hashes.concat(data.hashes),this.$wrapper.get(0).appendChild(fragment),PAGE_IS_MOBILE||(W2=__webpack_require__("./webnode2.js")),eval(data.js),null===this.scrollHandler?this.finishUserPerceivedAction():this.setScrollHandler(null),this.removeComponentsToDelete(),this.setupPaging(),this.handleModelUpdates(this.updatedHashesDuringResync),highlight&&!PAGE_IS_MOBILE&&(item=this.$wrapper.get(0).children[originalNumItems],0!==originalNumItems&&fx.highlight(item,2e3))}},showLoading:function(){PAGE_IS_MOBILE&&!this.aggressively_page_and_stop_when_hidden?mwebPageWrapper.isActive("main_page_wrapper")&&client.showNextPageIndicator():(null===this.spinner&&(this.spinner=loading.createDots(),this.$spinnerDisplayArea.append(this.spinner)),this.$spinnerDisplayArea.removeClass("hidden"))},hideLoading:function(){PAGE_IS_MOBILE&&!this.aggressively_page_and_stop_when_hidden?client.hideNextPageIndicator():this.$spinnerDisplayArea.addClass("hidden")},onPagingDone:function(e){this.hideLoading(),e?(this.$moreButton.removeClass("hidden"),this.resyncIndex&&window.location.href.reload()):this.hashes.length>0&&this.$id("@footer").removeClass("hidden"),this.enable_mobile_hide_content&&this.mapOverNodesBelowList(function(e){$(e).removeClass("paged_list_hidden_footer")})},handleModelUpdates:function(e){if(e&&!this.auto_update){if(null!==this.elementsToDelete)return void(this.updatedHashesDuringResync=e);this.updatedHashesDuringResync=null;var t=firstNewItemIndex(this.hashes,e);return null===t?void this.hideResyncButton():t>=this.hashes.length?(!1===this.has_more&&(this.has_more=!0,this.setupPaging()),void this.hideResyncButton()):(this.resyncIndex=t,this.resyncIndexIsBelowViewport()?void this.performResync(!1):void this.showResyncButton())}},$getChildAtIndex:function(){var e=this.$wrapper.get(0),t=e.children[this.resyncIndex];return $(t)},resyncIndexIsBelowViewport:function(){return!this.isVisible()||null!==this.resyncIndex&&this.$getChildAtIndex(this.resyncIndex).offset().top>this.getContainerBottom()},performResync:function(e){if(this.hideResyncButton(),null!==this.resyncIndex){if(PAGE_IS_MOBILE||this.emitEvent({type:events.Types.LIVENODE_LOADING_SPINNER,payload:{show:!0}}),this.$paged_list.addClass("resyncing"),e&&this.resyncIndex<this.hashes.length){var t=this.$getChildAtIndex(this.resyncIndex),n=0;this.$container.get(0)!==window&&(n=this.$container.offset().top);var i=200,o=t.offset().top-n-i;this.$container.scrollTop(o)}this.markComponentsToDelete(this.resyncIndex),this.resyncIndex=null,this.requestNextPage(!0)}},showResyncButton:function(){var e=this,t=e.$container.get(0);if(PAGE_IS_MOBILE)return void messages.send("updateNewStoriesButton",{visible:!0,text:e.resync_button_text,use_new_ui:e.use_new_ui});if(!e.inHoverMenu){e.$resyncButtonWrapper.removeClass("hidden");var n=function(n){var i,o,r;t===window?(i=viewport.siteHeaderHeight(),o=e.$wrapper.offset().top):(i=0,o=0),r=o+e.$wrapper.height()-2*e.$resyncButton.height(),n+=i,n<o?e.$resyncButtonWrapper.css("position","absolute").css("top",0).css("width","100%"):r<n?e.$resyncButtonWrapper.css("position","absolute").css("top",r-o).css("width","100%"):e.$resyncButtonWrapper.css("position","fixed").css("top",i).css("width",e.$wrapper.width())};e.resyncButtonScrollCallback=scrollAnimationHandler.add(t,n)}},hideResyncButton:function(){if(!this.debug_show_resync){if(PAGE_IS_MOBILE)return void messages.send("updateNewStoriesButton",{visible:!1});this.resyncButtonScrollCallback&&(this.$resyncButtonWrapper.addClass("hidden"),this.$container.off("scroll",this.resyncButtonScrollCallback))}},resyncButtonPressed:function(){this.performResync(!0)},markComponentsToDelete:function(e){this.hashes=this.hashes.slice(0,e);var t,n,i=this.$wrapper.get(0),o=i.children;for(this.elementsToDelete=[],n=e;n<o.length;n++)t=o[n],this.elementsToDelete.push(t)},removeComponentsToDelete:function(){var e,t,n,i=this.$wrapper.get(0),o=this.elementsToDelete||[];for(this.elementsToDelete=null,n=0;n<o.length;n++)e=o[n],t=coreComponent.getComponentFromElement(e),t&&coreComponent.unloadComponent(t.cid),i.removeChild(e);o&&(PAGE_IS_MOBILE||events.DocumentProxy.dispatch({type:events.Types.LIVENODE_LOADING_SPINNER,payload:{show:!1}}),this.$paged_list.removeClass("resyncing"))},moreButtonPressed:function(){this.$moreButton.addClass("hidden"),this.showLoading(),this.requestNextPage()},maybeRetargetLinks:function(){this.retarget_links&&this.$id("@paged_list_wrapper").on("click","a",function(e){var t=window.location.protocol+"//"+window.location.host+window.location.pathname;e.currentTarget.href.replace(t,"").startsWith("#")||(e.currentTarget.target="_blank")})},mapOverNodesBelowList:function(e){var t=this.$spinnerDisplayArea.get(0);if(t)for(;t;)if(e(t),t.nextSibling)t=t.nextSibling;else{if(!t.parentNode||"main_page_wrapper"==t.parentNode.id)break;t=t.parentNode.nextSibling}},forceResync:function(e){e=e||0,this.resyncIndex=e,this.setScrollHandler(null),this.performResync(!0)},onUnload:function(){this.loaded=!1,this.setScrollHandler(null),this.onPagingDone()}}),exports.InvisibleUpdater=Component.extend({onLoad:function(e){e||this.parent().handleModelUpdates(this.hashes)},requestReplacement:function(){var e=this.parent();return!!e.auto_update&&(e.requestReplacement(),!0)}});var firstNewItemIndex=exports.firstNewItemIndex=function(e,t){var n,i={};for(n=0;n<e.length;n++)i[e[n]]=!0;for(n=0;n<t.length;n++)if(!i[t[n]])return n;return null}},"./unified_view/qtext2/editor/mobile.js":function(e,t,n){var i,o,r=n("./shared/client.js"),s=n("./unified_view/modal.js").ModalBase,a=n("./qtext2/ui.js"),l=n("./shared/debounce.js").debounce,d=n("./shared/window_manager.js"),c=n("./shared/events/index.js"),u=n("./shared/toast.js"),h=n("./settings.js"),p=n("./shared/log_sender.js"),f=n("./shared/util.js"),m=n("./shared/client_log.js"),_=n("./shared/core/component.js"),g=_.Component,v=n("./shared/upload.js");PAGE_IS_MOBILE&&(i=n("./mobile_app2/client.js"),o=n("./mobile_app2/messages.js")),t.EditorModal=s.extend({onLoad:function(){this._super.apply(this,arguments),t.activeEditor=this,this._setupEditor();var e=this;n.e("qtext2").then(function(){r.isNativeApp()&&(o.send("setupEditor",{hasDraft:!!e.has_draft}),o.send("restoreState",{key:e.key})),r.isIOSApp()||e.focus()}.bind(null,n))["catch"](n.oe)},_setupEditor:function(){var e=this;if(this.editor=this.child("editor"),this.editor.setFocusCallback(function(){t.activeEditor=e}),this.has_draft){var n=l(this.autoSaveDraft.bind(this),750,{maxWait:1e4,leading:!0});this.editor.setMeaningfulChangeCallback(function(){n()})}else this.editor.setMeaningfulChangeCallback(this.saveState.bind(this))},focus:function(){this.editor.focus()},getState:function(){return this.editor.serialize()},getVideos:function(){return this.editor.getVideos()},saveState:function(){if(r.isNativeApp()){var e=this.getState();f.jsonEqual(this.getState(),this.lastSavedState)||(o.send("saveState",{key:this.key,value:e}),this.lastSavedState=e)}},restoreState:function(e){var t=this;this.editor.setEditorReadyCallback(function(){t.editor.doc.fromJSON(e)})},_onDraftSaveSuccess:function(){o.send("draftSaveComplete",{success:!0})},_onDraftSaveError:function(){o.send("draftSaveComplete",{success:!1})},_onDraftClearSuccess:function(){o.send("draftClearComplete",{key:this.key,success:!0})},_onDraftClearError:function(){o.send("draftClearComplete",{key:this.key,success:!1})},_saveDraftServerCall:function(e){var t={oid:this.oid,content:this.getState(),is_auto_saved:e};return this.extra_kwargs&&this.extra_kwargs.tribe_id&&(t.tribe_id=this.extra_kwargs.tribe_id),this.serverCall("save_draft").kwargs(t)},autoSaveDraft:function(){this.saveState(),this._saveDraftServerCall(!0).send()},saveDraft:function(){this.saveState(),this._saveDraftServerCall(!1).success(this._onDraftSaveSuccess.bind(this)).error(this._onDraftSaveError.bind(this)).send()},clearDraft:function(){o.send("showLoadingView"),this.serverCall("clear_draft").kwargs({oid:this.oid}).success(this._onDraftClearSuccess.bind(this)).error(this._onDraftClearError.bind(this)).send()},_beforeSubmit:function(){this.__submitPending=!0,r.isIOSApp()?o.send("showProgressBar"):o.send("showLoadingView");var e=this;this._doneButtonIntervalId=null,r.isAndroidApp()?this._doneButtonIntervalId=setInterval(function(){e.setMobileDoneButtonDisabled(!0)},30):this.setMobileDoneButtonDisabled(!0)},_afterSubmit:function(e){this.__submitPending=!1,r.isIOSApp()?o.send("hideProgressBar",{complete:!!e}):o.send("hideLoadingView"),this.setMobileDoneButtonDisabled(!1),r.isAndroidApp()&&(clearInterval(this._doneButtonIntervalId),o.send("saveState",{key:this.key,value:{}})),"AddCommentModal"==this.modal_type&&"answer"==this.extra_kwargs.comment_type?m.logEvent("AddAnswerComment",_.getAnyElement(this)):"WriteAnswerModal"==this.modal_type&&m.logEvent("AddAnswer",_.getAnyElement(this),{qid:this.oid})},onSubmit:function(){if(!this.__submitPending){var e=Date.now();this._beforeSubmit();var t=this,n=this._super.bind(this);this._preOnSubmitChecks(function(){t.serverCall("submit").kwargs({oid:t.oid,content:t.getState(),extra_kwargs:t.extra_kwargs}).success(function(i){t._afterSubmit(!0),i.success&&n(i),i.redirect_url&&d.navigateTo(i.redirect_url),i.unconfirmed_email&&t.createModal("load_unconfirmed_email_modal").show();var o=Date.now()-e;r.isNativeApp()||p.log("modal_speed",{modal_type:t.modal_type,after_server_call:o})}).error(t._handleError.bind(t)).sendOnlyOnce()})}},_handleError:function(){this._afterSubmit(!1)},onClose:function(){if(r.isMobileWeb()&&v.isVideoUploadInProgress())return void this.editor.alertUploadInProgress();this._super.apply(this,arguments)},_preOnSubmitChecks:function(e){if(!h.qtextData.videoEnabled)return void e();var t=h.qtextData.videoEditorSupported,n=this.getVideos();if(0==n.length)return void e();if(v.isVideoUploadInProgress())return this.editor.alertUploadInProgress(),void this._handleError();if(!t&&0!=n.length)return this._handleError(),void u.showError(h.qtextData.cantSubmitVideo);if(r.isMobileWeb()&&h.debug)return void e();var i=this;o.send("getExistingVideos",{},function(t){var r={};if((t.videos||[]).forEach(function(e){r[e.uuid]=e}),!n.every(function(e){return r[e]}))return i._handleError(),void u.showError(h.qtextData.cantSubmitVideo);o.send("uploadVideos",{videoUuids:n},function(t){if(t.success)return void e();i._handleError()})})}}),t.WriteAnonAnswerModal=t.EditorModal.extend({onLoad:function(){this._super.apply(this,arguments),this.handleEvent(c.Types.ANON_LINK_SAVED,function(e){d.removeURLParam("show_alert")})},onSubmit:function(){var e=this._super.bind(this);d.isParamInURL("show_alert")?this.createModal("load_modal").kwargs({oid:this.oid,anon_content_key:this.extra_kwargs.anon_content_key}).onClose(function(){e()}).show():e()},submit:function(e){m.logEvent("AddAnswer",_.getAnyElement(this),{qid:e.qid}),r.isMobileWeb()?d.navigateTo(e.next_url):(this.close(),this.emitEvent({type:c.Types.ANON_ACTION_VIEW_DISMISSED,scope:c.scope.GLOBAL,payload:{nextUrl:e.next_url,oid:this.oid,checkOid:!0}}))}}),t.DualEditorModal=t.EditorModal.extend({_setupEditor:function(){var e=this;this.title_editor=this.child("title"),this.details_editor=this.child("details"),this.isTitleOverLimit=!1,this.isDetailsOverLimit=!1,this.lastFocusedEditor=null,this.title_editor.setFocusCallback(function(){t.activeEditor=e,e.lastFocusedEditor=e.title_editor}),this.details_editor&&this.details_editor.setFocusCallback(function(){t.activeEditor=e,e.lastFocusedEditor=e.details_editor}),this.title_editor.setMeaningfulChangeCallback(this.saveState.bind(this)),this.details_editor&&this.details_editor.setMeaningfulChangeCallback(this.saveState.bind(this)),this.title_length_limit&&this.title_editor.setLengthChangeCallback(function(t){e.isTitleOverLimit=t,e.updateButton()}),this.details_editor&&this.details_length_limit&&this.details_editor.setLengthChangeCallback(function(t){e.isDetailsOverLimit=t,e.updateButton()})},updateButton:function(){this.setMobileDoneButtonDisabled(this.isTitleOverLimit||this.isDetailsOverLimit)},focus:function(){var e=this;this.title_editor.setEditorReadyCallback(function(){var t=document.activeElement;e.title_editor.doc.contains(t)||e.details_editor.setEditorReadyCallback(function(){e.details_editor.doc.contains(t)||(null===e.lastFocusedEditor?e.title_editor.focus():e.lastFocusedEditor.focus())})})},getState:function(){return{title:this.title_editor.serialize(),details:this.details_editor?this.details_editor.serialize():""}},getVideos:function(){return[]},restoreState:function(e){var t=this;this.title_editor.setEditorReadyCallback(function(){t.title_editor.doc.fromJSON(e.title)}),this.details_editor&&this.details_editor.setEditorReadyCallback(function(){t.details_editor.doc.fromJSON(e.details)})}}),t.LinkSelectorModal=s.extend({onLoad:function(){this._super.apply(this,arguments),o.send("showSearchInput",{searchPlaceholderText:this.interface_strings.search_placeholder,searchFocus:!0,searchCancelButton:!1}),this.cleanUpCallback=this.close.bind(this),i.registerOneTimeMessageHandler("addLinkSelectorPressed",this.cleanUpCallback)},onUnload:function(){i.removeOneTimeMessageHandler("addLinkSelectorPressed",this.cleanUpCallback)}}),t.LinkSelector=a.LinkSelector.extend({__init__:function(e){var t=this;this._super(e),this._handleAddLink=function(e){t.submit(e)}},show:function(e){this.bindAddLinkHandler(),this.toolbar.createModal("load_link_selector").onClose(this.cancel.bind(this)).show(),this.active=!0,this.key=e||""},bindAddLinkHandler:function(){i.removeOneTimeMessageHandler("addLinkSelectorPressed",this._handleAddLink),i.registerOneTimeMessageHandler("addLinkSelectorPressed",this._handleAddLink)},cleanUpModal:function(){r.isMobileWeb()&&this.isActive()&&o.send("hideSearchInput")},submit:function(e){this._onSubmitCallback&&this._onSubmitCallback({text:e.text,url:e.url})},cancel:function(){this._onCancelCallback&&setTimeout(this._onCancelCallback.bind(this,this.key),0)},hide:function(){this.cleanUpModal(),this._super()}}),t.TranslateAnswerModal=t.EditorModal.extend({onSubmit:function(){var e=this;e.$question_editor=e.$id("@question_editor"),e.answer_editor=e.child("editor");var t=e.$question_editor.val();e.extra_kwargs={question_text:t,target_nid:e.target_nid,source_nid:e.source_nid,source_qid:e.source_qid,source_aid:e.source_aid,existing_qid:e.existing_qid},e._super.apply(e,arguments)}}),t.LanguageAndInputBanner=g.extend({onLoad:function(){var e=this;this.child("close").onPressed(function(){e.$id("@banner_wrapper").addClass("hidden")})}}),t.activeEditor=null},"./unified_view/qtext2/toolbar.js":function(e,t,n){var i,o=n("./shared/core/component.js").Component,r=n("./shared/jquery.js"),s=n("./shared/scroll_animation_handler.js"),a=n("./qtext2.js"),l=n("./qtext2/keys.js"),d=n("./qtext2/shortcuts.js").SHORTCUTS,c=n("./qtext2/util.js").Util,u=n("./shared/util.js"),h=n("./qtext2/tooltip.js"),p=n("./settings.js");PAGE_IS_MOBILE&&(i=n("./mobile_app2/messages.js"));var f=o.extend({onLoad:function(){this._barIdx=1},on:function(e,t){this._handlers=this._handlers||[],this._handlers[e]=t},trigger:function(e,t){this._handlers[e]&&this._handlers[e](t)},makeActive:function(e){this.showBar(1),this._doc=e,this._startUpdating(),t.activeToolbar=this},makeInactive:function(){this._doc=null,this._updating=!1,t.activeToolbar=null},showBar:function(e){this._barIdx<e?this._animation="up":this._barIdx>e?this._animation="down":this._animation="",this._barIdx=e},_startUpdating:function(){var e=this;if(this.currentState=null,!this._updating){this._updating=!0;var t=function(){setTimeout(function(){e._doc&&(e.update(e._doc.getToolbarState(e._barIdx),e._animation),e._animation=!1,e.updateStateRequestId&&cancelAnimationFrame(e.updateStateRequestId),e.updateStateRequestId=requestAnimationFrame(t))},167)};t()}},update:function(e,t){u.jsonEqual(e,this.currentState)||(this._update(e,t),this.currentState=e)},_update:null});t.Web=f.extend({onLoad:function(){this._super.apply(this,arguments),this.$linkInput=this.$id("@link_input"),this.$linkSave=this.$id("@link_save"),this.$isCitation=this.$id("@is_citation"),this.buttons.forEach(this.bindButtonEvents.bind(this)),this.bindLinkInput(),this.fix()},bindButtonEvents:function(e){this._bindButtonClick(e),this._bindButtonTooltip(e)},_bindButtonClick:function(e){var t="image"==e||"video"==e?"click":"touchstart mousedown",n=this;this.$id("@"+e).on(t,function(){return h.hide(),n.trigger("click",e),!1})},_bindButtonTooltip:function(e){this.$id("@"+e).on("mouseenter",function(){var t,n=this.getAttribute("tooltip");for(t in d)if(d[t]==e){n+=" ("+l.getShortcutHint(t)+")";break}h.show(this,n)}),this.$id("@"+e).on("mouseout",function(){h.hide()})},bindLinkInput:function(){var e=this;this.$linkSave.on("click",function(){return e._triggerLinkInput(),!1}),this.$linkInput.on("keydown",function(t){13==t.which?(t.preventDefault(),t.stopPropagation(),e._triggerLinkInput()):27==t.which&&(t.preventDefault(),t.stopPropagation(),e.$linkInput.val(""),e._triggerLinkInput())})},_triggerLinkInput:function(){this.trigger("linkInput",{url:this.$linkInput.val(),isCitation:this.$isCitation.prop("checked")}),this.$linkInput.val(""),this.$isCitation.prop("checked",!1)},_update:function(e,t){var n,i=this,o=this.$id("@bar"+this._barIdx),r=i.$id("@storage"),s=o.children(".left"),a=i.$id("@scroller");o.find(".modifier").each(function(e,t){r.append(t)}),e.forEach(function(e){"space"==e.name?s=o.children(".right"):(n=i.$id("@"+e.name),e.disabled?(n.removeClass("pressed"),n.addClass("disabled")):e.pressed?(n.removeClass("disabled"),n.addClass("pressed")):(n.removeClass("disabled"),n.removeClass("pressed")),s.append(n),e.focused&&n.focus())}),t?a.addClass("animate"):a.removeClass("animate"),a.css("top",100*-this._barIdx+"%")},setLinkToolbarStatus:function(e,t){this.$linkInput.val(e),this.$isCitation.prop("checked",!!t),this.$linkSave.text(e?"Update":"Add")},fix:function(){var e=this.$id("@toolbar"),t=e.parent(),n=c.firstScrollingParent(e.get(0)),i=e.parents(".modal_content")[0],o=r(".SiteHeader").height();0===r(".is_zen").length&&n===document.body||(o=0);var a=function(s){var a=t.offset().top-o,l=this;n===document.body?a-=s:a-=r(n).offset().top;var d=a+t.height()-2*e.height();(!l.max_modal_height||l.max_modal_height&&!i)&&(a<0&&d>0?e.css("position","fixed").css("top",o).css("left",t.offset().left).css("width",t.width()).css("-webkit-transform","translateZ(0)"):e.css("position","absolute").css("top",0).css("left",0).css("width","").css("-webkit-transform",""))};n===document.body?s.add(window,a):s.add(n,a)}}),t.activeToolbar=null;var m;t.MobileWebShim=t.Web.extend({onLoad:function(){this._super.apply(this),m=this},_bindButtonTooltip:function(e){},trigger:function(e,t){a.handleToolbarAction(e,t)},fix:function(){}}),t.updateMobileWebShim=function(e){if(m){for(var t=1,n=0;n<e.buttons.length;n++){if("link_input"==e.buttons[n].name){t=0;break}if("undo"==e.buttons[n].name){t=2;break}}m.showBar(t),m.update(e.buttons,e.animation)}},t.Mobile=f.extend({_update:function(e,t){var n={buttons:e,animation:t};p.tabbedEditorToolbar&&(n.tabbed=!0),i.send("updateToolbar",n)},_buttonExistsAndEnabled:function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(i.name==e)return!i.disabled}return!1}})},"./unified_view/question/ask_multi_modal.js":function(e,t,n){var i,o=n("./shared/events/index.js"),r=n("./unified_view/multimodal.js").Step,s=n("./unified_view/multimodal.js").redirectTo,a=n("./unified_view/multimodal.js").redirectToDiscardableModal,l=n("./shared/client.js"),d=n("./interface/settings.js"),c=n("./shared/window_manager.js"),u=n("./unified_view/multimodal.js").Manager,h=n("./unified_view/button/multi_state_button.js").MultiStateMenu,p=n("./shared/util.js"),f=n("./qtext2/util.js").Util,m=n("./unified_view/button/base.js").ButtonBase,_=n("./shared/core/component.js").Component,g=n("./shared/jquery.js"),v=n("./shared/modal.js"),b=n("./shared/log_sender.js");PAGE_IS_MOBILE&&(i=n("./mobile_app2/messages.js")),t.AskMultiModal={open:function(e,t,n){this._maybeInitManager(e),e.manager.pushStep(t,n)},load:function(e,t,n){this._maybeInitManager(e),e.manager.loadStep(t,n)},_maybeInitManager:function(e){e.manager||(e.manager=new u(e,this.transitionFunction))},transitionFunction:function(e,t,n){if("ask_user"!=t&&"ask_ama_question"!=t&&"ask_question"!=t||!n.near_duplicate_exists)if(n.view_duplicate)e.dismissCallback=function(){a(n.redirect)},e.dismiss();else if(n.isAnon)e.dismissCallback=function(){e.dismissCallback=null,s(n.redirect,n.non_anon_redirect_url)},e.dismiss();else if("ask_question"==t||"check_near_duplicate"==t||"translate_question"==t||"ask_hyperlink"==t)n.noBack=!0,n.redirect&&(e.dismissCallback=function(){a(n.redirect)}),e.pushStep("edit_topics",n);else if("edit_topics"==t&&n.translate_nid)n.noBack=!0,e.pushStep("a2a",n);else if("edit_topics"==t)n.noBack=!1,e.pushStep("a2a",n);else if("a2a"==t&&n.openTopicsStep)n.noBack=!0,e.pushStep("edit_topics",n);else if("a2a"==t&&n.translate_nid)e.pushStep("one_step_translate",n);else if("one_step_translate"==t&&n.translate_nid&&n.questionTranslationEditTopics)e.pushStep("translate_question_topics",n);else if("ask_to_translate"==t)n.prompt_dismissed?(e.dismiss(),n.redirect&&a(n.redirect)):(e.dismiss(),c.navigateTo(n.translate_question_url,"present"));else{if(n.isAmaSelfServe)return;e.dismiss(),n.redirect&&a(n.redirect)}else n.noBack=!0,e.pushStep("check_near_duplicate",n)}},t.AskQuestionStep=r.extend({onLoad:function(){var e=this;this.busy=!1,this.isAnon=!1,e._super.apply(e,arguments),e.activeTab="question",e.selected_tribe="",e.share_to_feed=!0,e.setEventHandlers(),PAGE_IS_MOBILE&&!l.isMobileWeb()||(this.isAnon=this.$id("@anon_checkbox").prop("checked")||!1,this.$id("@anon_checkbox").on("change",function(t){e.isAnon=e.$id("@anon_checkbox").prop("checked")||!1,e.toggleAnon(e.isAnon)})),e.enableUpdateAskToolbar=!1,e.handleEvent(o.Types.MULTIMODAL_SET_QUERY,function(t){t.payload.manager_id==e.manager_id&&t.payload.step_name==e.step_name&&(e.initial_query=t.payload.initial_query,e.maybeUpdateQuery())}),e.handleEvent(o.Types.MULTIMODAL_SET_LINK,function(t){t.payload.manager_id==e.manager_id&&t.payload.step_name==e.step_name&&(e.initial_link=t.payload.initial_link,e.maybeUpdateLink())}),e.handleEvent(o.Types.ASK_QUESTION_LIMIT_QUESTION_DISTRO,function(t){e.should_limit_distro=t.payload.should_limit}),e.handleEvent(o.Types.ANON_QUESTION_FLAG,function(t){e.isAnon=t.payload.anon}),e.child("quora_share_editor")&&e.child("quora_share_editor").onToggleButton(function(t){e.toggleLinkButtonState(t)}),this.setUpUserSharedLinks(),PAGE_IS_MOBILE?this.onLoadModalMobile():this.onLoadModalDesktop(),PAGE_IS_MOBILE&&this.voicePromptLanguage&&e.$id("@voice_input").on("click",function(t){i.send("getVoiceInput",{language:e.voicePromptLanguage},function(t){e.child("question_bar").replaceQuery(t.textForVoice),e.voice_text=e.child("question_bar").$input.val(),b.log("voice_input_action",{action:"input",voice_text:e.voice_text})})}),e.$id("@dismiss").on("click",function(t){e.$id("@setting_message").hide(),e.serverCall("dismiss_distribution_label").send()})},onLoadModalDesktop:function(){var e=this;this.child("question_bar").onModalEnter(function(){e.submit()}),this.onShowModalDesktop()},onShowModalDesktop:function(){var e=this.child("question_bar");if(e.focus(),e.query){var t=e.$id("@input").get(0);t&&t.setSelectionRange(e.query.length,e.query.length)}},onAskToolbarSubmit:function(e){!1===this.isAnon&&(this.isAnon=e.is_anonymous),this.submit()},onLoadModalMobile:function(){var e=this;this.onShowModalMobile();var t=n("./mobile_app2/client.js");t.registerMessageHandler("askToolbarSubmit",this.onAskToolbarSubmit.bind(this)),t.registerMessageHandler("askToolbarToggleAnon",function(t){e.isAnon=t.is_anonymous,e.toggleAnon(e.isAnon)}),t.registerMessageHandler("askToolbarAnonToggle",function(t){e.isAnon=t.is_anonymous,e.toggleAnon(e.isAnon)})},onShowModalMobile:function(){var e={buttonText:this.submitButtonText,enabled:!0};this.anonymouslyText&&(e.anonToggleText=this.anonymouslyText),this.serverCall("should_show_voice").send(),this.updateAskToolbar(e)},switchToLinkTab:function(){var e=this;e.$id("@link_tab").addClass("selected"),e.$id("@question_tab").removeClass("selected"),e.$id("@content_inner_link").removeClass("hidden"),e.$id("@content_inner_question").addClass("hidden"),e.$id("@submit_link_footer").removeClass("hidden"),e.$id("@submit_question_anon").addClass("hidden"),e.$id("@submit_question").addClass("hidden"),e.$id("@share_link_url").focus();var t={buttonText:e.submitButtonTextLink,anonToggleText:""};e.updateAskToolbar(t),l.isMobileWeb()&&e.$id("@nav").html(e.submitButtonTextLink),e.activeTab="link"},switchToQuestionTab:function(){var e=this;e.$id("@question_tab").addClass("selected"),e.$id("@link_tab").removeClass("selected"),e.$id("@content_inner_question").removeClass("hidden"),e.$id("@content_inner_link").addClass("hidden"),e.$id("@submit_link_footer").addClass("hidden"),e.$id("@submit_question_anon").removeClass("hidden"),e.$id("@submit_question").removeClass("hidden");var t={buttonText:e.submitButtonText,enabled:!0};e.anonymouslyText&&(t.anonToggleText=e.anonymouslyText),e.updateAskToolbar(t),l.isMobileWeb()&&e.$id("@nav").html(e.submitButtonText),e.activeTab="question"},setUpUserSharedLinks:function(){var e=this;e.$id("@submit_link").on("click",function(t){e.submit()}),this.$id("@link_tab").on("click",function(t){e.switchToLinkTab()}),this.$id("@question_tab").on("click",function(t){e.switchToQuestionTab()}),this.$id("@share_link_url").on("input",function(t){var n=e.$id("@share_link_url").val(),i=e.parseUrlFromText(n);i&&e.updateFakePreview(i)}),this.$id("@close_preview").on("click",function(t){e.$id("@url_input").removeClass("url_input_filled"),e.$id("@url_input_box").removeClass("url_input_box_filled"),e.$id("@fake_preview").addClass("hidden"),e.$id("@share_link_url").focus(),e.$id("@share_link_url").val("")}),e.handleEvent(o.Types.TRIBE_QUORA_SHARE_MODAL_CLOSED,function(t){e.selected_tribe=t.payload.selected_tribe,e.share_to_feed=t.payload.share_to_feed;var n=e.$id("@share_link_url").val(),i=e.parseUrlFromText(n);e.selected_tribe&&i&&e.maybeRenderDuplicateShareUI(i)})},updateFakePreview:function(e){var t=this;t.$id("@url_input").addClass("url_input_filled"),t.$id("@url_input_box").addClass("url_input_box_filled"),setTimeout(function(){t.$id("@fake_preview").removeClass("hidden")},500),t.serverCall("show_hyperlink_preview").kwargs({url:e}).contentFor(t.$id("@link_preview")).send(),t.selected_tribe&&t.maybeRenderDuplicateShareUI(e)},maybeRenderDuplicateShareUI:function(e){var t=this;t.serverCall("check_duplicate_tribe_share").kwargs({tribe_id:t.selected_tribe,url:e}).contentFor(t.$id("@duplicate_tribe_share")).send()},setEventHandlers:function(){var e=this;e.handleEvent(o.Types.ASK_QUESTION_MODAL_QUERY_CHANGE,function(t){e.updateCounter()})},maybeUpdateQuery:function(){var e=this;e.initial_query&&e.child("question_bar")&&e.child("question_bar").setInitialQuery&&(e.child("question_bar").setInitialQuery(e.initial_query),e.child("question_bar").maybeChangeInput(e.initial_query),e.child("question_bar").query!==e.initial_query&&(e.child("question_bar").query=e.initial_query))},maybeUpdateLink:function(){var e=this;if(e.initial_link){e.switchToLinkTab(),e.$id("@share_link_url").val(e.initial_link);var t=e.parseUrlFromText(e.initial_link);t&&e.updateFakePreview(t)}},onShow:function(){var e=this;this.voice_text="",e.enableUpdateAskToolbar=!0,e.maybeUpdateQuery(),l.isMobileWeb()&&!l.isIOSMobileWeb()||l.isIOSApp()?setTimeout(function(){e.child("question_bar").focus(),e.child("question_bar").resizeInput()},200):(e.child("question_bar").focus(),e.child("question_bar").resizeInput()),PAGE_IS_MOBILE?this.onShowModalMobile():this.onShowModalDesktop(),e.serverCall("log_modal_opened").send()},updateAskToolbar:function(e){if(l.isNativeApp()&&this.enableUpdateAskToolbar){n("./mobile_app2/messages.js").send("showAskToolbar",e)}},get_matched_qids:function(){var e=this.child("question_bar");if(!e)return[];var t=e.child("results");return t?(t.results||[]).map(function(e){return e.data.qid}):[]},submitLink:function(){var e=this;e.setBusyState(!0);var t=this.$id("@share_link_url").val(),n=this.parseUrlFromText(t),i=e.child("quora_share_editor").$id("@share_comment").val();e.serverCall("share_link").liveMutate().kwargs({url:n,comment:i,selected_tribe:e.selected_tribe,share_to_feed:e.share_to_feed}).success(function(t){t?e.dismiss():e.setBusyState(!1)}).send()},submitQuestion:function(e,t){var n=this,i=function(e){n.setBusyState&&n.setBusyState(e)};if(i(!0),n.voice_text){var r=n.child("question_bar").$input.val();b.log("voice_input_action",{action:"submit",voice_text:n.voice_text,question_text:r})}return n.serverCall("ask_question").kwargs(t).success(function(t){var r=t[0];i(!1),r&&(n.emitEvent({type:o.Types.ASK_QUESTION_MODAL_SUCCESS,scope:o.scope.GLOBAL,payload:{}}),e(t),n.is_ama_self_serve&&(n.child("question_bar").$input[0].value="",n.enableSubmit()))}).except(function(e){i(!1)}).error(function(e){i(!1)}).sendOnlyOnce()},submit:function(){var e=this;if(e.setBusyState(!0),"link"==this.activeTab)e.submitLink();else{var t=e._super.bind(this),n=e.child("question_bar").$input.val(),i=e.get_matched_qids(),o={question_text:n,is_anon:e.isAnon},r={question_text:n,is_anon:e.isAnon,hyperlink_text:e.getHyperlinkText(),source:e.source,target_type:e.targetType,target_oid:e.targetOid,location:d.controller,from_url:e.from_url,matched_qids:i,limited_user_distro:e.should_limit_distro};if(r=p.extend(r,e.extra_ask_server_call_kwargs),e.setSubmitData({isAnon:e.isAnon,translate_nid:e.data.translate_nid,showOneStepTranslation:e.showOneStepTranslation,questionTranslationEditTopics:e.questionTranslationEditTopics,isAmaSelfServe:e.is_ama_self_serve}),!e.shouldShowDuplicateQuestionStep)return void e.submitQuestion(function(n){e.extendSubmitData({redirect:n[1],qid:n[2],non_anon_redirect_url:n[3]}),t()},r);e.serverCall("check_near_duplicate_match").kwargs(o).success(function(i){var o=i[0],s=i[1],a=i[2];o&&s?(e.extendSubmitData({question_text:n,near_duplicate_qid:s,near_duplicate_url:a,near_duplicate_exists:!0,ask_question_kwargs:r}),t()):e.submitQuestion(function(n){e.extendSubmitData({redirect:n[1],qid:n[2],non_anon_redirect_url:n[3]}),t()},r)}).sendOnlyOnce()}},extendSubmitData:function(e){this.submitData=p.extend(this.submitData,e)},setSubmitData:function(e){this.submitData=e},getSubmitData:function(){return this.submitData},setBusyState:function(e){if(this.busy=e,this.toggleButtonState(!this.busy),PAGE_IS_MOBILE)if(l.isMobileWeb())this.busy?"question"==this.activeTab?this.$id("@nav").html(this.busyButtonText):this.$id("@nav").html(this.busyButtonTextLink):"question"==this.activeTab?this.$id("@nav").html(this.submitButtonText):this.$id("@nav").html(this.submitButtonTextLink);else{var t;t=this.busy?"question"==this.activeTab?{buttonText:this.busyButtonText}:{buttonText:this.busyButtonTextLink}:"question"==this.activeTab?{buttonText:this.submitButtonText}:{buttonText:this.submitButtonTextLink},this.updateAskToolbar(t)}else this.busy?this.$id("@submit").html(this.busyButtonText):this.$id("@submit").html(this.submitButtonText)},setSource:function(e){this.source=e},toggleAnon:function(e){e?(this.$id("@user_asks").addClass("hidden"),this.$id("@anon_asks").removeClass("hidden")):(this.$id("@anon_asks").addClass("hidden"),this.$id("@user_asks").removeClass("hidden"),this.emitEvent({type:o.Types.ASK_QUESTION_LIMIT_QUESTION_DISTRO,payload:{should_limit:!1}})),this.emitEvent({type:o.Types.ANON_QUESTION_FLAG,payload:{anon:e}})},toggleButtonState:function(e){if(PAGE_IS_MOBILE){var t={enabled:e};this.updateAskToolbar(t)}else e?this.$id("@submit").removeClass("submit_button_disabled"):this.$id("@submit").addClass("submit_button_disabled")},toggleLinkButtonState:function(e){var t=this;if(PAGE_IS_MOBILE){var n={enabled:e};t.updateAskToolbar(n)}else e?t.$id("@submit_link").removeClass("submit_button_disabled"):t.$id("@submit_link").addClass("submit_button_disabled")},updateCounter:function(){var e=this.child("question_bar").charactersLeft();if(PAGE_IS_MOBILE){var t="";e<15&&(t+=e);var n={currentCount:t};this.updateAskToolbar(n)}this.toggleButtonState(e>=0)},reset:function(){this.child("question_bar").reset(),this.updateCounter(),this.toggleAnon(!1),!l.isNativeApp()&&this.anonymouslyText&&(this.$id("@anon_checkbox").get(0).checked=!1),this.busy=!1},getHyperlinkText:function(){return this.child("sources").toJSON()},parseUrlFromText:function(e){var t=f.linkify(e);if(1==t.length){var n=t[0].href;if(n)return n}return""}}),t.DistributionSwitcher=h.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.handleEvent(o.Types.ANON_QUESTION_FLAG,function(t){1==t.payload.anon&&e._update(2)}),e.handleEvent(o.Types.ASK_QUESTION_LIMIT_QUESTION_DISTRO,function(t){0==t.payload.should_limit&&e._update(0)})},onSelect:function(e){this._super.apply(this,arguments);var t=this;0==e?t.emitEvent({type:o.Types.ASK_QUESTION_LIMIT_QUESTION_DISTRO,payload:{should_limit:!1}}):1==e?t.emitEvent({type:o.Types.ASK_QUESTION_LIMIT_QUESTION_DISTRO,payload:{should_limit:!0}}):2==e&&t.emitEvent({type:o.Types.ANON_QUESTION_FLAG,payload:{anon:!0}})}}),t.MiniDistributionSwitcher=m.extend({onPressed:function(){this._super.apply(this,arguments),this.loadModal()},loadModal:function(){var e=this;l.isNativeApp()?i.send("showActionView",{url:"/question/mobile_distribution_switcher",title:e.title,height:300}):l.isMobileWeb()&&e.createModal("open_distro_modal").show()}}),t.MiniDistributionSwitcherModalContent=_.extend({onLoad:function(){var e=this;e.$id("@wrapper").on("click",".option",function(t){var n=g(t.target.closest(".option")).attr("state");"show_to_followers"==n?(e.emitEvent({type:o.Types.ANON_QUESTION_FLAG,payload:{anon:!1},scope:o.scope.GLOBAL}),e.emitEvent({type:o.Types.ASK_QUESTION_LIMIT_QUESTION_DISTRO,payload:{should_limit:!1},scope:o.scope.GLOBAL})):"dont_show_to_followers"==n?(e.emitEvent({type:o.Types.ANON_QUESTION_FLAG,payload:{anon:!1},scope:o.scope.GLOBAL}),e.emitEvent({type:o.Types.ASK_QUESTION_LIMIT_QUESTION_DISTRO,payload:{should_limit:!0},scope:o.scope.GLOBAL})):"anon"==n&&e.emitEvent({type:o.Types.ANON_QUESTION_FLAG,payload:{anon:!0},scope:o.scope.GLOBAL}),v.handleClose(e)})}}),t.MiniDistributionSwitcherWrapper=_.extend({onLoad:function(){var e=this;e.handleEvent(o.Types.ASK_QUESTION_LIMIT_QUESTION_DISTRO,function(t){1==t.payload.should_limit&&e.updateButton("dont_show_to_followers")}),e.handleEvent(o.Types.ASK_QUESTION_LIMIT_QUESTION_DISTRO,function(t){0==t.payload.should_limit&&e.updateButton("show_to_followers")}),e.handleEvent(o.Types.ANON_QUESTION_FLAG,function(t){1==t.payload.anon&&e.updateButton("anon")})},updateButton:function(e){var t=this;t.$button=t.$id("@button"),t.serverCall("update_button").kwargs({state:e}).contentFor(t.$button).sendOnlyOnce()}}),t.MiniWebDistributionSwitcher=h.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.handleEvent(o.Types.ANON_QUESTION_FLAG,function(t){1==t.payload.anon&&e._update(1)}),e.handleEvent(o.Types.ASK_QUESTION_LIMIT_QUESTION_DISTRO,function(t){0==t.payload.should_limit&&e._update(0)})},onSelect:function(e){this._super.apply(this,arguments);var t=this;0==e?t.emitEvent({type:o.Types.ASK_QUESTION_LIMIT_QUESTION_DISTRO,payload:{should_limit:!1}}):1==e?t.emitEvent({type:o.Types.ANON_QUESTION_FLAG,payload:{anon:!0}}):2==e&&t.emitEvent({type:o.Types.ASK_QUESTION_LIMIT_QUESTION_DISTRO,payload:{should_limit:!0}})}})},"./unified_view/tchannel_up.js":function(e,t,n){var i=n("./shared/jquery.js"),o=n("./shared/onload.js"),r=n("./shared/util.js"),s=n("./shared/beforeunload.js"),a=n("./shared/events/index.js"),l=n("./shared/errors.js"),d=n("./shared/Class.js").Class,c=null,u=null,h=function(e,t,n,i){var o=window.location.protocol;return i&&(o="https:"===o?"wss:":"ws:"),e?o+"//"+e:[o,"//tch",Math.floor(1e6*Math.random())+1,".tch.",t,"/up/",n,"/updates?"].join("")},p=function(e){try{var t=JSON.parse(e)}catch(t){return void l.logJsError("unified_view/tchannel_up:processMessage","A message is not in JSON format: "+e)}if(!t.message_type||!t.payload)return void l.logJsError("unified_view/tchannel_up:processMessage","Malformed message data (missing message_type and/or payload): "+e);"broadcastReloadDirtiedDepkeys"==t.message_type&&a.DocumentProxy.dispatch({type:a.Types.BROADCAST_RELOAD_DIRTIED_DEPKEYS,payload:t.payload})},f=d.extend({__init__:function(e,t,n,i,o,r,s){this.minSeq=e,this.channel=t,this.channelHash=n,this.boxName=i,this.baseHost=o,this.enableWebsocket=s,this.socket=null,this.targetUrl=h(r,this.baseHost,this.boxName,this.enableWebsocket),this.isConnected=!0,this.isActive=!0,this.maxBackOffTime=3e4,this.updateBackOffTime(!0),this.numActiveXhr=0,this.pendingMessages=[];var a=this;window.addEventListener("online",function(){a.poll(null,!0)}),window.addEventListener("offline",function(){a.setIsConnected(!1),a.closeWebsocket()})},makeJsonpRequest:function(e){if(0===this.numActiveXhr){this.numActiveXhr+=1;var t={min_seq:this.minSeq,channel:this.channel,hash:this.channelHash};e&&(t.timeout=e),i.ajax({url:this.targetUrl,jsonpCallback:function(){return"jsonp"+r.uuid4()},dataType:"jsonp",method:"GET",data:t,success:this._onSuccess.bind(this),error:this._onError.bind(this),complete:this._onPollComplete.bind(this)})}},makeWebsocketRequest:function(e){null===this.socket&&(e&&u?u(this._makeWebsocketRequest.bind(this)):this._makeWebsocketRequest())},_makeWebsocketRequest:function(e,t,n,o,r){e!=undefined&&(this.minSeq=e),this.channel=t||this.channel,this.channelHash=n||this.channelHash,this.boxName=o||this.boxName,o&&(this.targetUrl=h(r,this.baseHost,this.boxName,this.enableWebsocket));var s=this.targetUrl+i.param({min_seq:this.minSeq,channel:this.channel,hash:this.channelHash});try{this.socket=new window.WebSocket(s)}catch(e){return void this._onError()}this.socket.onerror=this._onWebsocketError.bind(this),this.socket.onmessage=this._onWebsocketSuccess.bind(this),this.socket.onclose=this._onWebsocketClose.bind(this)},closeWebsocket:function(){null!==this.socket&&(this.socket.close(1e3),this.socket=null)},setIsConnected:function(e){this.isConnected=e},updateBackOffTime:function(e){e&&(this.backOffTime=500),this.backOffTime=Math.min(2*this.backOffTime,this.maxBackOffTime)},_onError:function(){var e=this;setTimeout(function(){e.isActive&&!s.isUnloading()&&(e.updateBackOffTime(),e.enableWebsockets||(e.setIsConnected(!1),e.poll(null,!0)))},0)},_onWebsocketError:function(e){this.closeWebsocket(),this._onError()},_onPollError:function(e,t){this._onError()},_onSuccess:function(e){if(this.isActive&&!s.isUnloading()){this.updateBackOffTime(!0),this.setIsConnected(!0);try{if(e.error)throw e.error;this.minSeq=e.min_seq;for(var t=0;t<e.messages.length;t++)e.messages[t].includes("w2.livenode")||p(e.messages[t])}catch(e){return}this.enableWebsockets||this.poll(null,!1)}},_onWebsocketSuccess:function(e){this._onSuccess(JSON.parse(e.data))},_onPollSuccess:function(e){this._onSuccess(e)},_onWebsocketClose:function(e){this.isConnected&&(this.setIsConnected(!1),this.poll(null,!0))},_onPollComplete:function(){this.numActiveXhr-=1},poll:function(e,t){this.enableWebsocket?setTimeout(this.makeWebsocketRequest.bind(this,t),this.backOffTime):setTimeout(this.makeJsonpRequest.bind(this,e),this.backOffTime)},start:function(){this.poll(2e3,!1)},stop:function(){this.isActive=!1}});t.start=function(e){"WebSocket"in window&&(c=new f(e.minSeq,e.channel,e.channelHash,e.boxName,e.baseHost,e.targetUrl,e.enableWebsocket),o.execAfterLoadDelayed(function(){c.start()}))},t.stop=function(){c&&c.stop()},t.setBeforeReconnection=function(e){u=e}},"./video.js":function(e,t,n){var i=n("./shared/jquery.js");t.handleVideosBeforeSelectionHidden=function(e){e.find(".qtext_embed, .qt-video").each(function(t,n){e.find("iframe, video")&&i(n).parent().empty()})},t.stopAllVideos=function(e){e.find(".qtext_embed").each(function(e,t){i(t).find("iframe").each(function(e,t){var n=i(t).attr("src");n&&-1!==n.indexOf("autoplay=1")&&(n=n.replace("autoplay=1","autoplay=0")),i(t).attr("src",n)})}),e.find("video").each(function(e,t){t.pause()})}},"./view/hover_menu.js":function(e,t,n){var i=n("./shared/core/component.js").Component,o=n("./shared/jquery.js"),r=n("./shared/Class.js").Class,s=n("./shared/onload.js"),a=n("./shared/dom.js"),l=n("./shared/perf.js"),d=n("./shared/client_log.js"),c=n("./shared/w2.context.js");t.HoverMenu=i.extend({contextConstructor:function(){return c.HoverMenu},onLoad:function(e){this.on=this.on||350,this.off=this.off||350,this.st=null,this.ht=null,this.loaded=this.loaded||this.should_preload_menu,this.loading=!1,this.shown=!1,this.cancelHover=!1,this.load_on_pageload&&e&&this.loadMenu(!0),this.registerClickHandlers(),this.maybeRegisterHoverHandlers(),this.hoverMenuContext=this.getContext(c.HoverMenu),this._userPerceivedAction=null,this.setDvar("hovermenu_parent",this.cid)},registerClickHandlers:function(){var e=this;e.hoverMenuContext=e.getContext(c.HoverMenu),e.hoverMenuContext.on("hidden",function(t,n){!0===n&&(e.cancelHover=!0,e.doHide())}),this.click_open?(this.$id("@link").click(function(t){e.shown?(e.cancelHover=!0,e.doHide()):(e._userPerceivedAction=l.startUserPerceived({hmac:e.getHmac(),method:"load_menu"}),e.cancelHover=!1,e.loadMenu(),e.doShow()),t.preventDefault()}),a.onDocClick(function(t){var n=e.isInvalidCloseTarget(o(t));e.shown&&!n&&(e.cancelHover=!0,e.doHide())})):this.$id("@link").click(function(){e.cancelHover=!0,e.doHide()})},isInvalidCloseTarget:function(e){var t=this.$id("@link");return!(!e.is(t)&&!e.parents(t).is(t))},maybeRegisterHoverHandlers:function(){var e=this;this.show_menu&&!this.click_open&&(this.$id("@link").hover(this.show.bind(this),function(){e.hide(),e.cancelHover=!1,e.$id("@link").removeClass("hover")}),this.$id("@menu").hover(this.show.bind(this),this.hide.bind(this)))},setPosition:function(){if(!this.css_positioning){var e=this.$id("@link").outerHeight(),t=this.$id("@link").offset(),n=t,i=o(window).height(),r=275,s=n.top-o(window).scrollTop(),a=i-s<r,l=this.menu_offset_px?this.menu_offset_px:0;if(this.$id("@menu").removeAttr("style"),a?(this.attach_to_body?this.$id("@menu").css("bottom",i-t.top+l+"px"):this.$id("@menu").css("bottom",e+"px"),this.$id("@menu").addClass("hover_menu_above")):(this.attach_to_body?this.$id("@menu").css("top",t.top+e+1+l+"px"):this.$id("@menu").css("top",e+"px"),this.$id("@menu").removeClass("hover_menu_above")),this.attach_to_body){var d=o(window).width(),c=this.$id("@menu").outerWidth(),u=c+n.left,h=n.left,p=this.$id("@link").outerWidth();"right"==this.alignment?this.$id("@menu").css("left",h-c+p+"px"):"center"==this.alignment?this.$id("@menu").css("left",h-c/2+p/2+"px"):d<u?(this.$id("@menu").addClass("right_align"),this.$id("@menu").css("left",h-c+p+"px")):(this.$id("@menu").css("left",h+"px"),this.$id("@menu").removeClass("right_align"))}}},hide:function(){this._userPerceivedAction&&(l.cancelAction(this._userPerceivedAction),this._userPerceivedAction=null),clearTimeout(this.st),this.ht=setTimeout(this.doHide.bind(this),this.off)},doHide:function(){var e=this;this.shown&&(this.hoverMenuContext.set("isShown",!1),this.shown=!1,this.$id("@link").removeClass("hover"),this.$id("@menu").addClass("animate_out"),setTimeout(function(){e.shown||(e.$id("@menu").removeClass("animate_out"),e.$id("@menu").addClass("hidden"))},150))},getKwargs:function(){return this.kwargs?this.kwargs:{}},okToShowHoverMenu:function(){return this.should_show_hover_menu&&0===this.$id("@menu").parents(".hover_menu_contents").length},show:function(){this.okToShowHoverMenu()&&this.showInner()},showInner:function(){this._userPerceivedAction=l.startUserPerceived({hmac:this.getHmac(),method:"load_menu"}),clearTimeout(this.ht),this.st=setTimeout(this.doShow.bind(this),this.on),this.loadMenu(),this.$id("@menu").removeClass("animate_out"),this.$id("@link").addClass("hover")},doShow:function(){this.shown||this.cancelHover||(this.hoverMenuContext.set("isShown",!0),this.hoverMenuContext.set("hidden",!1),this.shown=!0,this.css_positioning||this.movedToBody||!this.attach_to_body||(this.$id("@menu").detach().prependTo(o("body")),d.associateParentChildDomIds(this.$id("@menu").attr("id"),this.$id("@link").attr("id")),this.movedToBody=!0),o(".GrowlNotification").hide(),this.$id("@menu").removeClass("hidden"),this.$id("@link").addClass("hover"),this.setPosition(),!0===this.loaded&&this._userPerceivedAction&&(l.finishAction(this._userPerceivedAction),this._userPerceivedAction=null))},loadMenu:function(e){var t=this;e===undefined&&(e=!1);var n=function(){t.loaded||t.loading||(t.loading=!0,t.serverCall("load_menu").kwargs(t.getKwargs()).disableDefaultUserPerceivedLogging().contentFor(t.$id("@menu_contents")).success(function(e){t.loaded=!0,t.loading=!1,!0===t.shown&&t._userPerceivedAction&&(l.finishAction(t._userPerceivedAction),t._userPerceivedAction=null)}).except(function(e){t.loading=!1}).send())};e?s.execAfterLoadDelayed(function(){n()}):n()}}),t.ToggleableMenu=r.extend({__init__:function(e){if(this.$linkElem=e.$linkElem,this.$menuElem=e.$menuElem,this.loadFunction=e.loadFunction,!(this.$linkElem&&this.$menuElem&&this.loadFunction))throw new Error("Invalid kwargs given: "+e);this.useCssPositioning=e.useCssPositioning||!1,this.shouldAttachToBody=!!e.shouldAttachToBody,this.menuOffsetPx=e.menuOffsetPx||0,this.alignment=e.alignment||"left",this.clickOpen=e.clickOpen||!1,this.showDelayMs=e.showDelayMs||350,this.hideDelayMs=e.hideDelayMs||350,this.appendCssClass=e.appendCssClass||"",this.onHideShowFunction=e.onHideShowFunction||null,this.$menuElem.hasClass("ui_popup_menu")?this.show_above_class="ui_popup--above":this.show_above_class="hover_menu_above",this.shown=!1,this.movedToBody=!1,this.cancelHover=!1,this.hideTimeout=null,this.showTimeout=null,this.registerHoverHandlers(),this.registerClickHandlers(),this.appendClass()},registerHoverHandlers:function(){this.clickOpen||(this.$linkElem.hover(this.showMenuSlow.bind(this),function(){this.hideMenuSlow(),this.cancelHover=!1,this.$linkElem.removeClass("hover")}.bind(this)),this.$menuElem.hover(this.showMenuSlow.bind(this),this.hideMenuSlow.bind(this)))},registerClickHandlers:function(){this.clickOpen?(this.$linkElem.click(this.toggleMenu.bind(this)),a.onDocClick(this.maybeHideMenu.bind(this))):this.$linkElem.click(this.hideMenu.bind(this))},toggleMenu:function(e){e&&e.preventDefault(),e&&e.stopPropagation(),this.shown?(this.cancelHover=!0,this.hideMenu()):(this.cancelHover=!1,this.loadFunction(),this.showMenu())},maybeHideMenu:function(e){var t=this.$linkElem.get(0);e==t||t&&o.contains(t,e)||this.hideMenu()},hideMenuSlow:function(){clearTimeout(this.showTimeout),this.hideTimeout=setTimeout(this.hideMenu.bind(this),this.hideDelayMs)},hideMenu:function(){this.shown&&(this.cancelHover=!0,this.shown=!1,this.$linkElem.removeClass("hover"),this.$menuElem.addClass("animate_out"),setTimeout(function(){this.shown||(this.$menuElem.removeClass("animate_out"),this.$menuElem.addClass("hidden"))}.bind(this),150),this.onHideShowFunction&&this.onHideShowFunction(this.shown))},shouldShowMenu:function(){return 0===this.$menuElem.parents(".hover_menu_contents").length},showMenuSlow:function(){this.shouldShowMenu()&&(clearTimeout(this.hideTimeout),this.showTimeout=setTimeout(this.showMenu.bind(this),this.showDelayMs),this.loadFunction(),this.$menuElem.removeClass("animate_out"),this.$linkElem.addClass("hover"))},showMenu:function(){this.shown||this.cancelHover||(this.shown=!0,this.moveMenuToBody(),o(".GrowlNotification").hide(),this.$menuElem.removeClass("hidden"),this.$linkElem.addClass("hover"),this.setPosition(),this.onHideShowFunction&&this.onHideShowFunction(this.shown))},moveMenuToBody:function(){this.useCssPositioning||this.movedToBody||(this.movedToBody=!0,this.shouldAttachToBody?(this.$menuElem.detach().prependTo(o("body")),d.associateParentChildDomIds(this.$menuElem.attr("id"),this.$linkElem.attr("id"))):this.$menuElem.detach().prependTo(this.$linkElem))},appendClass:function(){this.appendCssClass&&this.$menuElem.addClass(this.appendCssClass)},setPosition:function(){if(!this.useCssPositioning){var e=o(window),t=this.$linkElem.outerHeight(),n=this.$linkElem.offset(),i=n,r=e.height(),s=275,a=i.top-e.scrollTop(),l=r-a<s,d=this.$menuElem.outerWidth(),c=this.$linkElem.outerWidth();if(this.$menuElem.removeAttr("style"),l?(this.shouldAttachToBody?this.$menuElem.css("bottom",r-n.top+this.menuOffsetPx+"px"):this.$menuElem.css("bottom",t+"px"),this.$menuElem.addClass(this.show_above_class)):(this.shouldAttachToBody?this.$menuElem.css("top",n.top+t+1+this.menuOffsetPx+"px"):this.$menuElem.css("top",t+"px"),this.$menuElem.removeClass(this.show_above_class)),this.shouldAttachToBody){var u=e.width(),h=d+i.left,p=i.left;if(u<h){var f=h-u;"left"==this.alignment&&(p-=f+10)}"right"==this.alignment?this.$menuElem.css("left",p-d+c+"px"):"center"==this.alignment?this.$menuElem.css("left",p-d/2+c/2+"px"):this.$menuElem.css("left",p+"px")}else"right"==this.alignment?this.$menuElem.css("right",0):"center"==this.alignment?this.$menuElem.css("left",c/2-d/2+"px"):this.$menuElem.css("left",0)}}})},"./w2.errors.js":function(e,t,n){function i(e,t,n,i,r){if(r!==undefined){(new Date).getTime()-r>a&&(i=!1)}i&&o()}function o(e){l.Error&&l.Error.show(e)}function r(e){c++,setTimeout(function(){c--},e)}function s(){return 0!==c}var a=50,l=n("./webnode2.js"),d=n("./shared/jquery.js"),c=0;d(document).on("mouseup.w2errors mousedown.w2errors keyup.w2errors keydown.w2errors keypress.w2errors",function(){r(a)}),t.reportAjaxError=i,t.showError=o,t.canBeRelatedToUserAction=s,t.beginCanBeRelatedToUserActionBlock=r},"./w2.livenode.js":function(e,t,n){function i(e){var t,n={};return f("#"+e+" [w2cid]").each(function(e,i){t=i.getAttribute("w2cid"),n[t]=i}),n}function o(e){var t={};return f.each(e,function(e,n){if(!(n.domid in t)){var o=i(n.domid);t[n.domid]=o}}),t}function r(e){var t=m.interactionMode._changedComponents[e];return t&&t!=m.interactionMode._states.OFF}function s(e,t,n){var i=o(e);try{f.each(e,function(e,n){var o=i[n.domid];"update_data"!=n.type&&"insert_node"!=n.type&&f.each(o,function(e,i){if(r(e)){if(!t)throw console.log("throwing blocking_interaction_mode cid="+e+" on optype = "+n.type),console.log("affected node:"),console.log(o[e]),new Error("blocking_interaction_mode");console.log("forcing override on live update conflict with cid="+e+" on optype = "+n.type)}})})}catch(t){if("blocking_interaction_mode"==t.message)return console.log("Calling startBlocking from checkForConflicts"),m.interactionMode.startBlocking(),A.interactionDelayedLivedepOperations.push({data:e,textStatus:n}),!1;throw t}return!0}function a(e){m.interactionMode.resumeUpdates();var t=Math.random(),n={};return n._lm_transaction_id=t,n._lm_window_id=E.windowId,e===undefined?M[t]=1:M[t]={optimisticUpdate:e},c(),{transactionId:t,data:n}}function l(e,t){delete M[e],A.requiredVersion=Math.max(t,A.requiredVersion),c()}function d(e){A.currentVersion=e,h()}function c(){var e,t=0,n=0;for(e in M)n++,M[e].optimisticUpdate&&t++;A.pendingMutationCount=n,A.optimisticUpdateMutationCount=t,h()}function u(){C.stop()}function h(){var e=A.pendingMutationCount>A.optimisticUpdateMutationCount,t=A.currentVersion<A.requiredVersion;g.GlobalProxy.dispatch({type:g.Types.LIVENODE_LOADING_SPINNER,payload:{show:e||t}})}function p(e,t){if(t=t||{},console.log("Page requires reload ",e,t),!I){var n={error:"reportPageNeedsReload",uid:E.uid,window_id:E.windowId,url:window.location.href,error_type:e,debug_info:t};b.log("livenode_error",n,{scribeOnly:!0}),I=!0}E.isLoggedIn&&(m.Error&&m.Error.hide(),m.fallbackToPostReloadMode(),m.interactionMode.$id("@message").html("<a href='javascript:window.location.reload();'>"+k.please_refresh+"</a>"),console.log("Calling startBlocking from reportPageNeedsReload"),m.interactionMode.startBlocking())}var f=n("./shared/jquery.js"),m=n("./webnode2.js"),_=n("./shared/core/webnode.js"),g=n("./shared/events/index.js"),v=n("./shared/core/component.js"),b=n("./shared/log_sender.js"),y=n("./shared/browser.js"),w=n("./shared/dom.js"),E=n("./settings.js"),T=n("./shared/errors.js"),S=n("./shared/viewport.js"),C=n("./tchannel_up.js"),x=n("./shared/fx.js"),k=E.interface_strings,A={interactionDelayedLivedepOperations:[],pendingMutationCount:0,optimisticUpdateMutationCount:0,currentVersion:0,requiredVersion:0},I=!1,O={},L={};g.DocumentProxy.subscribe(g.Types.WEBNODE_BEFORE_REMOVE_COMPONENT_METADATA,function(e){var t=e.payload.cid;t&&(O[t]=v._hmacs[t],L[v._domids[t]]=v._hmacs[t])});var D=function(e,t,n){if(n=n||!1,"error"==e)return console.log("LiveNode error"),void p("livenode_data_error");if(!m.interactionMode||m.interactionMode.isBlocking())return A.interactionDelayedLivedepOperations.push({data:e,textStatus:t}),!1;if(!s(e,n,t))return!1;var i=!y.msie&&f(window).scrollTop()>0;i&&f("div.feed_item_inner").each(function(){S.isElementInViewport(this)&&w.anchor(f(this))}),f.each(e,function(e,t){var n,o,r;switch(f(document).trigger("livenode_op_start",t),t.type){case"set_node":if(t.domid in m._ignoreDomids)break;var s=f("#"+t.domid);if(!s.length)return void p("set_node_missing",{hmac:v._hmacs[t.cid],op_domid:t.domid,op_cid:t.cid});var a=t.transition;if(r=v.getComponentFromElement(s.get(0)),r&&r.force_transition&&(a=r.force_transition),!("cid"in t))return void T.logJsError("w2.livenode","Expected cid in op got: "+JSON.stringify(t));switch(v.unloadComponent(t.cid),_.setContent(s,t.content),a.type){case"none":break;case"fade_in":x.fadeIn(s,2e3)}break;case"insert_node":if(t.domid in m._ignoreDomids)break;if(!(n=document.getElementById(t.domid)))return void p("insert_node_missing",{parent_hmac:v._hmacs[t.parent_cid],op_domid:t.domid,op_parent_cid:t.parent_cid});var l=document.createElement("DIV");if(_.setContentHTML(l,t.content),1!=l.childNodes.length)return console.log("error: append must give a single node"),void p("invalid_append");var d=l.childNodes[0],c=d.id;if(d.style.display="none",n.childNodes.length==t.position?n.appendChild(d):n.insertBefore(d,n.childNodes[t.position]),_.evaluateContentJS(t.content),o=v._components[t.parent_cid],o&&o.onInsertNode&&o.onInsertNode(t,c),"none"==t.transition.type)break;if("scroll"==t.transition.type){d.style.display="",d.scrollIntoView(!1);break}if(i||"fade_in"==t.transition.type){f("#"+c).fadeIn(500);break}d.style.display="none",f("#"+c).fadeIn(1e3);break;case"delete_node":if(t.domid in m._ignoreDomids)break;if(!(n=document.getElementById(t.domid)))return void p("delete_node_missing",{op_domid:t.domid,op_parent_cid:t.parent_cid});if(!v._parents[t.parent_cid])return void p("delete_node_missing_component",{op_parent_cid:t.parent_cid});var u=n.childNodes[t.position];if(u.id!=t.child_domid)return void p("delete_node_wrong_child",{parent_hmac:v._hmacs[t.parent_cid],node_id:u.id,op_child_domid:t.child_domid});o=v._components[t.parent_cid],o&&o.onDeleteNode&&o.onDeleteNode(t,u.id),v.unloadComponent(t.child_cid),f("#"+u.id).remove();break;case"update_data":if(t.cid in m._ignoreCids)break;if(!v._parents[t.cid])return void p("update_data_missing_component",{op_cid:t.cid,op_parent_cid:t.parent_cid});r=v._components[t.cid],r&&r.onUpdate&&r.onUpdate(t.data);break;case"error":return console.log("livedep error: "+t.error),void p("livenode_error",{op_error:t.error});default:p("invalid_op_type",{op_type:t.type})}}),f(document).trigger("livenode_finish_operations")},M={};t.reportPageRegainedConnection=function(){m.Error.hide()},t.reportPageLostConnection=function(){m.Error.show(k.trying_to_regain)},t.startMutation=a,t.onLivedepOperations=D,t.reportPageNeedsReload=p,t.setCurrentVersion=d,t.mutationDoneAfterVersion=l,t.stopLiveUpdates=u,t.state=A},"./w2.modal.js":function(e,t,n){var i=n("./shared/core/component.js"),o=n("./shared/jquery.js"),r=n("./shared/Class.js").Class,s=n("./webnode2.js"),a=n("./video.js"),l=n("./shared/dom.js"),d=n("./shared/client_log.js"),c=n("./shared/viewport.js"),u=n("./shared/core/component.js").getAllDvars,h=n("./shared/debounce.js").debounce,p=n("./shared/keyboard_event_handler.js"),f=[],m=function(e){f.push(e)},_=function(e){f=[]},g=function(){return f[f.length-1]},v=0,b=function(){return v++},y=1e3,w=t.ModalBase=r.extend({__init__:function(e,t){this.opener=e,this.opts=o.extend({args:[],kwargs:{},closeOnEscape:!0,closeOnBackgroundClick:!0,closeOnScroll:!1,customOverlayClass:null,errorCallback:null},t),this._modalId=b(),this._cid="*modal*_"+this._modalId,this.$container=o("#__w2_modal_container_"),this._initModal(),this._fetchStarted=!1,this._fetchCompleted=!1,this._fetchStartTime=0,this._isOpen=!1,this._firstOpenTime=0},_initModal:function(){var e=document.createElement("div");e.id="#__w2_modal_overlay_"+this._modalId,e.className="modal_overlay hidden",this.opts.customOverlayClass&&e.classList.add(this.opts.customOverlayClass),this.$container.append(e),this.$overlay=o(e);var t=document.createElement("div");t.id="#__w2_modal_wrapper_"+this._modalId,t.className="modal_wrapper",t.tabIndex=-1,e.appendChild(t),this.$contentWrapper=o(t)},_bindHandlers:function(){this.opts.closeOnEscape&&this.bindKeyboardHotkeys(),this.opts.closeOnBackgroundClick&&this.bindBackgroundClickDismissHandler()},_unbindHandlers:function(){this.opts.closeOnEscape&&p.remove(this.escKeyHandler),this.opts.closeOnBackgroundClick&&this.$overlay.off("click.modalOverlay"),this.opts.closeOnScroll&&this.unbindCloseOnScroll()},_open:function(){this._isOpen=!0,m(this),this._bindHandlers(),c.setPageScroll(!1);var e=i.getLiveParent(this.opener.cid),t=this.$contentWrapper.attr("id");d.associateParentChildDomIds(t,e),this.$overlay.removeClass("hidden"),this.$contentWrapper.focus(),this._fetchCompleted&&this.onContentVisible()},fetch:function(e){if(!this._fetchStarted){this.$contentWrapper.addClass("loading_overlay"),this._fetchStarted=!0,this._fetchStartTime=Date.now();var t=this,n=this.opener.serverCall(e);n.args.apply(n,t.opts.args).kwargs(t.opts.kwargs).error(function(){t._fetchStarted=!1,i.unloadComponent(t._cid),t.close()}).success(function(){t.onFetchSuccess()}).sendJsData(t.opts.sendJsData).contentFor(this.$contentWrapper,{parentCid:this._cid}),this.opts.errorCallback&&n.error(this.opts.errorCallback),n.send()}},onFetchSuccess:function(){this.opener.__modal__=this;var e=i._safeGetComponentByCID(this._cid);e.__opener__=this.opener,e.__modal__=this,i._components[this._cid]=e;var t={};t[this._cid]="*ROOT*",i.addParents(t),e.setDvar("__modal__",this._cid);var n=i._allChildren[this._cid][0],o=i._safeGetComponentByCID(n),r=u(this.opener);delete r.__modal__,o.__dvars__=r,this.$contentWrapper.height()>y&&this.$contentWrapper.addClass("tall"),this.$contentWrapper.removeClass("loading_overlay"),this._fetchCompleted=!0,this._isOpen&&this.onContentVisible()},onContentVisible:function(){this.opts.closeOnScroll&&this.bindCloseOnScroll()},load:function(e){return this._open(),this._fetchStarted||this.fetch(e),0===this._firstOpenTime&&(this._firstOpenTime=Date.now()),this},_teardownContent:function(){},close:function(e){if(this._isOpen){this._isOpen=!1,_(this),a.stopAllVideos(this.$contentWrapper);var t=i.getLiveParent(this.opener.cid),n=this.$contentWrapper.attr("id");d.removeParentChildAssociation(n,t);var o=this,r=function(){o.$overlay.addClass("hidden"),g()||(o.opts.closeOnScroll&&o._reenableScrollAfterClose?o._reenableScrollAfterClose():c.setPageScroll(!0)),o._unbindHandlers(),o._teardownContent()};e?r():l.addAnimationClass(o.$overlay,"closing",r)}},bindCloseButton:function(){var e=this;e.$closeButton.on("click",function(t){t.stopPropagation(),e._isOpen&&e.close()})},_closeOnScrollThreshold:function(){var e=this.$contentWrapper.outerHeight();return Math.max(e-.33*window.innerHeight,2*e/3)},bindCloseOnScroll:function(){var e=this;e._setupScrollClose||(e._setupScrollClose=h(function(){e.$contentWrapper.css("margin-bottom",window.innerHeight);var t=e._closeOnScrollThreshold();e.$overlay.scrollTop()>t&&e.$overlay.scrollTop(t)},50)),e._checkScrollClose||(e._checkScrollClose=h(function(){e.$overlay.scrollTop()>e._closeOnScrollThreshold()&&e.close(!0)},50)),e._reenableScrollAfterClose||(e._reenableScrollAfterClose=h(function(){g()||(c.setPageScroll(!0),o(window).off("wheel",e._reenableScrollAfterClose))},100,{maxWait:1e3})),e.$overlay.scrollTop(0),e._setupScrollClose(),o(window).on("resize",e._setupScrollClose),e.$overlay.on("scroll",e._checkScrollClose),o(window).on("wheel",e._reenableScrollAfterClose)},unbindCloseOnScroll:function(){o(window).off("resize",this._setupScrollClose),this.$overlay.off("scroll",this._checkScrollClose)},bindKeyboardHotkeys:function(){var e=this;e.escKeyHandler=function(t){27==t.keyCode&&e._isOpen&&e===g()&&e.close()},p.push(e.escKeyHandler)},bindBackgroundClickDismissHandler:function(){var e=this;e.$overlay.on("mousedown.modalOverlay",function(t){t.target==this&&!e._isScrollBarClicked(t)&&e._isOpen&&(t.stopPropagation(),e.close())})},_isScrollBarClicked:function(e){var t=l.getScrollbarWidth();return window.innerWidth-e.clientX<t}}),E=t.Modal=w.extend({_initModal:function(){this.$contentWrapper=o("#__w2_modal_wrapper_"),this.$overlay=o("#__w2_modal_overlay_"),this.$closeButton=o("#__w2_modal_close_")},_teardownContent:function(){s.forgetContents(this.$contentWrapper),i.unloadComponent(this._cid),this.$contentWrapper.html(""),this.$overlay.off()}});t.ModalWithCallBacks=E.extend({_onCloseCallBack:null,_onSubmitCallBack:null,onCloseCallBack:function(e){return this._onCloseCallBack=e,this},executeOnCloseCallBack:function(){this._onCloseCallBack&&this._onCloseCallBack()},onSubmitCallBack:function(e){return this._onSubmitCallBack=e,this},executeOnSubmitCallBack:function(){this._onSubmitCallBack&&this._onSubmitCallBack.apply(null,arguments)}}),E.openerFor=function(e){var t=e.getDvar("__modal__"),n=i._safeGetComponentByCID(t);return n&&n.__opener__},E.modalFor=function(e){var t=e.getDvar("__modal__"),n=i._safeGetComponentByCID(t),o=n&&n.__modal__;return o||(o=g()),o},E.getCurrentModal=g},"./webnode2.js":function(e,t,n){var i=n("./shared/errors.js"),o=n("./settings.js"),r=n("./shared/core/component.js"),s=t._liveDepInfo={},a=t._ignoreDomids={},l=t._ignoreCids={};t.addLiveDepInfo=function(e){for(var t=Object.keys(e),n=t.length,i=0;i<n;++i){var o=t[i];s[o]=e[o]}},t.interactionMode=null,t.Error=null,t.assertUnloaded=function(e){e in r._unloaded||i.logJsError("webnode2","Cid was not unloaded: "+e)},t.fallbackToPostReloadMode=function(){o.pageMode="post_reload"},t.forgetContents=function(e){e.find("[id]").map(function(){var e=r._domidToCid[this.id];e&&(a[this.id]=1,l[e]=1)})}}});